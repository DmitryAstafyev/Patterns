(function(){var L=function(){},M=function(){},N=function(){},O=function(){},P=function(){},Q=function(){},R=function(){},S=function(){},T=function(){},U=function(){};L.prototype=function(){var t=null,e=null,q=null,p=null,n=null,l=null,d=null,r=null,v=null,h=null,g=null,m=null,b=null,c=null,k=null,C=null,G=null,E=null,t={values:{USE_STORAGE_CSS:!0,USE_STORAGE_JS:!0,USE_STORAGE_HTML:!0,PATTERN_NODE:"pattern"},validator:{USE_STORAGE_CSS:function(a){return"boolean"===typeof a?!0:!1},USE_STORAGE_JS:function(a){return"boolean"===
typeof a?!0:!1},USE_STORAGE_HTML:function(a){return"boolean"===typeof a?!0:!1},PATTERN_NODE:function(a){return"string"===typeof a?0<a.length?0===a.replace(/\w/gi,"").length?!0:!1:!1:!1}},setup:function(a){null!==a&&"object"===typeof a&&_object(a).forEach(function(a,b){void 0!==t.values[a]&&void 0!==t.validator[a]&&(t.values[a]=t.validator[a](b)?b:t.values[a])})},get:function(){return t.values},debug:function(){t.values.USE_STORAGE_CSS=!1;t.values.USE_STORAGE_JS=!1;t.values.USE_STORAGE_HTML=!1;flex.config.set({SHOWN_LOGS:["CRITICAL",
"LOGICAL","WARNING","NOTIFICATION","LOGS"]})}},e={measuring:{MEASURE:!0},classes:{SOURCE:function(){},PATTERN:function(){},INSTANCE:function(){},RESULT:function(){},CALLER:function(){}},regs:{BODY:/<\s*body[^>]*>(\n|\r|\s|.)*?<\s*\/body\s*>/gi,BODY_TAG:/<\s*body[^>]*>|<\s*\/\s*body\s*>/gi,BODY_CLEAR:/^[\n\r\s]*|[\n\r\s]*$/gi,TABLE:/<\s*table[^>]*>(\n|\r|\s|.)*?<\s*\/table\s*>/gi,TABLE_TAG:/<\s*table[^>]*>|<\s*\/\s*table\s*>/gi,ANY_TAG:/<\s*[\w]{1,}[^>]*>(\n|\r|\s|\t|.)*<\s*\/\s*\w{1,}\s*>/gi,FIRST_TAG:/^\<.*?\>/gi,
TAG_BORDERS:/<|>/gi,CSS:/<link\s+.*?\/>|<link\s+.*?\>/gi,CSS_HREF:/href\s*\=\s*"(.*?)"|href\s*\=\s*'(.*?)'/gi,CSS_REL:/rel\s*=\s*"stylesheet"|rel\s*=\s*'stylesheet'/gi,CSS_TYPE:/type\s*=\s*"text\/css"|type\s*=\s*'text\/css'/gi,JS:/<script\s+.*?>/gi,JS_SRC:/src\s*\=\s*"(.*?)"|src\s*\=\s*'(.*?)'/gi,JS_TYPE:/type\s*=\s*"text\/javascript"|type\s*=\s*'text\/javascript'/gi,STRING:/"(.*?)"|'(.*?)'/gi,STRING_BORDERS:/"|'/gi,DOM:/\{\{\$[\w\.\,]*?\}\}/gi,DOM_OPEN:"\\{\\{\\$",DOM_CLOSE:"\\}\\}",HOOK:/\{\{[\w\d_\.]*?\}\}/gi,
MODEL:/\{\{\:\:\w*?\}\}/gi,MODEL_BORDERS:/\{\{\:\:|\}\}/gi,MODEL_OPEN:"\\{\\{\\:\\:",MODEL_CLOSE:"\\}\\}",HOOK_OPEN:"\\{\\{",HOOK_CLOSE:"\\}\\}",HOOK_OPEN_COM:"<\\!--\\{\\{",HOOK_CLOSE_COM:"\\}\\}--\x3e",HOOK_BORDERS:/\{\{|\}\}/gi,CONDITIONS:/\x3c!--[\w_]*=.{1,}--\x3e/gi,CONDITION_CONTENT:"\x3c!--[open]--\x3e(\\n|\\r|\\s|.)*?\x3c!--[close]--\x3e",STRING_CON:/".*?"/gi,STRING_CON_STR:'".*"',STRING_CON_STRICT:'".*?"',STRING_BORDER_CON:/"/gi,CON_CLOSE_STR:"\x3c!--[name]--\x3e",OPEN_TAG:/<[\s]*[\w]{1,}/gi,
COMMENT_BORDERS:/\x3c!--|--\x3e/gi,GROUP_PROPERTY:/__\w*?__/gi,FIRST_WORD:/^\w+/gi,NOT_WORDS_NUMBERS:/[^\w\d]/gi,CONDITION_STRUCTURE:/^\w*=/gi},marks:{DOM:"DOM"},storage:{USE_LOCALSTORAGE:!0,VIRTUAL_STORAGE_GROUP:"FLEX_UI_PATTERNS_GROUP",VIRTUAL_STORAGE_ID:"FLEX_UI_PATTERNS_STORAGE",CSS_ATTACHED_JOURNAL:"FLEX_UI_PATTERNS_CSS_JOURNAL",JS_ATTACHED_JOURNAL:"JS_ATTACHED_JOURNAL",PRELOAD_TRACKER:"FLEX_UI_PATTERNS_PRELOAD_TRACKER",NODE_BINDING_DATA:"FLEX_PATTERNS_BINDINGS_DATA",CONTROLLERS_LINKS:"FLEX_PATTERNS_CONTROLLERS_LINKS",
CONTROLLERS_STORAGE:"FLEX_PATTERNS_CONTROLLERS_STORAGE",CONDITIONS_STORAGE:"FLEX_PATTERNS_CONDITIONS_STORAGE",HOOKS_STORAGE:"FLEX_PATTERNS_HOOKS_STORAGE",MAPS_STORAGE:"FLEX_PATTERNS_MAPS_STORAGE",PATTERN_SOURCES:"FLEX_PATTERNS_PATTERN_SOURCES",PATTERNS:"FLEX_PATTERNS_PATTERNS"},compatibility:{PARENT_TO_CHILD:{table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td",colgroup:"col"},CHILD_TO_PARENT:{tr:"tbody",th:"tbody",td:"tr",col:"colgroup",tbody:"table",thead:"table",tfoot:"table"},BASE:"div"},css:{classes:{HOOK_WRAPPER:"flex_patterns_hook_wrapper"},
attrs:{MODEL_DATA:"data-flex-model-data",DOM_MARK:"data-flex-dom-mark"},selectors:{HOOK_WRAPPERS:".flex_patterns_hook_wrapper"}},other:{INDEXES:"__indexes",CONDITION_ATTR:"data-flex-patterns-condition",HOOK_ATTR:"data-flex-pattern-hook-in-attr"}},m={SIGNATURE:"[flex.ui.patterns]",source:{TEMPLATE_WAS_LOADED:"0001:TEMPLATE_WAS_LOADED",FAIL_TO_LOAD_TEMPLATE:"0002:FAIL_TO_LOAD_TEMPLATE",FAIL_TO_PARSE_TEMPLATE:"0003:FAIL_TO_PARSE_TEMPLATE",FAIL_TO_LOAD_JS_RESOURCE:"0004:FAIL_TO_LOAD_JS_RESOURCE"},pattern:{CANNOT_FIND_FIRST_TAG:"1000:CANNOT_FIND_FIRST_TAG",
CANNOT_CREATE_WRAPPER:"1001:CANNOT_CREATE_WRAPPER",WRONG_PATTERN_WRAPPER:"1002:WRONG_PATTERN_WRAPPER",WRONG_HOOK_VALUE:"1003:WRONG_HOOK_VALUE",WRONG_CONDITION_DEFINITION:"1004:WRONG_CONDITION_DEFINITION",CANNOT_FIND_CONDITION_BEGINING:"1005:CANNOT_FIND_CONDITION_BEGINING",CANNOT_FIND_CONDITION_END:"1006:CANNOT_FIND_CONDITION_END",CANNOT_FIND_CONDITION_NODES:"1007:CANNOT_FIND_CONDITION_NODES",CANNOT_FIND_CONDITION_VALUE:"1008:CANNOT_FIND_CONDITION_VALUE",UNEXCEPTED_ERROR_CONDITION_PARSER:"1009:UNEXCEPTED_ERROR_CONDITION_PARSER"},
instance:{BAD_HOOK_FOR_CLONE:"2000:BAD_HOOK_FOR_CLONE",NO_URL_FOR_CLONE_HOOK:"2001:NO_URL_FOR_CLONE_HOOK"},caller:{CANNOT_INIT_PATTERN:"3000:CANNOT_INIT_PATTERN",CANNOT_GET_CHILD_PATTERN:"3001:CANNOT_GET_CHILD_PATTERN",CANNOT_GET_PATTERN:"3002:CANNOT_GET_PATTERN",PATTERN_WITHOUT_SRC:"3003:PATTERN_WITHOUT_SRC",CANNOT_FIND_ROOT_TEMPLATE:"3004:CANNOT_FIND_ROOT_TEMPLATE",ONLY_ONE_TEMPLATE_ON_SAME_LEVEL:"3005:ONLY_ONE_TEMPLATE_ON_SAME_LEVEL"},layout:{BAD_ARRAY_OF_HOOKS:"4000:BAD_ARRAY_OF_HOOKS"}},q={proto:function(a){var f=
this,d=null,k=null,x=null,v=null,Y=null,r=null,K=null,d=null,d=function(c,d){var k=null,h=null,h=null;null===a.html?(h=g.get(f.url),null!==h&&!0===t.get().USE_STORAGE_HTML?x(h,c,d):(k=b.measure(),h=flex.ajax.send(f.url,flex.ajax.methods.GET,null,{success:function(a,h){b.measure(k,"loading sources for ("+f.url+")");g.add(f.url,a);x(a,c,d)},fail:function(a,c){b.measure(k,"loading sources for ("+f.url+")");flex.logs.log(K()+m.source.FAIL_TO_LOAD_TEMPLATE,flex.logs.types.CRITICAL);r(d);throw m.source.FAIL_TO_LOAD_TEMPLATE;
}}),h.send())):flex.logs.log(K()+m.source.TEMPLATE_WAS_LOADED,flex.logs.types.NOTIFICATION);return!0},k={URLs:function(a){var b=flex.system.url.restore(f.url);null!==b&&(a=a.map(function(a){a=flex.system.url.parse(a,b);return null!==a?a.url:!1}),a=a.filter(function(a){return!1!==a?!0:!1}));return a},html:function(b){var f=e.regs,d=b.match(f.BODY);if(null!==d&&1===d.length)return a.html=d[0].replace(f.BODY_TAG,"").replace(f.BODY_CLEAR,""),a.original=b,a.html=c.tableFix(a.html),!0;a.html=null;return!1},
css:function(){var b=e.regs,f=null!==a.original?a.original.match(b.CSS):null,c=[];null!==f&&Array.prototype.forEach.call(f,function(a){var f=a.match(b.CSS_HREF);var d=a.search(b.CSS_REL);a=a.search(b.CSS_TYPE);!1!==(0<d&&0<a?!0:!1)&&null!==f&&1===f.length&&(f=f[0].match(b.STRING),null!==f&&1===f.length&&c.push(f[0].replace(b.STRING_BORDERS,"")))});a.css=k.URLs(c)},js:function(){var b=e.regs,f=null!==a.original?a.original.match(b.JS):null,c=[];null!==f&&Array.prototype.forEach.call(f,function(a){var f=
a.match(b.JS_SRC);a=0<a.search(b.JS_TYPE)?!0:!1;!1!==a&&null!==f&&1===f.length&&(f=f[0].match(b.STRING),null!==f&&1===f.length&&c.push(f[0].replace(b.STRING_BORDERS,"")))});a.js=k.URLs(c)}},x=function(a,b,f){k.html(a.original)?(k.js(),k.css(),v.css.load(function(){v.js.load(function(){r(b)},function(){r(f)})})):(flex.logs.log(K()+m.source.FAIL_TO_PARSE_TEMPLATE,flex.logs.types.NOTIFICATION),r(f))},v={css:{load:function(c){var d=flex.overhead.globaly.get(e.storage.VIRTUAL_STORAGE_GROUP,e.storage.CSS_ATTACHED_JOURNAL,
{}),k=flex.unique();null!==a.css&&0<a.css.length?(flex.overhead.register.open(k,a.css,c),Array.prototype.forEach.call(a.css,function(a){var c=null,h=null;d[a]?flex.overhead.register.done(k,a):(d[a]=!0,c=g.get(a),null===c||!1===t.get().USE_STORAGE_CSS?(h=b.measure(),flex.resources.attach.css.connect(a,function(a){var c=flex.resources.parse.css.stringify(a);null!==c&&g.add(a,c);null!==k&&flex.overhead.register.done(k,a);b.measure(h,"loading resources for ("+f.url+"):: "+a)})):(flex.resources.attach.css.adoption(c,
null,a),flex.overhead.register.done(k,a),g.add(a,c)))})):r(c)}},js:{load:function(c,d){var k=flex.overhead.globaly.get(e.storage.VIRTUAL_STORAGE_GROUP,e.storage.JS_ATTACHED_JOURNAL,{}),x=flex.unique();null!==a.js&&0<a.js.length?(flex.overhead.register.open(x,a.js,c),Array.prototype.forEach.call(a.js,function(a){var c=null,e=null;void 0===k[a]?(h.references.assign(a,f.url),k[a]=!0,c=g.get(a),null===c||!1===t.get().USE_STORAGE_JS?(e=b.measure(),flex.resources.attach.js.connect(a,function(){flex.overhead.register.done(x,
a);flex.ajax.send(a,flex.ajax.methods.GET,null,{success:function(b,f){g.add(a,b.original)}}).send();b.measure(e,"loading resources for ("+f.url+"):: "+a)},function(){flex.logs.log(K()+m.source.FAIL_TO_LOAD_JS_RESOURCE,flex.logs.types.CRITICAL);b.measure(e,"loading resources for ("+f.url+"):: "+a);r(d);throw m.source.FAIL_TO_LOAD_JS_RESOURCE;})):(h.current.set(a),flex.resources.attach.js.adoption(c,function(){flex.overhead.register.done(x,a);h.current.reset(a)}),g.add(a,c))):flex.overhead.register.done(x,
a)})):r(c)}}},r=function(b){"function"===typeof b&&b.call(a.__instance,f.url,f.original_url,a.__instance)},Y={html:function(){return a.html}},K=function(){return m.SIGNATURE+":: pattern ("+f.url+")"},d={load:d,html:Y.html};return{load:d.load,html:d.html}},instance:function(a){return!1!==flex.oop.objects.validate(a,[{name:"url",type:"string"},{name:"html",type:"string",value:null},{name:"css",type:"array",value:null},{name:"js",type:"array",value:null}])?_object({parent:e.classes.SOURCE,constr:function(){this.url=
flex.system.url.restore(a.url);this.original_url=a.url},privates:{original:null,html:a.html,css:a.css,js:a.js},prototype:q.proto}).createInstanceClass():null},storage:{add:function(a,b){var c=flex.overhead.globaly.get(e.storage.VIRTUAL_STORAGE_GROUP,e.storage.PATTERN_SOURCES,{});void 0===c[a]&&(c[a]=b)},get:function(a){var b=flex.overhead.globaly.get(e.storage.VIRTUAL_STORAGE_GROUP,e.storage.PATTERN_SOURCES,{});return void 0!==b[a]?b[a]:null}},init:function(a,b,c){a=a instanceof Array?a:[a];flex.overhead.globaly.get(e.storage.VIRTUAL_STORAGE_GROUP,
e.storage.PRELOAD_TRACKER,{});var d=flex.unique(),k=[],g=!1;flex.overhead.register.open(d,a,function(){"function"!==typeof b||g?flex.system.handle(c):b(k)});a.forEach(function(a){var b=q.storage.get(a);null!==b?(k.push(b),flex.overhead.register.done(d,a)):(b=q.instance({url:a}),b.load(function(a,b,c){k.push(c);q.storage.add(b,c);p.init(a,c.html());flex.overhead.register.done(d,b)},function(a,b,c){g=!0;flex.overhead.register.done(d,b)}))})}},p={proto:function(a){var b=this,d=null,k=null,g=null,h=g=
null,d={hooks:{setupAttrs:function(){function b(a){a.attributes&&Array.prototype.forEach.call(a.attributes,function(b){var f=null,d={};"string"===typeof b.value&&""!==b.value&&c.testReg(e.regs.HOOK,b.value)&&(f=b.value.match(e.regs.HOOK),f=f.map(function(a){return a.replace(e.regs.HOOK_BORDERS,"")}),a.hasAttribute(e.other.HOOK_ATTR)?(d=JSON.parse(a.getAttribute(e.other.HOOK_ATTR)),d[b.name]=void 0===d[b.name]?[]:d[b.name],d[b.name]=d[b.name].concat(f)):d[b.name]=f,a.setAttribute(e.other.HOOK_ATTR,
JSON.stringify(d)))});a.childNodes&&Array.prototype.forEach.call(a.childNodes,function(a){b(a)})}b(a.pattern)},getFromHTML:function(){var b=a.html.match(e.regs.HOOK);return b instanceof Array?(b=function(a){var b={};return a.filter(function(a){return void 0===b[a]?b[a]=!0:!1})}(b),b=b.map(function(a){return a.replace(new RegExp(e.regs.HOOK_OPEN,"gi"),"").replace(new RegExp(e.regs.HOOK_CLOSE,"gi"),"")})):[]},wrap:function(a){function b(a){var c=a.nodeValue,f=c.match(e.regs.HOOK),d=null,k=void 0!==
e.compatibility.PARENT_TO_CHILD[a.parentNode.nodeName.toLowerCase()]?e.compatibility.PARENT_TO_CHILD[a.parentNode.nodeName.toLowerCase()]:e.compatibility.BASE;if(f instanceof Array){f.forEach(function(a){var b=a.replace(e.regs.HOOK_BORDERS,"");c=c.replace(new RegExp(e.regs.HOOK_OPEN+b+e.regs.HOOK_CLOSE,"gi"),"<"+k+' id="'+b+'" class="'+e.css.classes.HOOK_WRAPPER+'">\x3c!--'+a+"--\x3e</"+k+">")});d=document.createElement(a.parentNode.nodeName);d.innerHTML=c;for(var f=0,g=d.childNodes.length;f<g;f+=
1)a.parentNode.insertBefore(d.childNodes[0],a);a.parentNode.removeChild(a)}}void 0!==a.childNodes&&0<a.childNodes.length&&Array.prototype.forEach.call(Array.prototype.filter.call(a.childNodes,function(){return!0}),function(a){"string"===typeof a.innerHTML?c.testReg(e.regs.HOOK,a.innerHTML)&&d.hooks.wrap(a):"string"===typeof a.nodeValue&&c.testReg(e.regs.HOOK,a.nodeValue)&&b(a)});return!0},setters:{getAllInNodes:function(a){return _nodes('*[class="'+e.css.classes.HOOK_WRAPPER+'"]',!1,a).target},getAllInAttrs:function(a){return _nodes("*["+
e.other.HOOK_ATTR+"]",!1,a).target},inNodes:function(a,b,f){null!==a&&Array.prototype.forEach.call(a,function(a){var b;1===a.childNodes.length&&"string"===typeof a.childNodes[0].nodeValue&&c.testReg(e.regs.HOOK,a.childNodes[0].nodeValue)&&(b=a.childNodes[0].nodeValue.replace(e.regs.HOOK_BORDERS,""),void 0===f[b]&&(f[b]=[]),f[b].push(d.hooks.setters.nodeSetter(a)))})},inAttributes:function(a,b,f){null!==a&&Array.prototype.forEach.call(a,function(a){var b=JSON.parse(a.getAttribute(e.other.HOOK_ATTR));
_object(b).forEach(function(b,c){var k=a.getAttribute(b);c.forEach(function(c){var g=k.replace(new RegExp(e.regs.HOOK_OPEN+c+e.regs.HOOK_CLOSE,"gi"),"{{"+c+"_attr}}");a.setAttribute(b,g);void 0===f[c]&&(f[c]=[]);f[c].push(d.hooks.setters.attrSetter(new RegExp(e.regs.HOOK_OPEN+c+"_attr"+e.regs.HOOK_CLOSE,"gi"),a,b,g))})})})},attrSetter:function(a,b,c,f){return function(d){b.setAttribute(c,f.replace(a,d))}},nodeSetter:function(a){function b(a,c){var f=null,d=null;a.innerHTML!==c&&(d=k.getFirstTagFromHTML(c.replace(e.regs.BODY_CLEAR,
"")),void 0!==e.compatibility.CHILD_TO_PARENT[d]&&e.compatibility.CHILD_TO_PARENT[d]!==a.nodeName.toLowerCase()&&(f=document.createElement(e.compatibility.CHILD_TO_PARENT[d]),void 0!==a.attributes&&null!==a.attributes&&void 0!==a.attributes.length&&Array.prototype.forEach.call(a.attributes,function(a){f.setAttribute(a.nodeName,a.value)}),f.innerHTML=c,a.parentNode.insertBefore(f,a),a.parentNode.removeChild(a),a=f));return a}return function(c){if("string"===typeof c.innerHTML)return a.parentNode.insertBefore(c,
a),a.parentNode.removeChild(a),!0;if(c instanceof e.classes.RESULT)return c.nodes().forEach(function(b){a.parentNode.insertBefore(b,a)}),a.parentNode.removeChild(a),!0;if(void 0!==c.toString||"string"===typeof c){a.innerHTML="string"===typeof c?c:c.toString();a=b(a,c);for(c=a.childNodes.length-1;0<=c;--c)a.parentNode.insertBefore(a.childNodes[0],a);a.parentNode.removeChild(a);return!0}}}},process:function(){a.hooks_html=d.hooks.getFromHTML();d.hooks.setupAttrs();d.hooks.wrap(a.pattern)}},model:{getFromHTML:function(){var b=
a.html.match(e.regs.MODEL);return b instanceof Array?(b=function(a){var b={};return a.filter(function(a){return void 0===b[a]?b[a]=!0:!1})}(b),b=b.map(function(a){return a.replace(e.regs.MODEL_BORDERS,"")})):null},setAttrData:function(a,b){var c=a.getAttribute(e.css.attrs.MODEL_DATA),c="string"===typeof c?""!==c?JSON.parse(c):[]:[];c.push(b);a.setAttribute(e.css.attrs.MODEL_DATA,JSON.stringify(c))},find:{inStyles:function(a,b){b.split(";").forEach(function(b){var c=b.split(":");b.match(e.regs.MODEL);
1<c.length&&void 0!==a.style[c[0]]&&(b=b.match(e.regs.MODEL),b instanceof Array&&1===b.length&&(b=b[0].replace(e.regs.MODEL_BORDERS,""),d.model.setAttrData(a,{style:c[0],model:b})))})},inAttrs:function(a,b,f){f=f instanceof RegExp?f:new RegExp(e.regs.MODEL_OPEN+b+e.regs.MODEL_CLOSE,"gi");a.attributes&&Array.prototype.forEach.call(a.attributes,function(k){if("string"===typeof k.value&&""!==k.value&&c.testReg(f,k.value)&&("style"===k.nodeName?d.model.find.inStyles(a,k.value):d.model.setAttrData(a,{attr:k.nodeName,
model:b}),a.removeAttribute(k.nodeName),void 0!==a[k.nodeName])){try{a[k.nodeName]=null}catch(g){}k="default"+k.nodeName[0].toUpperCase()+k.nodeName.substr(1,k.nodeName.length-1);if(void 0!==a[k])try{a[k]=""}catch(g){}}});a.childNodes&&Array.prototype.forEach.call(a.childNodes,function(a){d.model.find.inAttrs(a,b,f)})},inHTML:function(a,b,f){f=f instanceof RegExp?f:new RegExp(e.regs.MODEL_OPEN+b+e.regs.MODEL_CLOSE,"gi");void 0!==a.childNodes&&0<a.childNodes.length&&Array.prototype.forEach.call(a.childNodes,
function(k,g){"string"===typeof k.innerHTML?c.testReg(f,k.innerHTML)&&d.model.find.inHTML(k,b,f):"string"===typeof k.nodeValue&&c.testReg(f,k.nodeValue)&&(k.nodeValue=flex.unique(),d.model.setAttrData(a,{model:b,text:k.nodeValue,index:g}))})}},process:function(){var b=d.model.getFromHTML();null!==b&&b.forEach(function(b){d.model.find.inAttrs(a.pattern,b);d.model.find.inHTML(a.pattern,b,null)})}},conditions:{setupAttrs:function(){var b=a.html.match(e.regs.CONDITIONS),c=[],f=a.html,d=null,k=null;return b instanceof
Array?(b=b.map(function(a){a=a.replace(e.regs.COMMENT_BORDERS,"");var b=a.split("=")[0];-1===c.indexOf(b)&&c.push(b);return{value:a,name:b,content:"",corrected:""}}),b.forEach(function(a){var b=f.match(new RegExp(e.regs.CONDITION_CONTENT.replace("[open]",a.value).replace("[close]",a.name),"gi"));b instanceof Array&&(a.content=b,a.corrected=b,b.forEach(function(b,c){var d=b.match(e.regs.OPEN_TAG);d instanceof Array&&(d=function(a){var b={};return a.filter(function(a){return void 0===b[a]?b[a]=!0:!1})}(d),
d.forEach(function(b){a.corrected[c]=a.corrected[c].replace(new RegExp(b,"gi"),b+" "+e.other.CONDITION_ATTR+'="'+a.value+'"')}),f=f.replace(b,a.corrected[c]))}))}),d=f.match(new RegExp(e.other.CONDITION_ATTR+"="+e.regs.STRING_CON_STR,"gi")),d instanceof Array&&(k=new RegExp(e.other.CONDITION_ATTR+"="+e.regs.STRING_CON_STRICT,"gi"),d.forEach(function(a){a=a.match(k).join(" ");var b=a.match(e.regs.STRING_CON),c="";b instanceof Array&&1<b.length&&(b.forEach(function(a,f){c+=a.replace(e.regs.STRING_BORDER_CON,
"")+(f<b.length-1?",":"")}),f=f.replace(a,e.other.CONDITION_ATTR+'="'+c+'"'))})),f=f.replace(e.regs.CONDITIONS,""),c.forEach(function(a){f=f.replace(new RegExp(e.regs.CON_CLOSE_STR.replace("[name]",a),"gi"),"")}),a.html=f,b):[]},find:function(a){var b={};(function(a,b){var c=_nodes("*["+e.other.CONDITION_ATTR+"]",!1,a);null!==c.target&&Array.prototype.forEach.call(c.target,function(a){var c=a.getAttribute(e.other.CONDITION_ATTR).split(",");c.forEach(function(f,d){var k=f.split("="),g=k[0],h=k[1],
m=-1,k=null;void 0===b[g]&&(b[g]=[]);b[g].forEach(function(a,b){a.value===h&&(m=b)});-1===m&&(b[g].push({value:h,first:a,last:null,nodes:[],included:[]}),m=b[g].length-1);b[g][m].nodes.push(a);0<d&&(k=c[d-1].split("=")[0],-1===b[g][m].included.indexOf(k)&&b[g][m].included.push(k))})})})(a,b);(function(a){function b(a){var c=document.createTextNode("");a.parentNode.insertBefore(c,a);return function(a){c.parentNode.insertBefore(a,c)}}_object(a).forEach(function(c,f){f instanceof Array&&f.forEach(function(f,
d){a[c][d].append=b(f.first)})})})(b);return b},process:function(a,b){var c=d.conditions.find(a),f={};_object(b).forEach(function(a,b){var d=!1;void 0!==c[a]?(f[a]={},c[a].forEach(function(c){f[a][c.value]=void 0===f[a][c.value]?[]:f[a][c.value];f[a][c.value]=function(a,b,c){c={append:function(){var c=[];b.forEach(function(b,f){void 0===b.__to_deleted?a(b):c.push(f)});0<c.length&&(b=b.filter(function(a,b){return-1!==c.indexOf(b)?!1:!0}))},remove:function(){var a=[];b.forEach(function(b,c){if(null!==
b.parentNode)return b.parentNode.removeChild(b);void 0!==b.__to_deleted&&a.push(c)});0<a.length&&(b=b.filter(function(b,c){return-1!==a.indexOf(c)?!1:!0}))},del:function(){b.forEach(function(a){a.__to_deleted=!0})},included:c};c.append.blocked=!1;c.remove.blocked=!1;return c}(c.append,c.nodes,c.included);c.nodes.forEach(function(a){c.value!==b?null!==a.parentNode&&a.parentNode.removeChild(a):d=!0})}),f[a].__update=function(a){return function(b){_object(a).forEach(function(a,c){void 0!==c.append&&
void 0!==c.remove&&(c.append.blocked||c.remove.blocked||(b===a?c.append():c.remove()))})}}(f[a]),f[a].__block=function(a){return function(b){_object(a).forEach(function(a,b){void 0!==b.append&&void 0!==b.remove&&(b.append.blocked=!0,b.remove.blocked=!0)})}}(f[a]),f[a].__unblock=function(a){return function(b){_object(a).forEach(function(a,b){void 0!==b.append&&void 0!==b.remove&&(b.append.blocked=!1,b.remove.blocked=!1)})}}(f[a]),f[a].__included=function(a){var b=[];_object(a).forEach(function(a,c){void 0!==
c.included&&(b=b.concat(c.included))});return b}(f[a]),d||flex.logs.log(h()+m.pattern.CANNOT_FIND_CONDITION_VALUE+" (condition name: "+a+' = "'+b+'")',flex.logs.types.NOTIFICATION)):flex.logs.log(h()+m.pattern.CANNOT_FIND_CONDITION_NODES+" (condition name: "+a+")",flex.logs.types.WARNING)});return 0<Object.keys(f).length?f:null}},marks:{getFromHTML:function(b){var c=null,f=[];void 0!==e.regs[b]&&(c=a.html.match(e.regs[b]),c instanceof Array&&(c=function(a){var b={};return a.filter(function(a){return void 0===
b[a]?b[a]=!0:!1})}(c),c.forEach(function(c,d){var k=c.replace(new RegExp(e.regs[b+"_OPEN"],"gi"),"").replace(new RegExp(e.regs[b+"_CLOSE"],"gi"),"");a.html=a.html.replace(new RegExp(e.regs[b+"_OPEN"]+k.replace(/\./gi,"\\.")+e.regs[b+"_CLOSE"],"gi")," "+e.css.attrs[b+"_MARK"]+'="'+k+'" ');k=k.split(",");k.forEach(function(a){a=a.replace(/\s/gi);-1===f.indexOf(a)&&f.push(a)})})));return f},getFromDOM:function(b,c){var f={};a[c.toLowerCase()]instanceof Array&&(a[c.toLowerCase()].forEach(function(a){f[a]=
_nodes("*["+e.css.attrs[c+"_MARK"]+'*="'+a+'"]',!1,b);null!==f[a].target&&0<f[a].target.length&&(f[a]=f[a].target)}),_object(f).forEach(function(a,b){if(null!==f[a]){switch(c){case e.marks.DOM:f[a]=b}Array.prototype.forEach.call(b,function(a,b){a.removeAttribute(e.css.attrs[c+"_MARK"])})}}));return f},process:function(){[e.marks.DOM].forEach(function(b){a[b.toLowerCase()]=d.marks.getFromHTML(b)})}},process:function(){a.pattern=k.getParent(k.getFirstTagFromHTML(a.html));if(null!==a.pattern)return d.marks.process(),
d.conditions.setupAttrs(),a.pattern.innerHTML=a.html,d.hooks.process(),d.model.process(),!0;flex.logs.log(h()+m.pattern.CANNOT_CREATE_WRAPPER,flex.logs.types.CRITICAL);throw m.pattern.CANNOT_CREATE_WRAPPER;}},k={getParent:function(a){return"string"===typeof a?void 0!==e.compatibility.CHILD_TO_PARENT[a]?document.createElement(e.compatibility.CHILD_TO_PARENT[a]):document.createElement(e.compatibility.BASE):null},getFirstTagFromHTML:function(a){a=a.match(e.regs.FIRST_TAG);if(null!==a&&1===a.length)return a[0].replace(e.regs.TAG_BORDERS,
"").match(e.regs.FIRST_WORD)[0].toLowerCase();flex.logs.log(h()+m.pattern.CANNOT_FIND_FIRST_TAG+"(Probably hook has symbol of caret inside (\\n, \\r))",flex.logs.types.NOTIFICATION);return null}},g=function(b){var c={},f=a.pattern.cloneNode(!0),k=d.hooks.setters.getAllInNodes(f),g=d.hooks.setters.getAllInAttrs(f),h={};d.hooks.setters.inAttributes(g,a.hooks_html,h);d.hooks.setters.inNodes(k,a.hooks_html,h);_object(h).forEach(function(a,b){c[a]=function(a){return function(b){a.forEach(function(a){a(b)})}}(b)});
return{clone:f,setters:c,dom:d.marks.getFromDOM(f,e.marks.DOM),applyConditions:function(){var a=null;void 0!==b&&null!==b&&(a=d.conditions.process(f,b));return a}}},h=function(){return m.SIGNATURE+":: pattern ("+b.url+")"},g={build:d.process,clone:g};return{build:g.build,pattern:g.clone}},instance:function(a){return!1!==flex.oop.objects.validate(a,[{name:"url",type:"string"},{name:"html",type:"string"}])?_object({parent:e.classes.PATTERN,constr:function(){this.url=flex.system.url.restore(a.url)},
privates:{html:a.html,pattern:null,hooks_html:null,dom:null},prototype:p.proto}).createInstanceClass():null},storage:{add:function(a,b){var c=flex.overhead.globaly.get(e.storage.VIRTUAL_STORAGE_GROUP,e.storage.PATTERNS,{});void 0===c[a]&&(c[a]=b)},get:function(a){var b=flex.overhead.globaly.get(e.storage.VIRTUAL_STORAGE_GROUP,e.storage.PATTERNS,{});return void 0!==b[a]?b[a]:null}},init:function(a,b){var c=p.storage.get(a);if(null!==c)return c;c=p.instance({url:a,html:b});return!1!==c.build()?(n.init(a,
c.pattern),p.storage.add(a,c),c):null}},n={proto:function(a){var b=this,g=null,v=null,x=null,r=null,C=null,G=null,p=null,q=null,E=null,t=flex.libraries.types.array.ExArray,p={update:function(a,b,c,f){a=a instanceof Array?void 0!==a[0]?a[0]:{}:a;var d=void 0!==c?null!==c?c:{}:{};f=void 0!==f?null!==f?f:null:null;_object(a).forEach(function(a,b){void 0===d[a]?b instanceof e.classes.RESULT?(d["__"+a+"__"]=b.url,d[a]=b.hooks_map()):"object"===typeof b&&null!==b?(d[a]={},d[a]=p.update(b,d[a].__conditions__,
d[a],null!==f?void 0!==f[a]?f[a].hooks:null:null)):null!==b&&(d[a]=!0):b instanceof e.classes.RESULT||"object"!==typeof b||(d[a]=p.update(b,d[a].__conditions__,d[a],null!==f?void 0!==f[a]?f[a].hooks:null:null))});d.__conditions__=void 0!==b?b:null;null!==f&&_object(f).forEach(function(a,b){void 0===d["__"+a+"__"]&&"object"===typeof b&&void 0!==b.url?(d["__"+a+"__"]=b.url,void 0!==b.hooks&&(d[a]=p.update(d[a],null,null,b.hooks))):void 0!==d["__"+a+"__"]&&"object"===typeof b&&void 0!==b.url&&void 0!==
b.hooks&&(d[a]=p.update(d[a],null,null,b.hooks))});return d},convertHooks:function(a,c){var k=[];c=c instanceof Array?c:[c];var g=p.update(c,a.__conditions__,a);c.forEach(function(a){var c={};_object(a).forEach(function(a,k){if(void 0!==g[a])"boolean"===typeof g[a]&&!0===g[a]?c[a]=k:"object"===typeof g[a]&&void 0!==g["__"+a+"__"]&&"object"===typeof k&&null!==k?c[a]=d.instance({url:g["__"+a+"__"],conditions:g[a].__conditions__,hooks:p.convertHooks(g[a],k)}):flex.logs.log(m.instance.NO_URL_FOR_CLONE_HOOK+
"("+b.url+")",flex.logs.types.WARNING);else throw flex.logs.log(m.instance.BAD_HOOK_FOR_CLONE+"("+b.url+")",flex.logs.types.CRITICAL),m.instance.BAD_HOOK_FOR_CLONE;});k.push(c)});return k},clone:function(a,c,k){a=p.convertHooks(a,c);if(0<a.length)return k=d.instance({url:b.url,hooks:a,callbacks:{success:"function"===typeof k?k:null}}).render(!0),k instanceof e.classes.RESULT?k.nodeList():null}},v={build:function(a){a instanceof Array?a.forEach(function(b,c){a[c]=v.build(a[c])}):null!==a&&_object(a).forEach(function(b,
c){"function"===typeof c?a[b]=c():"object"===typeof c&&null!==c&&(v.convertObj(c,a,b),delete a[b])});return a},apply:function(a,b,c,f){null!==a&&_object(b).forEach(function(b,d){var k=void 0!==f[b]?void 0!==f[b].hooks?f[b].hooks:null:null;void 0!==a[b]?(a[b]instanceof e.classes.RESULT&&(g.current["__"+b+"__"]=a[b].map().original,x.current.model["__"+b+"__"]=a[b].model(),x.current.binds["__"+b+"__"]=a[b].binds(),r.current["__"+b+"__"]=a[b].dom().original,c[b]=a[b].hooks_map(),null!==k&&(k=p.update(null,
null,c[b],k),a[b].hooks_map(k))),d(a[b])):d("")})},convertObj:function(a,b,c){_object(a).forEach(function(a,f){var d=c+"."+a;"object"===typeof f&&null!==f?v.convertObj(f,b,d):b[d]=f})}},g={current:{},map:{},update:function(a){var b={__context:0<a.childNodes.length?a.childNodes[0]:null};"object"===typeof g.current&&null!==g.current&&_object(g.current).forEach(function(a,c){b[a]=c});g.map.push(b)},reset:function(){g.map=[]},iteration:function(){g.current={}},collapse:function(a){function b(a){var c=
null;a instanceof Array?(c=[],a.forEach(function(a){c.push(b(a))})):(c={},void 0!==a.__context&&(c.__context=n.map.create(a.__context.parentNode)),_object(a).forEach(function(a,f){"__context"!==a&&("object"===typeof f||f instanceof Array)&&(c[a]=b(f))}));return c}return{map:b(a),original:a,update:function(){this.map=g.collapse(this.original).map}}}},x={current:null,model:null,binds:null,map:function(a,b){var f=_nodes("*["+e.css.attrs.MODEL_DATA+"]",!1,a).target;0<f.length&&Array.prototype.forEach.call(f,
function(a){var f=JSON.parse(a.getAttribute(e.css.attrs.MODEL_DATA));f instanceof Array&&f.forEach(function(f){var d;void 0===x.current.binds[f.model]&&(x.current.binds[f.model]=[]);void 0!==f.text?(d=c.getTextNode(a,f.text,f.index),null!==d&&(d.nodeValue=void 0!==b[f.model]?b[f.model]:"",x.current.binds[f.model].push({node:d,attr:null,prop:"nodeValue",style:null}))):x.current.binds[f.model].push({node:a,attr:void 0===f.attr?null:f.attr,prop:void 0===f.prop?null:f.prop,style:void 0===f.style?null:
f.style})})});_object(b).forEach(function(a,b){void 0===x.current.binds[a]&&(x.current.binds[a]=b)});return x.current.binds},update:function(a,b){x.map(a,b);(function(a,b){function f(a){var b="";a.split("-").forEach(function(a,c){0<c&&(a=String.prototype.toUpperCase.apply(a.charAt(0))+a.substr(1,a.length-1));b+=a});return b}function d(a,b,c,f){var k=c+f;a instanceof Array&&a.forEach(function(a){a.state_code!==k&&(a.state_code=k,a.call(b,c,f))})}function k(a,b,g,h,m){null!==b.attr&&function(a,b,c,
f,k){_node(c).bindingAttrs().bind(f,function(c,f,g){a[b]!==f&&(a[b]=f,d(k,this,c,f))})}(g,a,b.node,b.attr,h);null!==b.style&&function(a,b,c,f,k){_node(c).bindingProps().bind("style."+f,function(c,f,g){a[b]!==f&&(a[b]=f,d(k,this,c,f))})}(g,a,b.node,f(b.style),h);c.binds.isPossible(b.node,m)?function(a,b,f,k,g){c.binds.assing(f,m,function(c,f,h){c=f();a[b]!==c&&(a[b]=c,d(g,this,k,c))})}(g,a,b.node,b.attr,h):null!==b.prop&&function(a,b,c,f,k){_node(c).bindingProps().bind(f,function(c,f,g){a[b]!==f&&
(a[b]=f,d(k,this,c,f))})}(g,a,b.node,b.prop,h)}function g(a,b,c,k,h){null!==b.attr&&function(a,b,c,f,k){a[b]=c.getAttribute(f);_object(a).binding().bind(b,function(a,b){var g=!1;c.getAttribute(f)!==a&&(c.setAttribute(f,a),g=!0);void 0!==c[f]&&c[f]!==a&&(c[f]=a,g=!0);g&&d(k,c,f,a)})}(c,a,b.node,b.attr,k);null!==b.style&&function(a,b,c,f,k){a[b]=c.style[f];_object(a).binding().bind(b,function(a,b){c.style[f]!==a&&(c.style[f]=a,d(k,c.style,f,a))})}(c,a,b.node,f(b.style),k);null!==b.prop&&void 0!==b.node[h]&&
function(a,b,c,f,k){a[b]=c[f];_object(a).binding().bind(b,function(a,b){c[f]!==a&&(c[f]=a,d(k,c,f,a))})}(c,a,b.node,h,k)}null!==a&&_object(a).forEach(function(f,h){var m=[];c.testReg(e.regs.GROUP_PROPERTY,f)||(b[f]=null,h instanceof Array?h.forEach(function(a){var c=null!==a.prop?a.prop:a.attr;a.node[e.storage.NODE_BINDING_DATA]={outcome_call:!1};k(f,a,b,m,c);g(f,a,b,m,c)}):function(a,b,c,f){a[b]=c;_object(a).binding().bind(b,function(a,b){d(f,null,null,a)})}(b,f,h,m),a[f]={addHandle:function(a){a.state_code=
null;a.id=flex.unique();this.handles.push(a);return a.id},removeHandle:function(a){var b=-1;this.handles.forEach(function(c,f){c.id===a&&(b=f)});-1!==b&&this.handles.splice(b,1)},handles:m},a[f].addHandle.bind(a[f]),a[f].removeHandle.bind(a[f]))})})(x.current.binds,x.current.model);x.model.push(x.current.model);x.binds.push(x.current.binds)},clear:function(a){a=_nodes("*["+e.css.attrs.MODEL_DATA+"]",!1,a).target;0<a.length&&Array.prototype.forEach.call(a,function(a){a.removeAttribute(e.css.attrs.MODEL_DATA)})},
reset:function(){x.model=[];x.binds=[]},iteration:function(){x.current={model:{},binds:{}}},getLast:function(){return{model:x.model instanceof Array?x.model[x.model.length-1]:x.model,binds:x.binds instanceof Array?x.binds[x.binds.length-1]:x.binds}},getDefaults:function(a,b){var c={};_object(a).forEach(function(a,f){void 0===b[a]&&(c[a]=f)});return c},changes:{attach:function(a,b,c){a.model()instanceof Array&&(a.model(new t(a.model())),function(a,b,c){a.model().bind("add",function(f){var d=null,k=
this,g=null,d=p.clone(a.hooks_map(),f.item,function(b,c){k[f.index]=c.model;a.binds().splice(f.index,0,c.binds);a.dom().original instanceof Array&&a.dom().original.splice(f.index,0,c.dom.original[0]);a.map().original instanceof Array&&a.map().original.splice(f.index,0,c.map.original[0]);return!1});b.splice(f.index,0,d.getAsArray());1<b.length?f.index<b.length-1?(g=b[f.index+1][0],null!==g.parentNode&&d.insertBefore(g)):(g=b[0][0],null!==g.parentNode&&d.append(g.parentNode)):d.insertBefore(c)});a.model().bind("remove",
function(c){void 0!==b[c.index]&&b[c.index]instanceof Array&&b[c.index].forEach(function(a){a.parentNode.removeChild(a)});b.splice(c.index,1);a.binds().splice(c.index,1);a.dom().original instanceof Array&&a.dom().original.splice(c.index,1);a.map().original instanceof Array&&a.map().original.splice(c.index,1)})}(a,b,c))}}},r={current:null,dom:null,update:function(a){0<Object.keys(r.current).length&&_object(r.current).forEach(function(b,c){a[b]=c});r.dom.push(a)},reset:function(){r.dom=[]},iteration:function(){r.current=
{}},collapse:function(a){function b(a,c,f){function k(a,b){function c(a,b){Array.prototype.forEach.call(a,function(c,f){var k=1<a.length?b.concat([f]):b;void 0!==c[e.other.INDEXES]&&-1===d.indexOf(c)&&(d.push(c),delete c[e.other.INDEXES]);if(void 0===c[e.other.INDEXES]||c[e.other.INDEXES].length<k.length)c[e.other.INDEXES]=1<a.length?b.concat([f]):b})}a instanceof NodeList?c(a,b):a instanceof n.nodeList.NODE_LIST&&a.collections.forEach(function(a){c(a,b)})}function g(a,b,c){var f=[],d=[];if(0<a.length&&
"object"===typeof a[0]&&null!==a[0])return _object(a[0]).forEach(function(a){f.push(a)}),f.forEach(function(f){b[f]=[];a.forEach(function(a,h){a[f]instanceof NodeList||a[f]instanceof n.nodeList.NODE_LIST?(b[f].push(a[f]),k(a[f],c.concat([h]))):a[f]instanceof Array?(b[f].push({}),g(a[f],b[f][b[f].length-1],c.concat([h])),-1===d.indexOf(f)&&d.push(f)):"object"!==typeof a[f]||null===a[f]||a[f]instanceof n.nodeList.NODE_LIST||(b[f].push(a[f]),-1===d.indexOf(f)&&d.push(f))})}),d.forEach(function(a){var f=
b[a];b[a]={};g(f,b[a],c)}),_object(b).forEach(function(a,c){var f=n.nodeList.create();c instanceof Array&&(c.forEach(function(a){f.add(a)}),b[a]=f)}),b[name]}_object(a).forEach(function(a,d){d instanceof Array?(c[a]={},g(d,c[a],f)):d instanceof NodeList?(k(d,f),c[a]=n.nodeList.create(d)):"object"===typeof d&&(c[a]={},b(d,c[a],f))})}function c(a){var b=null;a instanceof Array?(b=[],a.forEach(function(a){b.push(c(a))})):a instanceof NodeList?b=n.nodeList.create(a):"object"!==typeof a||null===a||a instanceof
n.nodeList.NODE_LIST||(b={},_object(a).forEach(function(a,f){b[a]=c(f)}));return b}var f=[],d=[];null!==a&&b(a,f,[]);return{listed:c(a),grouped:f,original:a,update:function(){var b=r.collapse(a);this.grouped=b.grouped;this.listed=b.listed}}}},q={get:function(a,b){var c={};null!==b&&_object(b).forEach(function(b,f){c[b]=f(a)});return 0<Object.keys(c).length?c:null},setDefault:function(a){var c=k.storage.get(b.url);if("object"===typeof c&&null!==c){if("object"!==typeof a||null===a)a={};_object(c).forEach(function(b,
c){void 0===a[b]&&(a[b]=c)});a=0<Object.keys(a).length?a:null}return a},tracking:function(a,b,c){var f=[];"object"===typeof a&&null!==a&&(_object(a).forEach(function(d,k){if("function"===typeof k)if(void 0!==k.tracking&&void 0!==b[d])k.tracking=k.tracking instanceof Array?k.tracking:[k.tracking],k.tracking.forEach(function(k){var g={},h=x.getLast(),m=null;void 0!==h.binds[k]&&"function"===typeof h.binds[k].addHandle&&(_object(c).forEach(function(a,b){g[a]=void 0!==h.model[a]?function(){return h.model[a]}:
b}),m=function(a,b,c,f){return function(){var d={},k=null;_object(c).forEach(function(a,b){d[a]="function"===typeof b?b():b});k=a[b](d);0<f[b].__included.length&&f[b].__included.forEach(function(b){"function"===typeof a[b]&&void 0!==f[b]&&void 0!==a[b].tracking&&f[b].__unblock()});f[b].__update(k);void 0!==f[b][k]&&0<f[b][k].included.length&&f[b][k].included.forEach(function(b){var c;"function"===typeof a[b]&&void 0!==f[b]&&void 0!==a[b].tracking&&(c=a[b](d),f[b].__update(c))});0<f[b].__included.length&&
f[b].__included.forEach(function(b){"function"===typeof a[b]&&void 0!==f[b]&&void 0!==a[b].tracking&&f[b].__block()})}}(a,d,g,b),h.binds[k].addHandle(m),f.push(m))});else{var g=k(c);void 0!==b[d]&&_object(b[d]).forEach(function(a,c){a!==g&&void 0!==c.del&&(c.del(),b[d][a]=null,delete b[d][a])})}}),f.forEach(function(a){a()}))}},G={apply:function(a,c,d){d=h.storage.get(null!==d?[d,b.url]:b.url);null!==d&&d.forEach(function(b){C.handle(b,a,c)})}},C={build:function(c){var d=null,k=null,h=null,m=document.createTextNode(""),
e=[m],n=[];null!==c.hooks&&(g.reset(),x.reset(),r.reset(),c.conditions=q.setDefault(c.conditions),c.hooks=v.build(c.hooks),k=p.update(c.hooks,c.conditions,null,c.map),c.hooks=c.hooks instanceof Array?c.hooks:[c.hooks],c.hooks.forEach(function(b){var f=null;d=a.pattern(q.get(b,c.conditions),c.conditions);g.iteration();x.iteration();r.iteration();v.apply(b,d.setters,k,c.map);g.update(d.clone);x.update(d.clone,x.getDefaults(b,d.setters));x.clear(d.clone);r.update(d.dom);f=d.applyConditions();n.push(Array.prototype.filter.call(d.clone.childNodes,
function(){return!0}));n[n.length-1].push(document.createTextNode(""));e=e.concat(n[n.length-1]);q.tracking(c.conditions,f,b)}));h=l.instance({url:b.url,nodes:e,map:g.collapse(g.map),model:x.model,binds:x.binds,dom:r.collapse(r.dom),hooks_map:k,instance:a.__instance,handle:function(a,b){return C.handle(a,h,b)}});x.changes.attach(h,n,m);G.apply(h,c.resources,c.component);return h},handle:function(a,b,c){function f(a,b){var c="",c=b.replace(/_/gi,"");a[b]instanceof t&&void 0===a[c+"Add"]&&void 0===
a[c+"Remove"]&&(a[""+c+"Add"]=function(a){return function(){var b=void 0!==arguments[0]?arguments[0]:a.length,c=1<arguments.length?Array.prototype.slice.call(arguments,1,arguments.length):null;return null!==c?(a.splice(b,0,c),!0):!1}}(a[b]),a[c+"Remove"]=function(a){return function(b,c){a.splice(void 0!==b?b:0,void 0!==c?c:1);return!0}}(a[b]),a[c+"Length"]=function(a){return function(){return a.length}}(a[b]))}function d(a){function b(a){if(a instanceof Array||a instanceof t)return a.forEach(function(c,
f){a[f]=b(c,null)}),1===a.length?a[0]:a;if("object"===typeof a)return _object(a).forEach(function(c,d){-1!==c.indexOf("__")&&(d instanceof Array||d instanceof t?(d.forEach(function(f,d){a[c][d]=b(f,null)}),a[c]=1===d.length?d[0]:d):"object"===typeof d&&(a[c]=b(d,null)),f(a,c))}),a}return{model:b(a.model),binds:b(a.binds),map:b(a.map.map),dom:{grouped:b(a.dom.grouped),listed:b(a.dom.listed)},resources:a.resources}}var k=null,g=null;"function"===typeof a&&(g={model:b.model(),binds:b.binds(),map:b.map(),
dom:b.dom(),resources:c},k=d(g),a.call(b,k,g))},bind:function(a){return function(){return C.build(a)}}},E={build:C.build,handle:C.handle,controllers:{apply:G.apply},bind:C.bind,clone:p.clone};return{build:E.build,handle:E.handle,controllers:{apply:E.controllers.apply},bind:E.bind,clone:E.clone}},instance:function(a){return!1!==flex.oop.objects.validate(a,[{name:"url",type:"string"},{name:"pattern",type:"function"}])?_object({parent:e.classes.INSTANCE,constr:function(){this.url=flex.system.url.restore(a.url)},
privates:{pattern:a.pattern},prototype:n.proto}).createInstanceClass():null},storage:{add:function(a,b){var c=flex.overhead.globaly.get(e.storage.VIRTUAL_STORAGE_GROUP,e.storage.PATTERNS,{});void 0===c[a]&&(c[a]=b)},get:function(a){var b=flex.overhead.globaly.get(e.storage.VIRTUAL_STORAGE_GROUP,e.storage.PATTERNS,{});return void 0!==b[a]?b[a]:null}},init:function(a,b){var c=n.storage.get(a);null===c&&void 0!==b&&(c=n.instance({url:a,pattern:b}),n.storage.add(a,c));return c},nodeList:{NODE_LIST:function(a){a instanceof
NodeList?this.collections=[a]:c.isNode(a)?this.collections=[[a]]:this.collections=[]},init:function(){n.nodeList.NODE_LIST.prototype={add:function(a){a instanceof NodeList?this.collections.push(a):a instanceof n.nodeList.NODE_LIST?this.collections=this.collections.concat(a.collections):c.isNode(a)&&this.collections.push([a])},css:function(a){var b=this;"object"===typeof a&&null!==a&&_object(a).forEach(function(a,c){b.collections.forEach(function(b){Array.prototype.forEach.call(b,function(b){void 0!==
b.style[a]&&(b.style[a]=c)})})})},addClass:function(a){this.collections.forEach(function(b){Array.prototype.forEach.call(b,function(b){var c=b.className.replace(/\s{2,}/gi,"").split(" ");-1===c.indexOf(a)&&(c.push(a),b.className=c.join(" "))})})},removeClass:function(a){this.collections.forEach(function(b){Array.prototype.forEach.call(b,function(b){var c=b.className.replace(/\s{2,}/gi,"").split(" "),f=c.indexOf(a);-1!==f&&(c.splice(f,1),b.className=c.join(" "))})})},show:function(){this.collections.forEach(function(a){Array.prototype.forEach.call(a,
function(a){a.style.display=void 0!==a.__display?a.__display:"block"})})},hide:function(){this.collections.forEach(function(a){Array.prototype.forEach.call(a,function(a){a.__display=a.style.display;a.style.display="none"})})},remove:function(){this.collections.forEach(function(a){Array.prototype.forEach.call(a,function(a){void 0!==a.parentNode&&null!==a.parentNode&&a.parentNode.removeChild(a)})});this.collections=[]},append:function(a){"function"===typeof a.appendChild&&this.collections.forEach(function(b){Array.prototype.forEach.call(b,
function(b){a.appendChild(b)})})},insertBefore:function(a){void 0!==a.parentNode&&null!==a.parentNode&&"function"===typeof a.parentNode.insertBefore&&c.isNode(a)&&this.collections.forEach(function(b){Array.prototype.forEach.call(b,function(b){a.parentNode.insertBefore(b,a)})})},attr:function(a,b){var c=[];this.collections.forEach(function(d){Array.prototype.forEach.call(d,function(d){void 0!==b?(d.setAttribute(a,b),c.push(!0)):c.push(d.getAttribute(a))})});return 1===c.length?c[0]:c},removeAttr:function(a){var b=
[];this.collections.forEach(function(c){Array.prototype.forEach.call(c,function(c){b.push(c.removeAttribute(a))})});return 1===b.length?b[0]:b},on:function(a,b){if("function"===typeof b)this.collections.forEach(function(c){Array.prototype.forEach.call(c,function(c){var d=n.nodeList.create(c);flex.events.DOM.add(c,a,function(a){b.call(d,a,c[e.other.INDEXES])})})});else throw Error("Defined [handle] is not a function");},getAsArray:function(){var a=[];this.collections.forEach(function(b){Array.prototype.forEach.call(b,
function(b){a.push(b)})});return a}}},create:function(a){return new n.nodeList.NODE_LIST(a)},addMethod:function(a,b){"string"===typeof a&&"function"===typeof b&&(void 0!==n.nodeList.NODE_LIST.prototype[a]&&flex.logs.log("Method ["+a+"] of NODE_LIST list class was overwritten.",flex.logs.types.NOTIFICATION),n.nodeList.NODE_LIST.prototype[a]=b)}},map:{MAP:function(a){if(void 0!==a&&void 0!==a.nodeType)this.context=a;else throw Error("Context [context] should be a node.");},init:function(){n.map.MAP.prototype=
{select:function(a){a=_nodes(a,!1,this.context);return null!==a.target&&0<a.target.length?1<a.target.length?a.target:a.target[0]:null}}},create:function(a){return new n.map.MAP(a)}}},l={proto:function(a){var b=null,c=b=null,d=null,c=function(b){return a.instance.clone(a.hooks_map,b)},b=function(b,c,f,d){null!==b?Array.prototype.forEach.call(b,function(b){a.nodes.forEach(function(a){d?b.parentNode.insertBefore(a,b):b.appendChild(a)});d&&b.parentNode.removeChild(b)}):null!==c&&void 0!==c.parentNode&&
null!==c.parentNode?Array.prototype.forEach.call(c,function(b){a.nodes.forEach(function(a){c.parentNode.insertBefore(a,c)})}):null!==f&&void 0!==f.parentNode&&null!==f.parentNode&&Array.prototype.forEach.call(f,function(b){var c=void 0!==f.nextSibling?f.nextSibling:null;null!==c?a.nodes.forEach(function(a){c.parentNode.insertBefore(a,c)}):a.nodes.forEach(function(a){f.parentNode.appendChild(a)})});flex.events.core.fire(flex.registry.events.ui.patterns.GROUP,flex.registry.events.ui.patterns.MOUNTED,
a.nodes)},d=function(){var b=null;a.nodes instanceof Array&&(b=n.nodeList.create(),a.nodes.forEach(function(a){b.add(a)}));return b},b={nodes:function(){return a.nodes},nodeList:function(){return d()},map:function(b){void 0!==b&&(a.map=b);return a.map},model:function(b){void 0!==b&&(a.model=b);return a.model},dom:function(b){void 0!==b&&(a.dom=b);return a.dom},binds:function(b){void 0!==b&&(a.binds=b);return a.binds},handle:function(){return a.handle},hooks_map:function(){return a.hooks_map},instance:function(){return a.instance},
clone:c,mount:b};return{nodes:b.nodes,nodeList:b.nodeList,mount:b.mount,map:b.map,dom:b.dom,model:b.model,binds:b.binds,hooks_map:b.hooks_map,instance:b.instance,handle:b.handle,clone:b.clone}},instance:function(a){return!1!==flex.oop.objects.validate(a,[{name:"url",type:"string"},{name:"nodes",type:"array"},{name:"handle",type:"function"},{name:"hooks_map",type:"object",value:null},{name:"instance",type:"object",value:null},{name:"map",type:["object","array"],value:null},{name:"model",type:["object",
"array"],value:null},{name:"dom",type:["object","array"],value:null},{name:"binds",type:["object","array"],value:null}])?_object({parent:e.classes.RESULT,constr:function(){this.url=flex.system.url.restore(a.url)},privates:{nodes:a.nodes,map:a.map,model:a.model,binds:a.binds,dom:a.dom,handle:a.handle,hooks_map:a.hooks_map,instance:a.instance},prototype:l.proto}).createInstanceClass():null}},d={proto:function(a){var b=this,c=null,k=null,g=null,h=null,v=c=null,k={reset:function(){a.patterns={}},find:function(c){c=
c instanceof Array?c:[c];null!==c&&c.forEach(function(b){_object(b).forEach(function(b,c){c instanceof e.classes.CALLER&&void 0===a.patterns[c.url]&&(a.patterns[c.url]=c.url,k.find(c.hooks()))})});void 0===a.patterns[b.url]&&(a.patterns[b.url]=b.url)}},v={getStructure:function(b){function c(a,b){Array.prototype.forEach.call(a,function(a){var f=a.nodeName.toLowerCase(),d={};d.url=a.hasAttribute("src")?a.getAttribute("src"):null;if(null!==d.url)d.sub={},0<a.children.length&&c(a.children,d.sub),void 0!==
b[f]?b[f]instanceof Array?b[f].push(d):b[f]=[b[f],d]:b[f]=d;else throw flex.logs.log(m.SIGNATURE+"If you use inside template other templates, you cannot use nothing else. And src should be defined fro all included templates.",flex.logs.types.CRITICAL),Error(m.caller.PATTERN_WITHOUT_SRC);})}function f(a,b,c){function d(a,b,c,k){_object(a).forEach(function(a,c){b[a]=c});void 0!==c[k].sub&&f(c[k].sub,a,b)}_object(a).forEach(function(f,k){if(k instanceof Array)throw flex.logs.log(m.SIGNATURE+"You cannot use templates in templates in same level. You can only include template into templates. Problematic hook: "+
f+".",flex.logs.types.CRITICAL),Error(m.caller.ONLY_ONE_TEMPLATE_ON_SAME_LEVEL);c[f]={url:k.url,hooks:{}};void 0===b[f]||null===b[f]||"object"!==typeof b[f]||b[f]instanceof Array?b[f]instanceof Array&&(c[f].hooks=[],b[f].forEach(function(b){var k={};d(b,k,a,f);c[f].hooks.push(k)})):d(b[f],c[f].hooks,a,f)})}var d=document.createElement("div"),k={},g={},h={};d.innerHTML=b;c(d.children,k);if(void 0!==k[t.values.PATTERN_NODE.toLowerCase()])return h[t.values.PATTERN_NODE.toLowerCase()]=a.hooks,f(k,h,g),
g[t.values.PATTERN_NODE.toLowerCase()];throw Error(m.caller.CANNOT_FIND_ROOT_TEMPLATE);},addGetters:function(a){void 0!==a.hooks&&(a.hooks instanceof Array?a.hooks.forEach(function(b,c){_object(b).forEach(function(b,f){"object"!==typeof f||f instanceof Array||void 0===f.url||(a.hooks[c][b]=d.instance({url:f.url,hooks:v.addGetters(f)}))})}):"object"===typeof a.hooks&&_object(a.hooks).forEach(function(b,c){"object"!==typeof c||c instanceof Array||void 0===c.url||(a.hooks[b]=d.instance({url:c.url,hooks:v.addGetters(c)}))}));
return a.hooks},process:function(c){var k={};return(new RegExp("<\\s*"+t.values.PATTERN_NODE+"\\s{1,}src\\s*=")).test(c)?(k=v.getStructure(c),_object(a).forEach(function(a,b){-1===["hooks","__instance","pattern"].indexOf(a)&&(k[a]=b)}),k.component=b.url,v.addGetters(k),d.instance(k)):!1}},g={values:{caller:function(c){var d=n.init(c.url),k=c.hooks();if(null===d)throw flex.logs.log(h()+m.caller.CANNOT_GET_CHILD_PATTERN+"("+c.url+")",flex.logs.types.CRITICAL),flex.system.handle(a.callbacks.fail,b.url),
m.caller.CANNOT_GET_CHILD_PATTERN;g.apply(k);return d.bind({hooks:k,resources:c.resources(),conditions:c.conditions(),component:c.component(),map:c.map()})}},value:function(b,c){function f(b){return b instanceof e.classes.CALLER?(null!==a.map&&void 0!==a.map[c]&&void 0!==a.map[c].hooks&&b.updateMap(a.map[c].hooks),g.values.caller(b)):"function"===typeof b?f(b()):b}return void 0!==b?f(b):""},apply:function(b){b=void 0!==b?b:a.hooks;b instanceof Array?b.forEach(function(a,c){b[c]=g.apply(b[c])}):"object"===
typeof b&&null!==b&&_object(b).forEach(function(a,c){b[a]=g.value(c,a)});return b},defaults:function(){function c(a,b){_object(a).forEach(function(a,f){void 0===b[a]?b[a]=f:null!==b[a]&&"object"===typeof b[a]&&c(f,b[a])})}var d=G.storage.get(b.url);null!==d&&"object"===typeof d&&c(d,a.hooks);return!0},updateMap:function(b){function c(a,b,f){return void 0===f[b]||f[b]instanceof e.classes.CALLER?!1:d.instance({url:a.url,hooks:f[b]})}a.map=0===Object.keys(a.map).length?b:a.map;_object(a.map).forEach(function(b,
f){var d=null;if(null!==a.hooks)if(a.hooks instanceof Array)try{a.hooks.forEach(function(k,g){d=c(f,b,k);a.hooks[g][b]=!1!==d?d:a.hooks[g][b];if(!1===d)throw Error("break");})}catch(k){if("break"!==k.message)throw k;}else d=c(f,b,a.hooks),a.hooks[b]=!1!==d?d:a.hooks[b]})},defaultMap:function(){var c=E.storage.get(b.url);null!==c&&"object"===typeof c&&(a.map=0===Object.keys(a.map).length?c:a.map)}},c=function(c){function d(a,b){"object"===typeof a&&_object(a).forEach(function(a,c){var f;void 0!==c.url&&
(f=flex.system.url.restore(c.url),-1===b.indexOf(f)&&b.push(f),void 0!==c.hooks&&d(c.hooks,b))})}function r(b,c,f){var k=[],h=[];g.defaultMap();"object"===typeof a.map&&(d(a.map,k),k.forEach(function(a){null===n.init(a)&&h.push(a)}));0<h.length?q.init(h,function(a){c(b.concat(a))},f):c(b)}function l(c){g.defaults();c=1===c.length?v.process(c[0].html()):null;if(null!==c)c.render(!1,b.url);else if(g.apply(),a.pattern=n.init(b.url),null!==a.pattern)a.pattern=a.pattern.build({hooks:a.hooks,resources:a.resources,
conditions:a.conditions,component:a.component,map:a.map}),a.pattern instanceof e.classes.RESULT&&(a.pattern.mount(a.node,a.before,a.after,a.replace),null!==a.callbacks.success&&a.pattern.handle()(a.callbacks.success,a.resources));else throw flex.logs.log(h()+m.caller.CANNOT_GET_PATTERN,flex.logs.types.CRITICAL),flex.system.handle(a.callbacks.fail,b.url),m.caller.CANNOT_GET_PATTERN;}function C(){flex.logs.log(h()+m.caller.CANNOT_INIT_PATTERN,flex.logs.types.CRITICAL);flex.system.handle(a.callbacks.fail,
b.url);throw m.caller.CANNOT_INIT_PATTERN;}if("boolean"===typeof c&&c){if(g.apply(),a.pattern=n.init(b.url),null!==a.pattern&&(a.pattern=a.pattern.build({hooks:a.hooks,resources:a.resources,conditions:a.conditions,component:a.component,map:a.map}),a.pattern instanceof e.classes.RESULT))return a.pattern.handle()(a.callbacks.success,a.resources),a.pattern}else k.reset(),k.find(a.hooks),q.init(function(){var b=[];_object(a.patterns).forEach(function(a){b.push(a)});d(a.map,b);return b}(),function(a){r(a,
l,C)},C)},h=function(){return m.SIGNATURE+":: caller ("+b.url+")"},c={render:c,hooks:function(){return a.hooks},resources:function(){return a.resources},conditions:function(){return a.conditions},component:function(){return a.component},map:function(){return a.map},updateMap:g.updateMap};return{render:c.render,hooks:c.hooks,conditions:c.conditions,resources:c.resources,component:c.component,map:c.map,updateMap:c.updateMap}},instance:function(a){return!1!==flex.oop.objects.validate(a,[{name:"url",
type:"string"},{name:"node",type:["node","string","array","NodeList"],value:null},{name:"before",type:["node","string","array","NodeList"],value:null},{name:"after",type:["node","string","array","NodeList"],value:null},{name:"id",type:"string",value:flex.unique()},{name:"replace",type:"boolean",value:!1},{name:"hooks",type:["object","array"],value:null},{name:"conditions",type:"object",value:null},{name:"callbacks",type:"object",value:{}},{name:"map",type:"object",value:{}},{name:"resources",type:"object",
value:{}},{name:"remove_missing_hooks",type:"boolean",value:!0},{name:"component",type:"string",value:null}])?(flex.oop.objects.validate(a.callbacks,[{name:"before",type:"function",value:null},{name:"success",type:"function",value:null},{name:"fail",type:"function",value:null}]),_object({parent:e.classes.CALLER,constr:function(){this.url=flex.system.url.restore(a.url)},privates:{id:a.id,node:null!==a.node?"string"===typeof a.node?_nodes(a.node).target:a.node instanceof Array?a.node:a.node instanceof
NodeList?a.node:[a.node]:null,before:null!==a.before?"string"===typeof a.before?_nodes(a.before).target:a.before instanceof Array?a.before:a.before instanceof NodeList?a.before:[a.before]:null,after:null!==a.after?"string"===typeof a.after?_nodes(a.after).target:a.after instanceof Array?a.after:a.after instanceof NodeList?a.after:[a.after]:null,replace:a.replace,hooks:a.hooks,conditions:a.conditions,callbacks:a.callbacks,resources:a.resources,remove_missing_hooks:a.remove_missing_hooks,map:a.map,
resources:a.resources,component:a.component,pattern:null},prototype:d.proto}).createInstanceClass()):null}},r={init:function(a){function b(a){var c=a.parentNode.nodeName.toLowerCase();return c!==t.values.PATTERN_NODE?"body"!==c?b(a.parentNode):!0:!1}var c=_nodes(t.values.PATTERN_NODE).target;a="boolean"===typeof a?a:!1;null!==c&&c instanceof NodeList&&0<c.length&&Array.prototype.forEach.call(c,function(c){b(c)&&((c.hasAttribute("success")||c.hasAttribute("error"))&&a||r.caller(c))})},caller:function(a,
b){function c(a,b){var f=-1;try{a.forEach(function(a,c){if(void 0===a[b])throw f=c,"found";})}catch(d){}return f}function k(a,b){var c=a.getAttribute(b),f=null;return"string"===typeof c&&""!==c?(f=c.split("."),c=window,f.forEach(function(a){c=null!==c&&void 0!==c[a]?c[a]:null}),c):null}var g=null;b=void 0!==b?b:!1;g={url:a.hasAttribute("src")?a.getAttribute("src"):null,hooks:{}};Array.prototype.forEach.call(a.children,function(a){var b,f=a.nodeName.toLowerCase();void 0===g.hooks[f]||g.hooks instanceof
Array||(g.hooks=[g.hooks]);g.hooks instanceof Array?(b=c(g.hooks,f),-1===b&&(g.hooks.push({}),b=g.hooks.length-1),g.hooks[b][f]=0===a.children.length?a.innerHTML:r.caller(a,!0)):g.hooks[f]=0===a.children.length?a.innerHTML:r.caller(a,!0)});"object"===typeof g.hooks&&0===Object.keys(g.hooks).length&&delete g.hooks;return b||null===g.url?null!==g.url?g=d.instance(g):g.hooks:(g.node=a,g.replace=!0,g.callbacks={success:k(a,"success"),error:k(a,"error")},g=d.instance(g).render())},attach:function(){"complete"!==
document.readyState?flex.events.DOM.add(window,"load",function(){r.init(!0)}):r.init(!0)}},h={references:{assign:function(a,b){var c=flex.overhead.globaly.get(e.storage.VIRTUAL_STORAGE_GROUP,e.storage.CONTROLLERS_LINKS,{});void 0===c[a]&&(c[a]=b)},getPatternURL:function(a){var b=flex.overhead.globaly.get(e.storage.VIRTUAL_STORAGE_GROUP,e.storage.CONTROLLERS_LINKS,{});return void 0!==b[a]?b[a]:null}},storage:{add:function(a,b){var c=flex.overhead.globaly.get(e.storage.VIRTUAL_STORAGE_GROUP,e.storage.CONTROLLERS_STORAGE,
{});void 0===c[a]&&(c[a]=[]);c[a].push(b)},get:function(a){var b=flex.overhead.globaly.get(e.storage.VIRTUAL_STORAGE_GROUP,e.storage.CONTROLLERS_STORAGE,{});a="string"===typeof a?[a]:a;var c=[];a.forEach(function(a){void 0!==b[a]&&(c=c.concat(b[a]))});return c}},current:{data:null,set:function(a){h.current.data=a},get:function(){return h.current.data},reset:function(){h.current.data=null}},attach:function(a){var b;"function"===typeof a&&(b=null!==h.current.get()?h.current.get():flex.resources.attach.js.getCurrentSRC(),
null!==b&&(b=h.references.getPatternURL(b),h.storage.add(b,a)))}},g={virtual:{add:function(a,b){var c=flex.overhead.globaly.get(e.storage.VIRTUAL_STORAGE_GROUP,e.storage.VIRTUAL_STORAGE_ID,{});if(null!==c&&void 0===c[a])return c[a]=b,!0},get:function(a){var b=flex.overhead.globaly.get(e.storage.VIRTUAL_STORAGE_GROUP,e.storage.VIRTUAL_STORAGE_ID,{});return null!==b?void 0!==b[a]?b[a]:null:null}},local:{add:function(a,b){return!0===e.storage.USE_LOCALSTORAGE?flex.localStorage.addJSON(a,{html:b,hash:flex.hashes.get(a)}):
!1},get:function(a){var b;return!0===e.storage.USE_LOCALSTORAGE&&(flex.hashes.update(a),b=flex.localStorage.getJSON(a),null!==b&&b.hash===flex.hashes.get(a))?b.html:null}},add:function(a,b){g.local.add(a,b);g.virtual.add(a,b)},get:function(a){var b=g.virtual.get(a);null===b&&(b=g.local.get(a));return b}},b={measure:function(){var a={};return function(b,c){if(e.measuring.MEASURE)return b=void 0===b?flex.unique():b,void 0===a[b]?a[b]=performance.now():(flex.logs.log(m.SIGNATURE+"Operation ["+c+"] was taken "+
(performance.now()-a[b]).toFixed(4)+"ms.",flex.logs.types.NOTIFICATION),delete a[b]),b}}()},k={storage:{add:function(a,b){flex.overhead.globaly.get(e.storage.VIRTUAL_STORAGE_GROUP,e.storage.CONDITIONS_STORAGE,{})[a]=b},get:function(a){var b=flex.overhead.globaly.get(e.storage.VIRTUAL_STORAGE_GROUP,e.storage.CONDITIONS_STORAGE,{});return void 0!==b[a]?b[a]:null}},attach:function(a){var b;"object"===typeof a&&null!==a&&(b=null!==h.current.get()?h.current.get():flex.resources.attach.js.getCurrentSRC(),
null!==b&&(b=h.references.getPatternURL(b),k.storage.add(b,a)))}},G={storage:{add:function(a,b){flex.overhead.globaly.get(e.storage.VIRTUAL_STORAGE_GROUP,e.storage.HOOKS_STORAGE,{})[a]=b},get:function(a){var b=flex.overhead.globaly.get(e.storage.VIRTUAL_STORAGE_GROUP,e.storage.HOOKS_STORAGE,{});return void 0!==b[a]?b[a]:null}},attach:function(a){var b;"object"===typeof a&&null!==a&&(b=null!==h.current.get()?h.current.get():flex.resources.attach.js.getCurrentSRC(),null!==b&&(b=h.references.getPatternURL(b),
G.storage.add(b,a)))}},E={storage:{add:function(a,b){flex.overhead.globaly.get(e.storage.VIRTUAL_STORAGE_GROUP,e.storage.MAPS_STORAGE,{})[a]=b},get:function(a){var b=flex.overhead.globaly.get(e.storage.VIRTUAL_STORAGE_GROUP,e.storage.MAPS_STORAGE,{});return void 0!==b[a]?b[a]:null}},attach:function(a){var b;"object"===typeof a&&null!==a&&(b=null!==h.current.get()?h.current.get():flex.resources.attach.js.getCurrentSRC(),null!==b&&(b=h.references.getPatternURL(b),E.storage.add(b,a)))}},c={testReg:function(a,
b){a.lastIndex=0;return a.test(b)},binds:{data:{value:[{nodes:["input","textarea"],event:"change",getter:function(){return this.value},setter:function(a){this.value=a}}]},assing:function(a,b,d){var k=a.nodeName.toLowerCase(),g=null;void 0!==c.binds.data[b]&&(c.binds.data[b].forEach(function(a){-1!==a.nodes.indexOf(k)&&(g=a)}),null!==g&&function(a,b,c,f,d){_node(b).events().add(a,function(a){d.call(b,a,c,f)})}(g.event,a,g.getter.bind(a),g.setter.bind(a),d));return!1},isPossible:function(a,b){var d=
a.nodeName.toLowerCase();if(void 0!==c.binds.data[b])try{c.binds.data[b].forEach(function(a){if(-1!==a.nodes.indexOf(d))throw"found";})}catch(k){return"found"===k?!0:!1}return!1}},isNode:function(a){return void 0!==a&&void 0!==a.nodeName&&void 0!==a.parentNode&&void 0!==a.nodeType?!0:!1},tableFix:function(a){var b=a.match(e.regs.TABLE),c=[];b instanceof Array&&(b.forEach(function(a){a=a.replace(e.regs.TABLE_TAG,"").replace(e.regs.ANY_TAG,"");a=a.match(e.regs.HOOK);a instanceof Array&&(c=c.concat(a))}),
c.forEach(function(b){var c=b.replace(e.regs.HOOK_BORDERS,"");a=a.replace(new RegExp(e.regs.HOOK_OPEN+c+e.regs.HOOK_CLOSE,"gi"),"\x3c!--"+b+"--\x3e")}));return a},getTextNode:function(a,b,c){var d=null;c=void 0!==c?c:null;if(void 0!==a.childNodes)if(null!==c&&void 0!==a.childNodes[c]&&a.childNodes[c].nodeValue===b)d=a.childNodes[c];else try{Array.prototype.forEach.call(a.childNodes,function(a){if(3===a.nodeType&&a.nodeValue===b)throw d=a,"found";})}catch(k){}return d}},C={init:function(){flex.callers.define.node("ui.patterns.append",
function(a){"object"===typeof a&&this.target&&(a.node=this.target);return d.instance(a)});flex.callers.define.nodes("ui.patterns.append",function(){var a=[];Array.prototype.forEach.call(this.target,function(b){"object"===typeof parameters&&this.target&&(parameters.node=this.target);a.push(d.instance(parameters))});return a})}};n.nodeList.init();n.map.init();void 0!==flex.libraries&&void 0!==flex.libraries.events&&void 0!==flex.libraries.binds&&(flex.libraries.events.create(),flex.libraries.binds.create());
v={preload:q.init,get:d.instance,controller:{attach:h.attach},conditions:{attach:k.attach},hooks:{attach:G.attach},map:{attach:E.attach},classes:{NODE_LIST:{addMethod:n.nodeList.addMethod}},setup:t.setup,debug:t.debug,layout:r.init};C.init();window._controller=v.controller.attach;window._conditions=v.conditions.attach;window._hooks=v.hooks.attach;window._map=v.map.attach;r.attach();return{preload:v.preload,get:v.get,classes:{NODE_LIST:{addMethod:v.classes.NODE_LIST.addMethod}},setup:v.setup,debug:v.debug,
layout:v.layout}};N.prototype=function(){var t=null,e=null,q=null,q=null,e=function(){null===t&&(t=function(){},t.prototype=function(){function e(b){b.element=void 0!==b.element?b.element:null;b.name="string"===typeof b.name?b.name:null;b.handle="function"===typeof b.handle?b.handle:null;b.id="string"===typeof b.id?b.id:flex.unique();b.once="boolean"===typeof b.once?b.once:!1;b.touch="boolean"===typeof b.touch?b.touch:!0;b.safely="boolean"===typeof b.safely?b.safely:!1;!1===r.has(b.name)&&(b.touch=
!1);var c;return null!==b.element&&null!==b.handle&&null!==b.name&&(c=v.get(b.element,!1),null!==c&&(c=d.buildCommonHandle(b.element,b.name,c,b.touch,b.safely),c instanceof Array))?(c.push(new g(b.id,b.handle,b.once,b.touch)),b.id):null}function n(b,c,k,g,h){c=void 0!==c?c:d.fixEvent();var m=v.get(this,!0),a=null,f=flex.unique(),e=null,r=this,l=!1;g=c.type!==g?g:c.type;var n=null;if(c&&b&&k&&null!==m&&(c=d.unificationEvent(c),m[g]&&(m=m[g],m.element_id===k))){a=m.handles;try{Array.prototype.forEach.call(a,
function(a){if(a.interaction!==f){if(a.interaction=f,e=a.launch(r,c),l=!0===l?!0:!1===a.isRemoving()?!1:!0,!1===e)throw c.flex.stop(),flex.logs.log("Break event in DOM.fire; \n\r >event: "+c.type+"\n\r >handle_id"+a.id+"\n\r >element_id"+k,flex.logs.types.WARNING),"prevent";}else flex.logs.log("Unexpected behavior of handle event in DOM.fire. Attempt to call handle twice. \n\r >event: "+c.type+"\n\r >handle_id"+a.id+"\n\r >element_id"+k,flex.logs.types.LOGICAL)})}catch(p){"prevent"!==p&&(h?flex.logs.log("Unexpected error in DOM.fire; \n\r >event: "+
c.type+"\n\r >element_id"+k,flex.logs.types.CRITICAL):n=p)}finally{!1!==l&&(m.handles=a.filter(function(a){return!1===a.isWorking()&&!1!==a.isRemoving()?!1:!0}),0===m.handles.length&&(d.destroyCommonHandle(b,g),v.clear(b)))}if(null!==n)throw n;return!0}return!1}function l(b){b=function(b){b.element=void 0!==b.element?b.element:null;b.name="string"===typeof b.name?b.name:null;b.handle="function"===typeof b.handle?b.handle:null;var c;"string"===typeof b.id?c=b.id:(c=b.handle,c=void 0!==c[h.HANDLE_EVENT_ID_PROPERTY]?
c[h.HANDLE_EVENT_ID_PROPERTY]:null);b.id=c;return b}(b);var c=null,c=null;if(null!==b.element&&null!==b.name&&(null===b.id&&null!==b.handle&&void 0!==b.handle[h.HANDLE_EVENT_ID_PROPERTY]&&(b.id=b.handle[h.HANDLE_EVENT_ID_PROPERTY]),null!==b.id&&(c=v.get(b.element,!0),"object"===typeof c[b.name]))){c=c[b.name];c=c.handles;try{Array.prototype.forEach.call(c,function(c){if(c.id===b.id)throw c.toRemove(),"handle found";})}catch(k){"handle found"!==k&&flex.logs.log("Unexpected error in DOM.remove; \n\r >event: "+
b.name+"\n\r >event_id"+b.id,flex.logs.types.CRITICAL)}finally{c=c.filter(function(b){return!1===b.isWorking()&&!1!==b.isRemoving()?!1:!0}),0===c.length&&(d.destroyCommonHandle(b.element,b.name),v.clear(b.element))}}}var d=null,r=null,v=null,h={STORAGE_NAME:"FlexEventsStorage",HANDLE_EVENT_ID_PROPERTY:"FlexEventIDProrerty"},g=null,m=null,g=function(b,c,d,g,h){this.id=b;this.handle=c;this.once=d;this.touch=g;this.safely=h;this.remove=!1;this.interaction=null;this.working=!1;this.device=null};g.prototype=
{launch:function(b,c){var d=null;if(!1===this.remove&&!1===this.isDouble(c)){try{return this.working=!0,this.remove=this.once,this.handle.call(b,c)}catch(g){if(this.safely)return this.error(c,g),null;d=g}finally{this.working=!1,!0===this.once&&!1===this.remove&&flex.logs.log("Unexpected behavior DOM.fire. Flag [once] is true, but [remove] is false; \n\r >event id"+this.id,flex.logs.types.WARNING)}if(null!==d)throw d;}return null},isWorking:function(){return this.working},isRemoving:function(){return this.remove},
toRemove:function(){this.remove=!0},error:function(b,c){flex.logs.log("event: "+b.type+"; ID: "+this.id+"; generated error: \r\n"+flex.logs.parseError(c),flex.logs.types.WARNING)},isDouble:function(b){b=b.flex.singleTouch?"touch":"mouse";this.device=null===this.device?b:this.device;return this.device===b?!1:!0}};v={get:function(b,c){c="boolean"===typeof c?c:!0;var d;return b?(d=flex.overhead.objecty.get(b,h.STORAGE_NAME),null===d&&!1===c&&(d=flex.overhead.objecty.set(b,h.STORAGE_NAME,{})),d):null},
clear:function(b){var c=v.get(b,!0);return null!==c&&0===Object.keys(c).length?(flex.overhead.objecty.del(b,h.STORAGE_NAME),!0):!1}};d={buildCommonHandle:function(b,c,d,g,h){var m=flex.unique();if("object"!==typeof d[c]){d[c]={globalHandle:function(a){return n.call(b,b,a,m,c,h)},element_id:m,handles:[]};if(!1===flex.events.DOM.add(b,c,d[c].globalHandle))return null;!1!==g&&!1!==r.has(c)&&flex.events.DOM.add(b,r.getType(c),d[c].globalHandle)}return d[c].handles},destroyCommonHandle:function(b,c){var d;
return b&&c&&(d=v.get(b,!0),"object"===typeof d[c])?(flex.events.DOM.remove(b,c,d[c].globalHandle),!1!==r.has(c)&&flex.events.DOM.remove(b,r.getType(c),d[c].globalHandle),d[c]=null,delete d[c],!0):null},fixEvent:function(){return!event&&window.event?window.event:null},unificationEvent:function(b){function c(a){a.flex={};return a}function d(a,b){if(void 0!==b.clientX)if(void 0===b.pageX&&(a.flex.pageX=null,a.flex.pageY=null),null===b.pageX&&null!==b.clientX){var c=document.documentElement,g=document.body;
a.flex.pageX=b.clientX+(c&&c.scrollLeft||g&&g.scrollLeft||0)-(c.clientLeft||0);a.flex.pageY=b.clientY+(c&&c.scrollTop||g&&g.scrollTop||0)-(c.clientTop||0)}else a.flex.pageX=b.pageX,a.flex.pageY=b.pageY;else a.flex.pageX=null,a.flex.pageY=null;a.flex.clientX=void 0!==b.clientX?b.clientX:null;a.flex.clientY=void 0!==b.clientY?b.clientY:null;a.flex.offsetX=void 0!==b.offsetX?b.offsetX:void 0!==b.layerX?b.layerX:null;a.flex.offsetY=void 0!==b.offsetY?b.offsetY:void 0!==b.layerY?b.layerY:null;return a}
function g(a){void 0===a.preventDefault&&(a.preventDefault=function(){try{this.returnValue=!1}catch(a){}});void 0===a.stopPropagation&&(a.stopPropagation=function(){try{this.cancelBubble=!0}catch(a){}});a.flex.stop=function(){a.preventDefault();a.stopPropagation();return!1};return a}function h(a){void 0===a.target&&(a.target=void 0!==a.srcElement?a.srcElement:null);null!==a.target&&void 0===a.relatedTarget&&(void 0!==a.fromElement?a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement:
(a.relatedTarget=null,a.fromElement=null));a.flex.target=a.target;return a}function m(a){void 0===a.which&&void 0!==a.button&&(a.flex.which=a.button&1?1:a.button&2?3:a.button&4?2:0,a.flex.button=a.button);return a}function a(a){"object"===typeof a.touches&&(1===a.touches.length&&(a=d(a,a.touches[0]),a.flex.target=a.touches[0].target,a.flex.singleTouch=!0),a.flex.touches=a.touches);return a}void 0===b.flex&&(b=c(b),b=g(b),b=h(b),b=d(b,b),b=m(b),b=a(b));return b}};r={events:{click:{touch:"touchstart"},
dblclick:{touch:"touchstart"},mousedown:{touch:"touchstart"},mouseenter:{touch:"touchenter"},mouseleave:{touch:"touchleave"},mousemove:{touch:"touchmove"},mouseover:{touch:""},mouseout:{touch:""},mouseup:{touch:"touchend"}},has:function(b){for(var c in r.events)if(c===b||"on"+c===b)return!0;return!1},getType:function(b){for(var c in r.events)if(c===b||"on"+c===b)return r.events[c].touch;return null},getOriginalType:function(b){b=b.toLowerCase();for(var c in r.events)if(r.events[c].touch===b)return c;
return null}};m={_add:e,_remove:l,add:function(b,c,d,g,h,m){return e({element:b,name:c,handle:d,id:g,touch:h,safely:m})},remove:function(b,c,d,g){return l({element:b,name:c,handle:d,id:g})},call:function(b,c,d){function g(a,b){for(var c in b)a[c]=b[c];return a}var h=null,m=null,h=null,h={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/};d=g({type:c,canBubble:!0,cancelable:!0,view:b.ownerDocument.defaultView,
detail:1,screenX:0,screenY:0,clientX:0,clientY:0,pointerX:0,pointerY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null},d||{});for(c in h)if(h[c].test(c)){m=c;break}if(!m)throw new SyntaxError("Only HTMLEvents and MouseEvents interfaces are supported");document.createEvent?(h=document.createEvent(m),"HTMLEvents"==m?h.initEvent(c,d.bubbles,d.cancelable):h.initMouseEvent(d.type,d.canBubble,d.cancelable,d.view,d.detail,d.screenX,d.screenY,d.clientX,d.clientY,d.ctrlKey,d.altKey,
d.shiftKey,d.metaKey,d.button,d.relatedTarget),b.dispatchEvent(h)):(d.clientX=d.pointerX,d.clientY=d.pointerY,h=document.createEventObject(),h=g(h,d),b.fireEvent("on"+c,h));return b},clear:function(b,c,g){var h=null;g="boolean"===typeof g?g:!1;if(b&&c){h=v.get(b,!0);if(null!==h&&"object"===typeof h[c]){h=h[c];if(!1!==g)try{Array.prototype.forEach.call(h.handles,function(d){flex.logs.log("Event fired in DOM.clear.fire; \n\r>event: "+c+"\n\r>handle_id: "+d.id,flex.logs.types.NOTIFICATION);if(!1===d.launch(b,
null))throw"prevent";})}catch(m){"prevent"===m?flex.logs.log("Break event in DOM.clear.fire; \n\r >event: "+c,flex.logs.types.WARNING):flex.logs.log("Fatal error event in DOM.clear.fire; \n\r >event: "+c,flex.logs.types.WARNING)}h.handles=[];d.destroyCommonHandle(b,c);v.clear(b);return!0}return!1}return null},unify:d.unificationEvent};return{add:m.add,remove:m.remove,clear:m.clear,call:m.call,unify:m.unify,extendedAdd:m._add,extendedRemove:m._remove}}(),t=new t);return t},q={init:function(){flex.callers.define.node("events.add",
function(p,n,l,d){return e().add(this.target,p,n,l,d)});flex.callers.define.node("events.remove",function(p,n,l){return e().remove(this.target,p,n,l)});flex.callers.define.node("events.call",function(p){return e().call(this.target,p)});flex.callers.define.nodes("events.add",function(p,n,l,d){Array.prototype.forEach.call(this.target,function(r){e().add(r,p,n,l,d)})});flex.callers.define.nodes("events.remove",function(p,n,l){Array.prototype.forEach.call(this.target,function(d){e().remove(d,p,n,l)})});
flex.callers.define.nodes("events.call",function(p){Array.prototype.forEach.call(this.target,function(n){e().call(n,p)})})}};q.init();q={DOMEvents:e};return{DOMEvents:q.DOMEvents}};O.prototype=function(){var t=null,e=null,q=null,p=null,n=null,l=null,d=null,r=null,l={objects:{STORAGE_PROPERTY:"flex.object.bind.storage",HANDLE_ID_PROPERTY:"flex.object.bind.handle.id"},attrs:{STORAGE_PROPERTY:"flex.attrs.bind.storage",HANDLE_ID_PROPERTY:"flex.attrs.bind.handle.id"},props:{STORAGE_PROPERTY:"flex.props.bind.storage",
HANDLE_ID_PROPERTY:"flex.props.bind.handle.id"}},d={objects:{INCORRECT_ARGUMENTS:"defined incorrect arguments or not defined at all",PROPERTY_IS_CONST:"cannot kill bind with property, because property now is constant"},support:{DEFINE_PROPERTY:"flex.binds: Current browser does not support Object.defineProperty",MUTATION_SCANNING:"flex.attrs: Current browser does not support any avaliable way to scanning mutation of attributes"}},t={storage:{create:function(d){var h=function(d){this.parent=d;this.binds=
{}};h.prototype={make:function(d,h){var b=this;return this.binds[d]?!1:(this.binds[d]={current:h,previous:h,setter:function(c){b.binds[d].previous=b.binds[d].current;b.binds[d].current=c;for(var k in b.binds[d].handles)b.binds[d].handles[k].call(b.parent,b.binds[d].current,b.binds[d].previous,k)},getter:function(){return b.binds[d].current},handles:{}},!0)},add:function(d,h){var b=flex.unique();h[l.objects.HANDLE_ID_PROPERTY]=b;this.binds[d].handles[b]=h;return b},remove:function(d,h){return this.binds[d]&&
this.binds[d].handles[h]&&(delete this.binds[d].handles[h],0===Object.keys(this.binds[d].handles).length)?delete this.binds[d]:null},kill:function(d){return this.binds[d]?delete this.binds[d]:null},isPropertyReady:function(d){return void 0!==this.binds[d]?!0:!1},destroy:function(){return 0===Object.keys(this.binds).length?delete this.parent[l.objects.STORAGE_PROPERTY]:!1},setter:function(d){return this.binds[d].setter},getter:function(d){return this.binds[d].getter}};return new h(d)}},bind:function(e,
h,g){var m=l.objects.STORAGE_PROPERTY,b;if(Object.defineProperty){if("object"===typeof e&&"string"===typeof h&&"function"===typeof g){b=e[h];e[m]||(e[m]=t.storage.create(e));m=e[m];if(!m.isPropertyReady(h))if(delete e[h])m.make(h,b),Object.defineProperty(e,h,{get:m.getter(h),set:m.setter(h),configurable:!0});else return m.destroy(),!1;return m.add(h,g)}throw"object.bind::"+d.objects.INCORRECT_ARGUMENTS;}},unbind:function(e,h,g){var m=l.objects.STORAGE_PROPERTY,b;if("object"===typeof e&&"string"===
typeof h&&"string"===typeof g){if(e[m]&&(m=e[m],m.isPropertyReady(h)&&(b=e[h],m.remove(h,g),!m.isPropertyReady(h))))try{return delete e[h],e[h]=b,!0}catch(c){throw"object.unbind::"+d.objects.PROPERTY_IS_CONST;}return null}throw"object.unbind::"+d.objects.INCORRECT_ARGUMENTS;},kill:function(e,h){var g=l.objects.STORAGE_PROPERTY,m;if("object"===typeof e&&"string"===typeof h){if(e[g]){m=e[h];g=e[g];try{return g.kill(h)?(delete e[h],e[h]=m,!0):!1}catch(b){throw"object.kill::"+d.objects.PROPERTY_IS_CONST;
}}return null}throw"object.kill::"+d.objects.INCORRECT_ARGUMENTS;}},e={storage:{create:function(d){var h=function(d){this.node=d;this.binds={};this._destroy=null};h.prototype={init:function(){this._destroy=p.attach(d,this.handle,this,{attributes:!0,childList:!1,subtree:!1,characterData:!0,attributeOldValue:!1,characterDataOldValue:!1})},handle:function(d,h){var b=this,c=null;this.binds[d]&&(c=this.node.getAttribute(d),c!==this.binds[d].current&&(this.binds[d].previous=this.binds[d].current,this.binds[d].current=
c,_object(this.binds[d].handles).forEach(function(c,e){e.call(b.node,d,b.binds[d].current,b.binds[d].previous,h,c)})))},make:function(d){this.binds[d]||(this.binds[d]={handles:{},previous:null,current:this.node.getAttribute(d)})},add:function(d,h){var b=flex.unique();h[l.attrs.HANDLE_ID_PROPERTY]=b;this.binds[d].handles[b]=h;return b},remove:function(d,h){var b=null;this.binds[d]&&this.binds[d].handles[h]&&(delete this.binds[d].handles[h],0===Object.keys(this.binds[d].handles).length&&(b=delete this.binds[d],
this.destroy()));return b},kill:function(d){var h=null;this.binds[d]&&(h=delete this.binds[d],this.destroy());return h},isAttrReady:function(d){return void 0!==this.binds[d]?!0:!1},destroy:function(){return 0===Object.keys(this.binds).length?(this._destroy(),delete this.node[l.attrs.STORAGE_PROPERTY]):!1}};return new h(d)}},bind:function(r,h,g){var m=l.attrs.STORAGE_PROPERTY;if(null!==p.attach){if(void 0!==r&&"string"===typeof h&&"function"===typeof g&&r.nodeName)return r[m]||(r[m]=e.storage.create(r),
r[m].init()),m=r[m],m.isAttrReady(h)||m.make(h),m.add(h,g);throw"attrs.bind::"+d.objects.INCORRECT_ARGUMENTS;}},unbind:function(e,h,g){var m=l.attrs.STORAGE_PROPERTY;if("object"===typeof e&&"string"===typeof h&&"string"===typeof g)return e[m]&&(m=e[m],m.isAttrReady(h))?m.remove(h,g):null;throw"attrs.unbind::"+d.objects.INCORRECT_ARGUMENTS;},kill:function(e,h){var g=l.attrs.STORAGE_PROPERTY;if("object"===typeof e&&"string"===typeof h)return e[g]&&(g=e[g],g.isAttrReady(h))?g.kill(h):null;throw"attrs.unbind::"+
d.objects.INCORRECT_ARGUMENTS;}},q={storage:{create:function(d){var h=function(d){this.node=d;this.binds={};this._destroy=null};h.prototype={init:function(){this._destroy=p.attach(d,this.handle,this,{attributes:!0,childList:!0,subtree:!0,characterData:!0,attributeOldValue:!1,characterDataOldValue:!1})},prop:function(d){var h=null,b=this.node;d.split(".").forEach(function(c,d,g){void 0!==b[c]&&d<g.length-1?b=b[c]:void 0!==b[c]&&d===g.length-1&&(h={parent:b,name:c})});return h},handle:function(d,h){var b=
this;_object(this.binds).forEach(function(c,d){var g=b.binds[c].parent[c];g!==b.binds[c].current&&(b.binds[c].previous=b.binds[c].current,b.binds[c].current=g,_object(b.binds[c].handles).forEach(function(d,g){g.call(b.binds[c].parent,c,b.binds[c].current,b.binds[c].previous,h,d)}))})},make:function(d){d=this.prop(d);this.binds[d.name]||(this.binds[d.name]={handles:{},previous:null,current:d.parent[d.name],parent:d.parent})},add:function(d,h){var b=flex.unique();d=this.prop(d);h[l.props.HANDLE_ID_PROPERTY]=
b;this.binds[d.name].handles[b]=h;return b},remove:function(d,h){var b=null;d=this.prop(d);this.binds[d.name]&&this.binds[d.name].handles[h]&&(delete this.binds[d.name].handles[h],0===Object.keys(this.binds[d.name].handles).length&&(b=delete this.binds[d.name],this.destroy()));return b},kill:function(d){var h=null;d=this.prop(d);this.binds[d.name]&&(h=delete this.binds[d.name],this.destroy());return h},isPropReady:function(d){d=this.prop(d);return void 0!==this.binds[d.name]?!0:!1},destroy:function(){return 0===
Object.keys(this.binds).length?(this._destroy(),delete this.node[l.props.STORAGE_PROPERTY]):!1}};return new h(d)}},bind:function(e,h,g){function m(b,d){var h=!1;d.split(".").forEach(function(d,k,a){void 0!==b[d]&&k<a.length-1?b=b[d]:void 0!==b[d]&&k===a.length-1&&(h=!0)});return h}var b=l.props.STORAGE_PROPERTY;if(null!==p.attach){if(void 0!==e&&"string"===typeof h&&"function"===typeof g&&void 0!==e.nodeName&&m(e,h))return e[b]||(e[b]=q.storage.create(e),e[b].init()),b=e[b],b.isPropReady(h)||b.make(h),
b.add(h,g);throw"props.bind::"+d.objects.INCORRECT_ARGUMENTS;}},unbind:function(e,h,g){var m=l.props.STORAGE_PROPERTY;if("object"===typeof e&&"string"===typeof h&&"string"===typeof g)return e[m]&&(m=e[m],m.isPropReady(h))?m.remove(h,g):null;throw"props.unbind::"+d.objects.INCORRECT_ARGUMENTS;},kill:function(e,h){var g=l.props.STORAGE_PROPERTY;if("object"===typeof e&&"string"===typeof h)return e[g]&&(g=e[g],g.isPropReady(h))?g.kill(h):null;throw"props.unbind::"+d.objects.INCORRECT_ARGUMENTS;}},p={init:function(){p.attach=
p.attach()},mutationObserver:function(d,h,g,e){var b=null,b=new (window.MutationObserver||window.WebKitMutationObserver)(function(b){b.forEach(function(b){h.call(g,b.attributeName,b)})});b.observe(d,e);return function(){b.disconnect()}},DOMAttrModified:function(d,h,g){flex.events.DOM.add(d,"DOMAttrModified",function(d){h.call(g,event.attrName,d)});return function(){}},onPropertyChange:function(d,h,g){flex.events.DOM.add(d,"propertychange",function(d){h.call(g,event.attributeName,d)});return function(){}},
attach:function(){return window.MutationObserver||window.WebKitMutationObserver?p.mutationObserver:function(){var d=document.createElement("DIV"),h=!1;flex.events.DOM.add(d,"DOMAttrModified",function(){h=!0});d.setAttribute("id","test");return h}()?p.DOMAttrModified:"onpropertychange"in document.body?p.onPropertyChange:null}},n={init:function(){flex.callers.define.object("binding.bind",function(d,h){return t.bind(this.target,d,h)});flex.callers.define.object("binding.unbind",function(d,h){return t.unbind(this.target,
d,h)});flex.callers.define.object("binding.kill",function(d){return t.kill(this.target,d)});flex.callers.define.node("bindingAttrs.bind",function(d,h){return e.bind(this.target,d,h)});flex.callers.define.node("bindingAttrs.unbind",function(d,h){return e.unbind(this.target,d,h)});flex.callers.define.node("bindingAttrs.kill",function(d){return e.kill(this.target,d)});flex.callers.define.nodes("bindingAttrs.bind",function(d,h){var g=[];SelectorClass();Array.prototype.forEach.call(this.target,function(m){g.push(e.bind(m,
d,h))});return g});flex.callers.define.nodes("bindingAttrs.unbind",function(d,h){var g=[];SelectorClass();Array.prototype.forEach.call(this.target,function(m){g.push(e.unbind(m,d,h))});return g});flex.callers.define.nodes("bindingAttrs.kill",function(d){var h=[];SelectorClass();Array.prototype.forEach.call(this.target,function(g){h.push(e.kill(g,d))});return h});flex.callers.define.node("bindingProps.bind",function(d,h){return q.bind(this.target,d,h)});flex.callers.define.node("bindingProps.unbind",
function(d,h){return q.unbind(this.target,d,h)});flex.callers.define.node("bindingProps.kill",function(d){return q.kill(this.target,d)});flex.callers.define.nodes("bindingProps.bind",function(d,h){var g=[];SelectorClass();Array.prototype.forEach.call(this.target,function(e){g.push(q.bind(e,d,h))});return g});flex.callers.define.nodes("bindingProps.unbind",function(d,h){var g=[];SelectorClass();Array.prototype.forEach.call(this.target,function(e){g.push(q.unbind(e,d,h))});return g});flex.callers.define.nodes("bindingProps.kill",
function(d){var h=[];SelectorClass();Array.prototype.forEach.call(this.target,function(g){h.push(q.kill(g,d))});return h})}},r={check:function(){if(!Object.defineProperty)throw d.support.DEFINE_PROPERTY;if(null===p.attach)throw d.support.MUTATION_SCANNING;}};p.init();n.init();r.check();return{}};Q.prototype=function(){function t(d){d=d||null;d=_nodes("*["+n.CONTAINER+(null!==d?'="'+d+'"':"")+"]:not(["+n.INITED+"])").target;null!==d&&Array.prototype.forEach.call(d,function(d){var e=d.getAttribute(n.CONTAINER);
""!==e&&null!==e||d.setAttribute(n.CONTAINER,flex.unique());d.setAttribute(n.INITED,!0)})}var e=null,q=null,p=null,n=null,l=null,n={CONTAINER:"data-flex-ui-window-focus",INITED:"data-flex-window-focus-inited",GLOBAL_GROUP:"flex-window-focus-global-group",GLOBAL_EVENT_FLAG:"flex-window-focus-global-event",GLOBAL_CURRENT:"flex-window-focus-global-current",GLOBAL_EVENT_ID:"flex-window-focus-global-event-id",FOCUSED_ZINDEX:1E3},q={attach:function(){!0!==flex.overhead.globaly.get(n.GLOBAL_GROUP,n.GLOBAL_EVENT_FLAG)&&
(flex.overhead.globaly.set(n.GLOBAL_GROUP,n.GLOBAL_EVENT_FLAG,!0),_node(window).events().add("click",function(d){p.onClick(d);return!0},n.GLOBAL_EVENT_ID))}},p={getContainer:function(d){var e;if("function"===typeof d.getAttribute&&(e=d.getAttribute(n.CONTAINER),""!==e&&null!==e))return{container:d,id:e};d=_node(d).html().find().parentByAttr({name:n.CONTAINER,value:null});return null!==d?{container:d,id:d.getAttribute(n.CONTAINER)}:null},history:{is:function(d){return flex.overhead.globaly.get(n.GLOBAL_GROUP,
n.GLOBAL_CURRENT)!==d?!1:!0},set:function(d){flex.overhead.globaly.set(n.GLOBAL_GROUP,n.GLOBAL_CURRENT,d)},get:function(){return flex.overhead.globaly.get(n.GLOBAL_GROUP,n.GLOBAL_CURRENT)},del:function(){flex.overhead.globaly.del(n.GLOBAL_GROUP,n.GLOBAL_CURRENT)}},onClick:function(d){d=p.getContainer(d.flex.target);var e=p.history.get();null!==e&&p.focus.unset(e);null!==d&&!1===p.history.is(d.id)&&p.focus.set(d.id)},focus:{zIndex:function(d,e){var l=_node("*["+n.CONTAINER+'="'+d+'"]').target;null!==
l&&(l.style.zIndex=e)},set:function(d){p.focus.zIndex(d,n.FOCUSED_ZINDEX);p.history.set(d)},unset:function(d){p.focus.zIndex(d,"");p.history.del(d)}}},l={attach:function(){flex.events.core.listen(flex.registry.events.ui.patterns.GROUP,flex.registry.events.ui.patterns.MOUNTED,function(d){d=void 0!==d.length?0<d.length?d[0].parentNode:null:null;null!==d&&null!==_node("*["+n.CONTAINER+"]:not(["+n.INITED+"])",!1,d).target&&t()})}},e={init:t};q.attach();l.attach();void 0!==flex.libraries&&void 0!==flex.libraries.events&&
void 0!==flex.libraries.html&&(flex.libraries.events.create(),flex.libraries.html.create());return{init:e.init}};T.prototype=function(){function t(e){e=e||null;e=_nodes("*["+p.CONTAINER+(null!==e?'="'+e+'"':"")+"]:not(["+p.INITED+"])").target;null!==e&&Array.prototype.forEach.call(e,function(e){var d=e.getAttribute(p.CONTAINER),r;""!==d&&null!==d&&(r=_nodes("*["+p.HOOK+'="'+d+'"]').target,null!==r&&q.attach(e,r,d));e.setAttribute(p.INITED,!0);e.setAttribute(p.STATE,"false");flex.overhead.objecty.set(e,
p.STORAGE,{maximazed:!1},!0)})}var e=null,q=e=null,p=null,p={CONTAINER:"data-flex-ui-window-maximize",HOOK:"data-flex-window-maximize-hook",INITED:"data-flex-window-maximize-inited",STATE:"data-flex-window-is-maximized",STORAGE:"flex-window-maximize-storage"},q={attach:function(e,l,d){Array.prototype.forEach.call(l,function(r,l){_node(r).events().add("click",function(h){q.onClick(h,e,d);return!0},d+"_"+l)})},onClick:function(e,l,d){e=flex.overhead.objecty.get(l,p.STORAGE,!1);null!==e&&(!1===e.maximazed?
q.actions.maximaze(l,e,d):q.actions.restore(l,e,d),setTimeout(function(){flex.events.core.fire(flex.registry.events.ui.window.maximize.GROUP,flex.registry.events.ui.window.maximize.CHANGE,{container:l,id:d})},10))},actions:{maximaze:function(e,l,d){l.maximazed=!0;l.size={position:""!==e.style.position?e.style.position:!1,width:""!==e.style.width?e.style.width:!1,height:""!==e.style.height?e.style.height:!1,left:""!==e.style.left?e.style.left:!1,top:""!==e.style.top?e.style.top:!1};e.style.position=
"fixed";e.style.width="100%";e.style.height="100%";e.style.left="0px";e.style.top="0px";e.setAttribute(p.STATE,"true");setTimeout(function(){flex.events.core.fire(flex.registry.events.ui.window.maximize.GROUP,flex.registry.events.ui.window.maximize.MAXIMIZED,{container:e,id:d})},10)},restore:function(e,l,d){l.maximazed=!1;e.style.position=!1!==l.size.position?l.size.position:"";e.style.width=!1!==l.size.width?l.size.width:"";e.style.height=!1!==l.size.height?l.size.height:"";e.style.left=!1!==l.size.left?
l.size.left:"";e.style.top=!1!==l.size.top?l.size.top:"";e.setAttribute(p.STATE,"false");setTimeout(function(){flex.events.core.fire(flex.registry.events.ui.window.maximize.GROUP,flex.registry.events.ui.window.maximize.RESTORED,{container:e,id:d})},10)},byID:{findByID:function(e){e=e||null;var l=null,d=[];return null!==e&&(l=_nodes("*["+p.CONTAINER+(null!==e?'="'+e+'"':"")+"]").target,null!==l&&0<l.length)?(Array.prototype.forEach.call(l,function(e){var l=flex.overhead.objecty.get(e,p.STORAGE,!1);
null!==l&&d.push({container:e,storage:l})}),0<d.length?d:null):null},maximaze:function(e){var l=q.actions.byID.findByID(e);null!==l&&l.forEach(function(d){q.actions.maximaze(d.container,d.storage,e)})},restore:function(e){var l=q.actions.byID.findByID(e);null!==l&&l.forEach(function(d){q.actions.restore(d.container,d.storage,e)})}}}},e={attach:function(){flex.events.core.listen(flex.registry.events.ui.patterns.GROUP,flex.registry.events.ui.patterns.MOUNTED,function(e){e=void 0!==e.length?0<e.length?
e[0].parentNode:null:null;null!==e&&null!==_node("*["+p.CONTAINER+"]:not(["+p.INITED+"])",!1,e).target&&t()})}};void 0!==flex.libraries&&void 0!==flex.libraries.events&&flex.libraries.events.create();e.attach();e={init:t,maximaze:q.actions.byID.maximaze,restore:q.actions.byID.restore};return{init:e.init,maximaze:e.maximaze,restore:e.restore}};R.prototype=function(){function t(d){d=d||null;d=_nodes("*["+l.CONTAINER+(null!==d?'="'+d+'"':"")+"]:not(["+l.INITED+"])").target;null!==d&&Array.prototype.forEach.call(d,
function(d){var e=d.getAttribute(l.CONTAINER),h;""!==e&&null!==e&&(h=_nodes("*["+l.HOOK+'="'+e+'"]').target,null!==h&&(q.attach(d,h,e),p.attach(d,e)));d.setAttribute(l.INITED,!0)})}var e=null,q=null,p=null,n=null,l=null,l={CONTAINER:"data-flex-ui-window-move-container",HOOK:"data-flex-ui-window-move-hook",INITED:"data-flex-window-move-inited",GLOBAL_GROUP:"flex-window-move",GLOBAL_EVENT_FLAG:"flex-window-move-global-event",GLOBAL_CURRENT:"flex-window-move-global-current",GLOBAL_EVENT_ID:"flex-window-move-global-event-id",
STATE_STORAGE:"flex-window-move-instance-state"},q={attach:function(d,e,l){Array.prototype.forEach.call(e,function(e){_node(e).events().add("mousedown",function(g){q.start(g,d,e,l)},l)})},start:function(d,e,n,h){var g,m,b;return!1===flex.overhead.objecty.get(e,l.STATE_STORAGE,!1,!1)?(g=_node(e).html().position().byPage(),m=_node(e.parentNode).html().scroll().position(),b=e.currentStyle&&e.currentStyle.position?e.currentStyle.position:window.getComputedStyle?window.getComputedStyle(e).position:null,
b="fixed"!==b?!1:!0,flex.overhead.globaly.set(l.GLOBAL_GROUP,l.GLOBAL_CURRENT,{clientX:d.flex.clientX,clientY:d.flex.clientY,offsetX:d.flex.offsetX,offsetY:d.flex.offsetY,pageX:d.flex.pageX,pageY:d.flex.pageY,hook:n,container:e,id:h,oldX:d.flex.pageX,oldY:d.flex.pageY,posX:g.left+(!1===b?m.left():0),posY:g.top+(!1===b?m.top():0)}),d.flex.stop()):!0},move:function(d){var e=flex.overhead.globaly.get(l.GLOBAL_GROUP,l.GLOBAL_CURRENT),n;null!==e&&(n=e.container,e.posX-=e.oldX-d.flex.pageX,e.posY-=e.oldY-
d.flex.pageY,n.style.left=e.posX+"px",n.style.top=e.posY+"px",e.oldX=d.flex.pageX,e.oldY=d.flex.pageY);return d.flex.stop()},stop:function(d){flex.overhead.globaly.del(l.GLOBAL_GROUP,l.GLOBAL_CURRENT)},global:{attach:function(){!0!==flex.overhead.globaly.get(l.GLOBAL_GROUP,l.GLOBAL_EVENT_FLAG)&&(flex.overhead.globaly.set(l.GLOBAL_GROUP,l.GLOBAL_EVENT_FLAG,!0),_node(window).events().add("mousemove",function(d){q.move(d)},l.GLOBAL_EVENT_ID),_node(window).events().add("mouseup",function(d){q.stop(d)},
l.GLOBAL_EVENT_ID))}}},p={attach:function(d,e){flex.events.core.listen(flex.registry.events.ui.window.maximize.GROUP,flex.registry.events.ui.window.maximize.MAXIMIZED,function(e){return p.onRefreshByParent(e.container,d,flex.registry.events.ui.window.maximize.MAXIMIZED)},l.STATE_STORAGE+e,!1);flex.events.core.listen(flex.registry.events.ui.window.maximize.GROUP,flex.registry.events.ui.window.maximize.RESTORED,function(e){return p.onRefreshByParent(e.container,d,flex.registry.events.ui.window.maximize.RESTORED)},
l.STATE_STORAGE+e,!1)},onRefreshByParent:function(d,e,n){if(d===e)switch(n){case flex.registry.events.ui.window.maximize.MAXIMIZED:flex.overhead.objecty.set(e,l.STATE_STORAGE,!0,!0);break;case flex.registry.events.ui.window.maximize.RESTORED:flex.overhead.objecty.set(e,l.STATE_STORAGE,!1,!0)}return!1}},n={attach:function(){flex.events.core.listen(flex.registry.events.ui.patterns.GROUP,flex.registry.events.ui.patterns.MOUNTED,function(d){d=void 0!==d.length?0<d.length?d[0].parentNode:null:null;null!==
d&&null!==_node("*["+l.CONTAINER+"]:not(["+l.INITED+"])",!1,d).target&&t()})}},e={init:t};q.global.attach();n.attach();void 0!==flex.libraries&&void 0!==flex.libraries.events&&void 0!==flex.libraries.html&&(flex.libraries.events.create(),flex.libraries.html.create());return{init:e.init}};S.prototype=function(){function t(d){d=d||null;d=_nodes("*["+l.CONTAINER+(null!==d?'="'+d+'"':"")+"]:not(["+l.INITED+"])").target;null!==d&&Array.prototype.forEach.call(d,function(d){var e=d.getAttribute(l.CONTAINER);
null!==e&&""!==e&&Array.prototype.forEach.call(l.HOOKS,function(h){var g=q.hooks.get(e,d,h);q.attach(d,g,h,e);n.attach(d,e)});d.setAttribute(l.INITED,!0)})}var e=null,q=null,p=null,n=null,l=null,l={CONTAINER:"data-flex-ui-window-resize-container",INITED:"data-flex-window-resize-inited",HOOK:"data-flex-window-resize-hook",HOOKS:["top","left","right","bottom","corner"],HOOKS_STYLE:{top:{node:"div",style:{position:"absolute",zIndex:1,height:"6px",width:"100%",top:"0px",left:"0px",cursor:"n-resize"}},
bottom:{node:"div",style:{position:"absolute",zIndex:1,height:"6px",width:"100%",bottom:"0px",left:"0px",cursor:"n-resize"}},left:{node:"div",style:{position:"absolute",zIndex:1,height:"100%",width:"6px",top:"0px",left:"0px",cursor:"e-resize"}},right:{node:"div",style:{position:"absolute",zIndex:1,height:"100%",width:"6px",top:"0px",right:"0px",cursor:"e-resize"}},corner:{node:"div",style:{position:"absolute",zIndex:1,height:"10px",width:"10px",bottom:"0px",right:"0px",cursor:"nw-resize"}}},POSITION_PARENT:"data-flex-ui-window-resize-position-parent",
GLOBAL_GROUP:"flex-window-resize",GLOBAL_EVENT_FLAG:"flex-window-resize-global-event",GLOBAL_CURRENT:"flex-window-resize-global-current",GLOBAL_EVENT_ID:"flex-window-resize-global-event-id",STATE_STORAGE:"flex-window-resize-instance-state"},q={position:{getParent:function(d){return _node("*["+l.POSITION_PARENT+'="'+d+'"]').target}},hooks:{make:function(d,e){var n=document.createElement(l.HOOKS_STYLE[e].node),h;for(h in l.HOOKS_STYLE[e].style)n.style[h]=l.HOOKS_STYLE[e].style[h];d.appendChild(n);return n},
get:function(d,e,n){d=_nodes("*["+l.CONTAINER+'="'+d+'"]['+l.HOOK+'="'+n+'"]:not(['+l.INITED+"])").target;0===d.length&&(d=[],d.push(q.hooks.make(e,n)));return d}},attach:function(d,e,l,h){var g=q.position.getParent(h);Array.prototype.forEach.call(e,function(e){_node(e).events().add("mousedown",function(b){q.start(b,d,e,l,g,h)},h)})},start:function(d,e,n,h,g,m){var b,c,k,C;return!1===flex.overhead.objecty.get(e,l.STATE_STORAGE,!1,!1)?(b=_node(e).html().size().get(),c=_node(null!==g?g:e).html().position().byPage(),
k=_node(e.parentNode).html().scroll().position(),C=e.currentStyle&&e.currentStyle.position?e.currentStyle.position:window.getComputedStyle?window.getComputedStyle(e).position:null,C="fixed"!==C?!1:!0,flex.overhead.globaly.set(l.GLOBAL_GROUP,l.GLOBAL_CURRENT,{clientX:d.flex.clientX,clientY:d.flex.clientY,offsetX:d.flex.offsetX,offsetY:d.flex.offsetY,pageX:d.flex.pageX,pageY:d.flex.pageY,hook:n,direction:h,container:e,position_parent:g,id:m,oldX:d.flex.pageX,oldY:d.flex.pageY,posX:c.left+(!1===C?k.left():
0),posY:c.top+(!1===C?k.top():0),width:b.width,height:b.height}),d.flex.stop()):!0},move:function(d){var e=flex.overhead.globaly.get(l.GLOBAL_GROUP,l.GLOBAL_CURRENT),n=null,h=null;if(null!==e){n=e.container;h=null!==e.position_parent?e.position_parent:n;switch(e.direction){case "top":e.posY-=e.oldY-d.flex.pageY;e.height+=e.oldY-d.flex.pageY;n.style.height=e.height+"px";h.style.top=e.posY+"px";break;case "left":e.posX-=e.oldX-d.flex.pageX;e.width+=e.oldX-d.flex.pageX;n.style.width=e.width+"px";h.style.left=
e.posX+"px";break;case "bottom":e.height-=e.oldY-d.flex.pageY;n.style.height=e.height+"px";break;case "right":e.width-=e.oldX-d.flex.pageX;n.style.width=e.width+"px";break;case "corner":e.height-=e.oldY-d.flex.pageY,n.style.height=e.height+"px",e.width-=e.oldX-d.flex.pageX,n.style.width=e.width+"px"}e.oldX=d.flex.pageX;e.oldY=d.flex.pageY;setTimeout(function(){flex.events.core.fire(flex.registry.events.ui.window.resize.GROUP,flex.registry.events.ui.window.resize.REFRESH,{container:e.container,id:e.id})},
10)}return d.flex.stop()},stop:function(d){d=flex.overhead.globaly.get(l.GLOBAL_GROUP,l.GLOBAL_CURRENT);null!==d&&flex.events.core.fire(flex.registry.events.ui.window.resize.GROUP,flex.registry.events.ui.window.resize.FINISH,{container:d.container,id:d.id});flex.overhead.globaly.del(l.GLOBAL_GROUP,l.GLOBAL_CURRENT)},global:{attach:function(){!0!==flex.overhead.globaly.get(l.GLOBAL_GROUP,l.GLOBAL_EVENT_FLAG)&&(flex.overhead.globaly.set(l.GLOBAL_GROUP,l.GLOBAL_EVENT_FLAG,!0),_node(window).events().add("mousemove",
function(d){q.move(d)},l.GLOBAL_EVENT_ID),_node(window).events().add("mouseup",function(d){q.stop(d)},l.GLOBAL_EVENT_ID))}}},n={attach:function(d,e){flex.events.core.listen(flex.registry.events.ui.window.maximize.GROUP,flex.registry.events.ui.window.maximize.MAXIMIZED,function(e){return n.onRefreshByParent(e.container,d,flex.registry.events.ui.window.maximize.MAXIMIZED)},l.STATE_STORAGE+e,!1);flex.events.core.listen(flex.registry.events.ui.window.maximize.GROUP,flex.registry.events.ui.window.maximize.RESTORED,
function(e){return n.onRefreshByParent(e.container,d,flex.registry.events.ui.window.maximize.RESTORED)},l.STATE_STORAGE+e,!1)},onRefreshByParent:function(d,e,n){if(d===e)switch(n){case flex.registry.events.ui.window.maximize.MAXIMIZED:flex.overhead.objecty.set(e,l.STATE_STORAGE,!0,!0);break;case flex.registry.events.ui.window.maximize.RESTORED:flex.overhead.objecty.set(e,l.STATE_STORAGE,!1,!0)}return!1}},p={attach:function(){flex.events.core.listen(flex.registry.events.ui.patterns.GROUP,flex.registry.events.ui.patterns.MOUNTED,
function(d){d=void 0!==d.length?0<d.length?d[0].parentNode:null:null;null!==d&&null!==_node("*["+l.CONTAINER+"]:not(["+l.INITED+"])",!1,d).target&&t()})}},e={init:t};q.global.attach();p.attach();void 0!==flex.libraries&&void 0!==flex.libraries.events&&void 0!==flex.libraries.html&&(flex.libraries.events.create(),flex.libraries.html.create());return{init:e.init}};P.prototype=function(){var t=null,e=null,q=null,p=null,n=null,l=q=null,d=null,r=null,v=null,h=null,g=null,g={storage:{GROUP:"flex.html",
SCROLL:"scroll",CUSTOM_STYLES:"custom.styles"},classes:{scroll:{MINIMAL_WIDTH:15,MINIMAL_HEIGHT:15}}},t={bySelector:function(){var d=function(){};d.prototype=function(){var b=null,c=null,b={data:{},get:function(c){var d=b.data;return void 0!==d[c]?d[c]:null},add:function(c,d){return b.data[c]=d},remove:function(c){var d=b.data;d[c]=null;delete d[c]},reset:function(){b.data={}}},c={first:function(b,c){return"string"===typeof b?(c||document).querySelector(b):null},all:function(b,c){return"string"===
typeof b?(c||document).querySelectorAll(b):null},cachedFirst:function(c,d){var e;return"string"===typeof c?(e=b.get(c),null===e&&(e=b.add((d||document).querySelector(c))),e):null},cachedAll:function(c,d){var e;return"string"===typeof c?(e=b.get(c),null===e&&(e=b.add((d||document).querySelectorAll(c))),e):null},cacheReset:b.reset,cacheRemove:b.remove};return{first:c.first,all:c.all,cachedFirst:c.cachedFirst,cachedAll:c.cachedAll,cacheReset:c.cacheReset,cacheRemove:c.cacheRemove}}();return new d},fromParent:function(){var d=
function(){this.selector=t.bySelector()};d.prototype={selector:null,select:function(b,c,d){var e=flex.unique(),h=null,g="data-"+e;"string"===typeof b.nodeName&&(b.setAttribute(g,e),h=this.selector[!1===d?"all":"first"](b.nodeName+"["+g+'="'+e+'"] '+c),b.removeAttribute(g));return h},first:function(b,c){return this.select(b,c,!0)},all:function(b,c){return this.select(b,c,!1)}};return Object.freeze(new d)}},e=function(){var d=function(){};d.prototype={childByAttr:function(b,c,d){var e=null;c=c.toLowerCase();
var h=this;void 0!==b.childNodes&&"number"===typeof b.childNodes.length&&Array.prototype.forEach.call(b.childNodes,function(b){if("string"===typeof b.nodeName&&(b.nodeName.toLowerCase()===c||"*"===c)&&"function"===typeof b.getAttribute)if(null!==d.value){if(b.getAttribute(d.name)===d.value)return b}else if(!0===b.hasAttribute(d.name))return b;e=h.childByAttr(b,c,d);if(null!==e)return e});return null},childByType:function(b,c){var d=null;c=c.toLowerCase();var e=this;void 0!==b.childNodes&&"number"===
typeof b.childNodes.length&&(Array.prototype.forEach.call(b.childNodes,function(b){if("string"===typeof b.nodeName&&b.nodeName.toLowerCase()===c)return b}),Array.prototype.forEach.call(b.childNodes,function(b){d=e.childByType(b,c);if(null!==d)return d}));return null},parentByAttr:function(b,c){return void 0!==b&&void 0!==c&&void 0!==b.parentNode&&null!==b.parentNode&&"function"===typeof b.parentNode.getAttribute?null!==c.value?b.parentNode.getAttribute(c.name)===c.value?b.parentNode:this.parentByAttr(b.parentNode,
c):null!==b.parentNode.getAttribute(c.name)?b.parentNode:this.parentByAttr(b.parentNode,c):null}};return new d},p=function(){var d=function(){};d.prototype={nodeByClientRectSize:function(b){var c=0,d=0;void 0!==b.getBoundingClientRect&&(b=b.getBoundingClientRect(),c=b.bottom-b.top,d=b.right-b.left);return{height:c,width:d}},nodeByOffset:function(b){var c=0,d=0;void 0!==b.offsetHeight&&(c=b.offsetHeight,d=b.offsetWidth);return{height:c,width:d}},nodeWithMargin:function(b){var c,d=this.node(b),e,h,
g,a,f,m,l,n;"string"===typeof b&&(c=t.bySelector(),b=c.first(b));null!==b&&(e=parseInt(document.defaultView.getComputedStyle(b).marginTop,10),h=parseInt(document.defaultView.getComputedStyle(b).marginBottom,10),g=parseInt(document.defaultView.getComputedStyle(b).marginRight,10),a=parseInt(document.defaultView.getComputedStyle(b).marginLeft,10),f=parseInt(document.defaultView.getComputedStyle(b).borderTopWidth,10),m=parseInt(document.defaultView.getComputedStyle(b).borderBottomWidth,10),l=parseInt(document.defaultView.getComputedStyle(b).borderRightWidth,
10),n=parseInt(document.defaultView.getComputedStyle(b).borderLeftWidth,10),null===e&&(e=0),null===h&&(h=0),null===g&&(g=0),null===a&&(a=0),null===f&&(f=0),null===m&&(m=0),null===l&&(l=0),null===n&&(n=0));return{height:d.height+e+h+f+m,width:d.width+g+a+l+n}},node:function(b){var c,d={height:0,width:0};"string"===typeof b&&(c=t.bySelector(),b=c.first(b));null!==b&&(d=this.nodeByClientRectSize(b),0===d.height&&0===d.width&&(d=this.nodeByOffset(b)));return d},window:function(){return self.innerHeight?
{height:self.innerHeight,width:self.innerWidth}:document.documentElement&&document.documentElement.clientHeight?{height:document.documentElement.clientHeight,width:document.documentElement.clientWidth}:document.body?{height:document.body.clientHeight,width:document.body.clientWidth}:null},image:function(b){if(void 0!==b){if("number"===typeof b.naturalWidth)return{width:b.naturalWidth,height:b.naturalHeight};var c=new Image;c.src=b.src;return{width:c.width,height:c.height}}return null}};return new d},
n=function(){var d=function(){};d.prototype={window:function(){var b=document.body,c=document.documentElement;return{top:function(){return Math.max(b.scrollTop||0,c.scrollTop||0,b.pageYOffset||0,c.pageYOffset||0,window.pageYOffset||0)},left:function(){return Math.max(b.scrollLeft||0,c.scrollLeft||0,b.pageXOffset||0,c.pageXOffset||0,window.pageXOffset||0)},height:function(){return Math.max(b.scrollHeight||0,b.offsetHeight||0,c.clientHeight||0,c.scrollHeight||0,c.offsetHeight||0)},width:function(){return Math.max(b.scrollWidth||
0,b.offsetWidth||0,c.clientWidth||0,c.scrollWidth||0,c.offsetWidth||0)}}},get:function(b){return b!==document.body&&b!==document.documentElement?{top:function(){return Math.max(b.scrollTop||0,b.pageYOffset||0)},left:function(){return Math.max(b.scrollLeft||0,b.pageXOffset||0)},height:function(){return Math.max(b.scrollHeight||0,b.clientHeight||0,b.offsetHeight||0)},width:function(){return Math.max(b.scrollWidth||0,b.clientWidth||0,b.offsetWidth||0)}}:this.window()},scrollBarSize:function(){var b=
flex.overhead.globaly.get(g.storage.GROUP,g.storage.SCROLL,{});if(!b.value){var c=document.createElement("DIV"),d;l().apply(c,{position:"absolute",top:"-1000px",left:"-1000px",width:"300px",height:"300px",overflow:"scroll",opacity:"0.01"});document.body.appendChild(c);d={width:c.offsetWidth-c.clientWidth,height:c.offsetHeight-c.clientHeight};d.probablyMobile=0===d.width?!0:!1;d.width=0===d.width?g.classes.scroll.MINIMAL_WIDTH:d.width;d.height=0===d.height?g.classes.scroll.MINIMAL_HEIGHT:d.height;
document.body.removeChild(c);b.value=d}return b.value}};return new d},q=function(){var d=function(){};d.prototype={build:function(b){function c(a,b){var c=b[a.settingup.parent]||null;"object"===typeof a.settingup&&null!==b&&null!==c&&Array.prototype.forEach.call(a.settingup.childs,function(d){b[d]&&("object"===typeof a[d].settingup?c.appendChild(b[d][a[d].settingup.parent]):c.appendChild(b[d]))})}function d(a){var b=document.createElement(a.node);null!==a.html&&(b.innerHTML=a.html);Array.prototype.forEach.call(a.attrs,
function(a){!0===flex.oop.objects.validate(a,[{name:"name",type:"string"},{name:"value",type:"string"}])&&b.setAttribute(a.name,a.value)});return b}function e(a){return flex.oop.objects.validate(a,[{name:"node",type:"string"},{name:"attrs",type:"array",value:[]},{name:"html",type:"string",value:null}])}var h={};try{if(!0===e(b))return d(b);for(var g in b)if(!0===e(b[g]))h[g]=d(b[g]);else if("object"===typeof b[g]&&"settingup"!==g&&(h[g]=this.build(b[g]),null===h[g]))return null;c(b,h)}catch(a){return null}return h}};
return new d},l=function(){var d=function(){};d.prototype={apply:function(b,c){if(b&&"object"===typeof c&&b.style){for(var d in c)b.style[d]=c[d];return!0}return!1},redraw:function(b){return b&&void 0!==b.style?(b.style.display="none",b.style.display="",!0):!1},getRuleFromSheet:function(b,c){var d=[];try{c=c.replace(/['"]/gi,"|"),Array.prototype.forEach.call(b.cssRules||b.rules,function(b,e){b.selectorText?b.selectorText.replace(/['"]/gi,"|")===c&&d.push({rule:b,style:b.style||null,index:e,cssText:b.cssText||
""}):"string"===typeof b.cssText&&0===b.cssText.indexOf(c.toLowerCase())&&d.push({rule:b,style:b.style||null,index:e,cssText:b.cssText||""})})}catch(e){}finally{return 0<d.length?d:null}},getRule:function(b){var c=[],d=this;try{b=b.replace(/['"]/gi,"|"),Array.prototype.forEach.call(document.styleSheets,function(e){e=d.getRuleFromSheet(e,b);null!==e&&(c=c.concat(e))})}catch(e){}finally{return 0<c.length?c:null}},setRule:function(b,c){var d=flex.overhead.globaly.get(g.storage.GROUP,g.storage.CUSTOM_STYLES);
if("string"===typeof c){null===d&&(d=document.createElement("style"),d.type="text/css",document.head.appendChild(d),d=d.styleSheet||d.sheet,flex.overhead.globaly.set(g.storage.GROUP,g.storage.CUSTOM_STYLES,d));if(d.insertRule)return d.insertRule(b+" {"+c+"}",d.cssRules.length),{rule:d.cssRules[d.cssRules.length-1],index:d.cssRules.length-1,sheet:d};if(d.addRule)return d.addRule(b+" {"+c+"}",-1),{rule:d.cssRules[d.cssRules.length-1],index:d.cssRules.length-1,sheet:d}}return null},updateRule:function(b,
c,d){var e=c.selectorText;this.deleteRule(b,c);return this.setRule(e,d)},deleteRule:function(b,c,d){b=b||flex.overhead.globaly.get(g.storage.GROUP,g.storage.CUSTOM_STYLES);a:{var e=b;if(void 0!==c)if("string"===typeof c){if(c=!1===("boolean"===typeof d?d:!0)&&null!==e?this.getRuleFromSheet(e,c):this.getRule(c),null!==c&&1===c.length){c=c[0].index;break a}}else if("number"===typeof c)break a;else if("object"===typeof c&&null!==e){c=this.getRuleIndex(e,c);break a}c=-1}if(-1!==c&&null!==b){if(b.deleteRule)return b.deleteRule(c),
!0;if(b.removeRule)return b.removeRule(c),!0}return null},getRuleIndex:function(b,c){var d=-1;try{Array.prototype.forEach.call(b.cssRules,function(b,e){if(b===c)throw d=e,"found";})}catch(e){if("found"===e)return d}return-1},addClass:function(b,c){void 0!==b.className&&-1===b.className.search(c)&&(b.className+=c)},removeClass:function(b,c){void 0!==b.className&&-1!==b.className.search(c)&&(b.className=b.className.replace(c,""))}};return new d},d=function(){var e=function(){};e.prototype=function(){var b=
null,c=null,b=null;d={old:function(b){for(var c=0,d=0;b;)void 0!==b.offsetTop&&void 0!==b.offsetLeft&&(c+=parseFloat(b.offsetTop),d+=parseFloat(b.offsetLeft)),b=b.offsetParent;return{top:c,left:d}},modern:function(b){var c,d;b=b.getBoundingClientRect();c=document.body;d=document.documentElement;return{top:b.top+(window.pageYOffset||d.scrollTop||c.scrollTop)-(d.clientTop||c.clientTop||0),left:b.left+(window.pageXOffset||d.scrollLeft||c.scrollLeft)-(d.clientLeft||c.clientLeft||0)}}};b=function(b){var c=
null,e=null,h=null,a=null,f=null,g=null;try{h=b.getBoundingClientRect(),c=h.top,e=h.left}catch(m){a=d.old(b),f=window.pageYOffset||objDocumentElement.scrollTop||objBody.scrollTop,g=window.pageXOffset||objDocumentElement.scrollLeft||objBody.scrollLeft,c=a.top-f,e=a.left-g}finally{return{top:c,left:e}}};c=function(b){var c=null;try{c=d.modern(b)}catch(e){c=d.old(b)}finally{return c}};b={byPage:b,byWindow:c};return{byPage:b.byPage,byWindow:b.byWindow}}();return new e},r=function(){var d=function(){};
d.prototype={em:function(b){b=b||document.documentElement;b=b.parentNode?b:document.documentElement;return parseFloat(getComputedStyle(b).fontSize)},rem:function(){this.em(document.documentElement)}};return new d},v={validateNode:function(d){var b;return d&&("string"===typeof d&&(b=t.bySelector(),d=b.first(d)),null!==d&&void 0!==d.parentNode)?d:null},appendChilds:function(d,b){for(var c=b.length-1;0<=c;--c)d.appendChild(b[0])}},h={init:function(){function h(){null===q&&(q=p())}function b(){null===
v&&(v=d())}function c(){null===a&&(a=l())}function g(){null===H&&(H=e())}function r(){null===V&&(V=t.fromParent())}var q=null,v=null,a=null,f=null,H=null,V=null;flex.callers.define.node("html.size.get",function(){h();return q.node(this.target)});flex.callers.define.node("html.size.getWithMargin",function(){h();return q.nodeWithMargin(this.target)});flex.callers.define.node("html.size.getByClientRectSize",function(){h();return q.nodeByClientRectSize(this.target)});flex.callers.define.node("html.size.getByOffset",
function(){h();return q.nodeByOffset(this.target)});flex.callers.define.node("html.position.byPage",function(){b();return v.byPage(this.target)});flex.callers.define.node("html.position.byWindow",function(){b();return v.byWindow(this.target)});flex.callers.define.node("html.styles.apply",function(b){c();return a.apply(this.target,b)});flex.callers.define.node("html.styles.redraw",function(){c();return a.redraw(this.target)});flex.callers.define.node("html.styles.addClass",function(b){c();return a.addClass(this.target,
b)});flex.callers.define.node("html.styles.removeClass",function(b){c();return a.removeClass(this.target,b)});flex.callers.define.node("html.scroll.position",function(){null===f&&(f=n());return f.get(this.target)});flex.callers.define.node("html.find.childByAttr",function(a,b){g();return H.childByAttr(this.target,a,b)});flex.callers.define.node("html.find.childByType",function(a){g();return H.childByType(this.target,a)});flex.callers.define.node("html.find.parentByAttr",function(a){g();return H.parentByAttr(this.target,
a)});flex.callers.define.node("html.find.node",function(a){r();return V.first(this.target,a)});flex.callers.define.node("html.find.nodes",function(a){r();return V.all(this.target,a)});flex.callers.define.nodes("html.size.get",function(){var a=[];h();Array.prototype.forEach.call(this.target,function(b){a.push(q.node(b))});return a});flex.callers.define.nodes("html.size.getWithMargin",function(){var a=[];h();Array.prototype.forEach.call(this.target,function(b){a.push(q.nodeWithMargin(b))});return a});
flex.callers.define.nodes("html.size.getByClientRectSize",function(){var a=[];h();Array.prototype.forEach.call(this.target,function(b){a.push(q.nodeByClientRectSize(b))});return a});flex.callers.define.nodes("html.size.getByOffset",function(){var a=[];h();Array.prototype.forEach.call(this.target,function(b){a.push(q.nodeByOffset(b))});return a});flex.callers.define.nodes("html.position.byPage",function(){var a=[];b();Array.prototype.forEach.call(this.target,function(b){a.push(v.byPage(b))});return a});
flex.callers.define.nodes("html.position.byWindow",function(){var a=[];b();Array.prototype.forEach.call(this.target,function(b){a.push(v.byWindow(b))});return a});flex.callers.define.nodes("html.styles.apply",function(b){var d=[];c();Array.prototype.forEach.call(this.target,function(c){d.push(a.apply(c,b))});return d});flex.callers.define.nodes("html.styles.redraw",function(){var b=[];c();Array.prototype.forEach.call(this.target,function(c){b.push(a.redraw(c))});return b});flex.callers.define.nodes("html.styles.addClass",
function(b){var d=[];c();Array.prototype.forEach.call(this.target,function(c){d.push(a.addClass(c,b))});return d});flex.callers.define.nodes("html.styles.removeClass",function(b){var d=[];c();Array.prototype.forEach.call(this.target,function(c){d.push(a.removeClass(c,b))});return d});flex.callers.define.nodes("html.scroll.position",function(){var a=[];null===f&&(f=n());Array.prototype.forEach.call(this.target,function(b){a.push(f.get(b))});return a});flex.callers.define.nodes("html.find.childByAttr",
function(a,b){var c=[];g();Array.prototype.forEach.call(this.target,function(d){c.push(H.childByAttr(d,a,b))});return c});flex.callers.define.nodes("html.find.childByType",function(a){var b=[];g();Array.prototype.forEach.call(this.target,function(c){b.push(H.childByType(c,a))});return b});flex.callers.define.nodes("html.find.parentByAttr",function(a){var b=[];g();Array.prototype.forEach.call(this.target,function(c){b.push(H.parentByAttr(c,a))});return b});flex.callers.define.nodes("html.find.node",
function(a){var b=[];r();Array.prototype.forEach.call(this.target,function(c){b.push(a.first(c,a))});return b});flex.callers.define.nodes("html.find.nodes",function(a){var b=[];r();Array.prototype.forEach.call(this.target,function(c){b.push(a.all(c,a))});return b})}};h.init();q={select:{bySelector:t.bySelector,fromParent:t.fromParent},find:e,size:p,scroll:n,builder:q,styles:l,position:d,units:r,helpers:v};return{select:{bySelector:q.select.bySelector,fromParent:q.select.fromParent},find:q.find,size:q.size,
scroll:q.scroll,builder:q.builder,styles:l,position:q.position,units:r,helpers:q.helpers}};U.prototype=function(){var t=null,t=null,t=function(e){function q(d){var e=void 0!==r[d]?d:null;if(null===e)for(var l in t)if(-1!==t[l].indexOf(d)){e=l;break}return e}function p(d){_object(r[d.type]).forEach(function(e,m){m.call(l,d)})}function n(e){void 0===l[e]&&Object.defineProperty(l,e,{configurable:!0,enumerable:!0,get:function(){return d[e]},set:function(g){d[e]=g;p({type:"set",index:e,item:g})}})}var l=
this,d=[],r={set:{},add:{},remove:{}},t={set:["update"],add:["new","push","unshift"],remove:["del","delete","shift","pop"]};Object.defineProperty(l,"bind",{configurable:!1,enumerable:!1,writable:!1,value:function(d,e,l){d=q(d);if(null!==d)if("function"===typeof e)if(l="string"===typeof l?l:flex.unique(),void 0===r[d][l])r[d][l]=e;else throw Error("0002: SAME_ID_OF_HANDLE");else throw Error("0001: HANDLE_ISNOT_FUNCTION");else throw Error("0000: WRONG_EVENT_NAME");}});Object.defineProperty(l,"unbind",
{configurable:!1,enumerable:!1,writable:!1,value:function(d,e){d=q(d);if(null!==d){if("function"===typeof e){for(var l in r[d])if(r[d][l]===e)return delete r[d][l],!0;return!1}if("string"===typeof e)return void 0!==r[d][e]?(delete r[d][e],!0):!1;throw Error("0003: HANDLE_OR_ID_SHOULD_BE");}throw Error("0000: WRONG_EVENT_NAME");}});Object.defineProperty(l,"pop",{configurable:!1,enumerable:!1,writable:!1,value:function(){if(-1<d.length){var e=d.pop();delete l[d.length];p({type:"remove",index:d.length,
item:e});return e}}});Object.defineProperty(l,"push",{configurable:!1,enumerable:!1,writable:!1,value:function(){for(var e=0,g=arguments.length;e<g;e++)d.push(arguments[e]),n(d.length-1),p({type:"add",index:d.length-1,item:arguments[e]});return d.length}});Object.defineProperty(l,"unshift",{configurable:!1,enumerable:!1,writable:!1,value:function(){for(var e=0,g=arguments.length;e<g;e++)d.splice(e,0,arguments[e]),n(d.length-1),p({type:"add",index:e,item:arguments[e]});for(;e<d.length;e++)p({type:"set",
index:e,item:d[e]});return d.length}});Object.defineProperty(l,"shift",{configurable:!1,enumerable:!1,writable:!1,value:function(){var e;if(0<d.length)return e=d.shift(),0===d.length&&delete l[0],p({type:"remove",index:0,item:e}),e}});Object.defineProperty(l,"splice",{configurable:!1,enumerable:!1,writable:!1,value:function(e,g){var m=[],b,c;e=void 0!==e?e>d.length-1?d.length:e:0;g=void 0!==g?g:d.length-e;for(c=0>e?d.length+e:e;g--;)b=d.splice(c,1)[0],m.push(b),delete l[d.length],p({type:"remove",
index:e+m.length-1,item:b});b=2;for(var k=arguments.length;b<k;b++)d.splice(c,0,arguments[b]),n(d.length-1),p({type:"add",index:c,item:arguments[b]}),c++;return m}});Object.defineProperty(l,"fill",{configurable:!1,enumerable:!1,writable:!1,value:function(e,g,l){var b=Object(d);l=void 0===l?d.length:l;var c=b.length>>>0;g=(void 0===g?0:g)>>0;g=0>g?Math.max(c+g,0):Math.min(g,c);l=void 0===l?c:l>>0;for(c=0>l?Math.max(c+l,0):Math.min(l,c);g<c;)b[g]=e,p({type:"set",index:g,item:e}),g++;return b}});Object.defineProperty(l,
"length",{configurable:!1,enumerable:!1,get:function(){return d.length},set:function(e){var g=Number(e);if(0===g%1&&0<=g)g<d.length?l.splice(g):g>d.length&&l.push.apply(l,Array(g-d.length));else throw new RangeError("0004: INVALID_LENGTH");return e}});Object.getOwnPropertyNames(Array.prototype).forEach(function(d){void 0===l[d]&&Object.defineProperty(l,d,{configurable:!1,enumerable:!1,writable:!1,value:Array.prototype[d]})});e instanceof Array&&l.push.apply(l,e)},t={ExArray:t};return{ExArray:t.ExArray}};
M.prototype=function(){var t,e,q,p,n,l,d,r,v,h,g,m,b,c,k,C,G,E,a,f,H,V,x,L,Y,M,K,N,O,P,Q,R,S,T,U,Z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,J={},W,y={},D={},A={},Ca,Da,z={},F,I,u={},X={},w={},B={},J={settings:{CHECK_PATHS_IN_CSS:!0,SHOWN_LOGS:["CRITICAL","LOGICAL","WARNING"]},get:function(){return J.settings},set:function(a){for(var b in a)void 0!==J.settings[b]&&typeof J.settings[b]===typeof a[b]&&(J.settings[b]=a[b])}};g=/\?.*/gi;m=/(\.[\w\n]*)$/gi;b=/[\w]*:\/\/[\w\n:\/\.]*\.js/gi;
c=/[\s\t\n\r]/gi;k=/\.js$/gi;C=/\.css$/gi;W={CORE:"",CORE_URL:"",detect:function(){function a(b){b=u.url.parse(b.toLowerCase());W.CORE=b.target;W.CORE_URL=b.url;return b=b.path}var b=u.resources.js.getCurrentSRC(!0),c=null;if(null!==b)return a(b);if(""!==W.CORE&&(c=document.querySelector('script[src*="'+W.CORE+'"]'),null!==c))return a(c.src);throw Error("Cannot detect URL and PATH to core script. Setup name of manually [options.files.CORE]");}};y={settings:{DEFAULT_TIMEOUT:15E3,DEFAULT_METHOD:"POST",
methods:{POST:"POST",GET:"GET",PUT:"PUT",DELETE:"DELETE",OPTIONS:"OPTIONS"},regs:{URLENCODED:/-urlencoded/gi,JSON:/application\/json/gi},headers:{CONTENT_TYPE:"Content-Type",ACCEPT:"Accept"}},requests:{storage:{},add:function(a){var b=y.requests.storage;return void 0===b[a.settings.id]?(b[a.settings.id]=a,!0):!1},remove:function(a){var b=y.requests.storage;return void 0!==b[a.settings.id]?(b[a.settings.id]=null,delete b[a.settings.id],!0):!1},isConflict:function(a){return void 0===y.requests.storage[a]?
!1:!0}},create:function(a,b,c,d,e){var f=null;a="string"===typeof a?a:null;b="string"===typeof b?-1!==[y.settings.methods.POST,y.settings.methods.GET,y.settings.methods.PUT,y.settings.methods.DELETE,y.settings.methods.OPTIONS].indexOf(b.toUpperCase())?b.toUpperCase():y.settings.DEFAULT_METHOD:y.settings.DEFAULT_METHOD;e=y.parse.settings(e);c=y.parse.parameters(c,e);d=y.parse.callbacks(d);return null!==a?(f=function(a,b,c,d,e){this.settings=e;this.url=a;this.method=b;this.parameters=c;this.callbacks=
d;this.httpRequest=this.responseHeaders=this.response=this.timerID=null},f.prototype={send:function(){var a=this;try{y.requests.add(a);a.httpRequest=new XMLHttpRequest;for(var b in a.events)(function(a,b){D.DOM.add(b.httpRequest,a,function(c){return b.events[a](c,b)})})(b,a);if(null!==a.httpRequest){a.callback(a.callbacks.before);switch(a.method){case y.settings.methods.POST:a.httpRequest.open(a.method,a.url,!0);a.setHeaders(a);a.httpRequest.send(a.parameters._parameters);break;case y.settings.methods.GET:a.httpRequest.open(a.method,
a.url+(""!==a.parameters._parameters?"?":"")+a.parameters._parameters,!0);a.setHeaders(a);a.httpRequest.send();break;default:a.httpRequest.open(a.method,a.url,!0),a.setHeaders(a),a.httpRequest.send(a.parameters._parameters)}a.timerID=setTimeout(function(){a.events.timeout(null,a)},a.settings.timeout);return!0}throw"Fail create XMLHttpRequest";}catch(c){a.callback(a.callbacks.fail,c),a.destroy(a)}},setHeaders:function(a){if(null!==a.settings.headers)for(var b in a.settings.headers)a.httpRequest.setRequestHeader(b,
a.settings.headers[b])},events:{readystatechange:function(a,b){if(!1!==y.requests.isConflict(b.settings.id)&&a.target&&a.target.readyState)switch(b.callback(b.callbacks.reaction,a),a.target.readyState){case 2:b.responseHeaders=b.parseHeaders(a.target.getAllResponseHeaders());b.callback(b.callbacks.headers,a);break;case 4:if(200===a.target.status)return b.response=b.parse(a.target.responseText),b.destroy(b),b.callback(b.callbacks.success,a),!0;b.destroy(b);b.callback(b.callbacks.fail,a);return!1}},
timeout:function(a,b){!1!==y.requests.isConflict(b.settings.id)&&(b.callback(b.callbacks.timeout,a),b.destroy(b))}},parse:function(a){var b={original:a,parsed:null};try{b.parsed=JSON.parse(a)}catch(c){}finally{return b}},parseHeaders:function(a){var b={_headers:a,headers:{}},c=null;"string"===typeof a&&(c=a.split("\r\n"),c instanceof Array&&c.forEach(function(a){var c=a.split(":");c instanceof Array&&""!==c[0]&&(b.headers[c[0]]=a.replace(c[0]+":",""))}));return b},callback:function(a,b){null!==a&&
u.handle(a,[this.response,{id:this.id,event:void 0!==b?b:null,headers:this.responseHeaders,response:this.response,parameters:this.parameters,url:this.url,abort:this.abort.bind(this)}],"ajax.callback:: request ID:: "+this.id+" URL:: "+this.url,this)},abort:function(){null!==this.httpRequest&&"function"===typeof this.httpRequest.abort&&this.httpRequest.abort()},destroy:function(a){clearTimeout(a.timerID);y.requests.remove(a)}},new f(a,b,c,d,e)):null},parse:{settings:function(a){a="object"===typeof a?
null!==a?a:{}:{};a.id="string"===typeof a.id?a.id:"number"===typeof a.id?a.id:X.id();a.id=!1===y.requests.isConflict(a.id)?a.id:X.id();a.timeout="number"===typeof a.timeout?a.timeout:y.settings.DEFAULT_TIMEOUT;a.doNotChangeHeaders="boolean"===typeof a.doNotChangeHeaders?a.doNotChangeHeaders:!1;a.doNotChangeParameters="boolean"===typeof a.doNotChangeParameters?a.doNotChangeParameters:!1;a.doNotEncodeParametersAsURL="boolean"===typeof a.doNotEncodeParametersAsURL?a.doNotEncodeParametersAsURL:!1;a.headers=
y.parse.headers(a);return a},parameters:function(a,b){var c={},d="",e=[],f=null;if(b.doNotChangeParameters)d=a;else{if(a instanceof Array)Array.prototype.forEach.call(a,function(b,d){var f;a[d]=param.replace(/^\s*\?/gi,"");f=a[d].split("=");f instanceof Array?2===f.length?c[f[0]]=f[1]:e.push(a[d]):e.push(a[d])});else if("object"===typeof a&&null!==a)for(var g in a){switch(typeof a[g]){case "string":c[g]=a[g];break;case "boolean":c[g]=a[g].toString();break;case "number":c[g]=a[g].toString();break;
case "object":c[g]=JSON.stringify(a[g]);break;default:try{c[g]=JSON.stringify(a[g])}catch(h){}}c[g]=c[g]}if("string"!==typeof a)if(y.settings.regs.JSON.lastIndex=0,y.settings.regs.URLENCODED.lastIndex=0,y.settings.regs.JSON.test(b.headers[y.settings.headers.CONTENT_TYPE]))d=JSON.stringify(c);else{f=y.settings.regs.URLENCODED.test(b.headers[y.settings.headers.CONTENT_TYPE]);f=b.doNotEncodeParametersAsURL?!1:f;for(g in c)d+="&"+g+"="+f?encodeURIComponent(c[g]):c[g];d=d.replace(/^\s*\&/gi,"")}else d=
a}return{original:a,parameters:c,_parameters:d,excluded:e}},callbacks:function(a){var b={before:null,success:null,fail:null,reaction:null,timeout:null};"object"===typeof a&&null!==a&&(b.before="function"===typeof a.before?a.before:null,b.success="function"===typeof a.success?a.success:null,b.fail="function"===typeof a.fail?a.fail:null,b.reaction="function"===typeof a.reaction?a.reaction:null,b.timeout="function"===typeof a.timeout?a.timeout:null,b.headers="function"===typeof a.headers?a.headers:null);
return b},headers:function(a){var b={};a.doNotChangeHeaders?b="object"===typeof a.headers?null!==a.headers?a.headers:{}:{}:("object"===typeof a.headers&&null!==a.headers&&A.objects.forEach(a.headers,function(a,c){var d=a.split("-");d.forEach(function(a,b){d[b]=a.charAt(0).toUpperCase()+a.slice(1)});b[d.join("-")]=c}),void 0===b[y.settings.headers.CONTENT_TYPE]&&(b[y.settings.headers.CONTENT_TYPE]="application/x-www-form-urlencoded"),void 0===b[y.settings.headers.ACCEPT]&&(b[y.settings.headers.ACCEPT]=
"*/*"));a.headers=b;return a.headers}}};A={classes:{of:function(a){return null===a||void 0===a?null:Object.prototype.toString.call(a).slice(8,-1)},create:function(a){var b="function"===typeof a.constr?a.constr:null,c="function"===typeof a.parent?a.parent:null,d=void 0!==a.privates?a.privates:{};a=void 0!==a.prototype?a.prototype:{};if(this instanceof A.classes.create)throw Error("Method [flex.oop.classes.create] cannot be used with derective NEW");if(null!==c){c.prototype=c.prototype;a="function"===
typeof a?a.call(new b,d):a;b.prototype=new c;for(var e in a)b.prototype[e]=a[e]}else b.prototype="function"===typeof a?a.call(new b,d):a;d.__instance=new b;return d.__instance}},objects:{forEach:function(a,b){if("object"===typeof a){for(var c in a)b(c,a[c]);"toString"in{toString:null}||Array.prototype.forEach.call("toString valueOf constructor hasOwnPropery isPrototypeOf propertyIsEnumerable toLocaleString".split(" "),function(d){a.hasOwnProperty(prototype)&&b(d,a[c])})}},extend:function(a,b,c){c=
"Array"===A.classes.of(c)?c:[];b=null!==b?void 0!==b?"object"===typeof b?b:{}:{}:{};a="object"===typeof a?[a]:"Array"===A.classes.of(a)?a:null;null!==a&&Array.prototype.forEach.call(a,function(a){if("object"===typeof a)for(var d in a)-1===c.indexOf(d)&&(b[d]=a[d])});return b},copy:function(a,b){function c(a){var b=null;a instanceof Array?(b=[],Array.prototype.forEach.call(a,function(a){a instanceof Array||"object"===typeof a||"function"===typeof a?b.push(c(a)):b.push(a)})):b="object"===typeof a&&
null!==a&&"function"!==typeof a?d(a):a;return b}b=b||{};a="object"===typeof a?a:null;var d=A.objects.copy;if(null!==a){for(var e in a)a.hasOwnProperty(e)&&(b[e]=c(a[e]));return b}return null},validate:function(a,b){a="object"===typeof a?a:null;b=b||null;var c=null,d=null;if(null!==a&&null!==b){b=b instanceof Array?b:[b];try{b.forEach(function(b){if(b.name&&b.type)if(a[b.name]||"boolean"===typeof a[b.name]||"number"===typeof a[b.name]){if(b.type="string"===typeof b.type?[b.type]:b.type,b.type instanceof
Array){c=!1;try{b.type.forEach(function(d){"node"===d?a[b.name]&&(c=a[b.name].nodeName?!0:c):c="array"===d?!0===a[b.name]instanceof Array?!0:c:void 0!==window[d]&&-1===["string","number","bool"].indexOf(d)?a[b.name]instanceof window[d]?!0:c:typeof a[b.name]===d?!0:c;if(!1!==c)throw"found";})}catch(e){"found"!==e&&(c=!1)}finally{if(!1===c)if(void 0!==b.value)a[b.name]=b.value;else throw"deny";else{if(void 0!==b.values&&b.values instanceof Array){try{d=!1,b.values.forEach(function(c){if(a[b.name]===
c)throw d=!0,"found";})}catch(e){}if(!1===d)throw"deny";}if("function"===typeof b.handle)try{a[b.name]=b.handle(a[b.name])}catch(e){if(b.value)a[b.name]=b.value;else throw"deny";}}}}}else if(void 0!==b.value)a[b.name]=b.value;else throw"deny";})}catch(e){return!1}return!0}return null},isValueIn:function(a,b,c){c="boolean"===typeof c?c:!1;if(a instanceof Array){try{a.forEach(function(a){if(a===b)throw"found";}),!1!==c&&a.forEach(function(a){if(("object"===typeof a||a instanceof Array)&&!0===A.objects.isValueIn(a,
b,c))throw"found";})}catch(d){return!0}return!1}if("object"===typeof a){try{A.objects.forEach(a,function(a,c){if(c===b)throw"found";}),!1!==c&&A.objects.forEach(a,function(a,d){if(("object"===typeof d||d instanceof Array)&&!0===A.objects.isValueIn(d,b,c))throw"found";})}catch(d){return!0}return!1}return null},getByPath:function(a,b){a="object"===typeof a?a:null;b="string"===typeof b?b:b instanceof Array?b:null;var c=null,d=a,e=!1;if(null!==a&&null!==b){c=b instanceof Array?b:b.split(".");try{c.forEach(function(a){if(void 0!==
d[a])d=d[a];else throw"NO_BY_PATH";}),e=!0}catch(f){if("NO_BY_PATH"!==f)throw f;}}return e?d:void 0},findBy:function(a,b,c,d){a="object"===typeof a?a:null;b="string"===typeof b?b:null;var e=(d="boolean"===typeof d?d:!1)?[]:null;if(null!==a&&null!==b){b=b.split(".");try{A.objects.forEach(a,function(a,f){var Ea=A.objects.getByPath(f,b);if(void 0!==Ea&&Ea===c)if(d)e.push(f);else throw e=f,"1";})}catch(f){if("1"!==f)throw f;}}return e}},wrappers:{objects:function(){w.prototypes.add.object("forEach",function(a){return A.objects.forEach(this.target,
a)});w.prototypes.add.object("extend",function(a,b){return A.objects.extend(this.target,a,b)});w.prototypes.add.object("copy",function(a){return A.objects.copy(this.target,a)});w.prototypes.add.object("validate",function(a){return A.objects.validate(this.target,a)});w.prototypes.add.object("isValueIn",function(a,b){return A.objects.isValueIn(this.target,a,b)});w.prototypes.add.object("getByPath",function(a){return A.objects.getByPath(this.target,a)});w.prototypes.add.object("findBy",function(a,b,
c){return A.objects.findBy(this.target,a,b,c)});w.prototypes.add.object("createInstanceClass",function(){return A.classes.create(this.target)})}}};z={storage:{data:{},get:function(){z.storage.data=u.localStorage.getJSON("flex.hash.storage","[FLEX_SYSTEM_RESURCES]");"object"===typeof z.storage.data&&null!==z.storage.data||z.storage.create();return z.storage.data},create:function(){z.storage.data={};z.storage.update()},update:function(){u.localStorage.setJSON("flex.hash.storage",z.storage.data,"[FLEX_SYSTEM_RESURCES]")}},
get:function(a){var b=z.storage.get();return"object"===typeof b[a]?b[a].hash:null},set:function(a,b){var c=z.storage.get();return"string"===typeof b?(c[a]={url:a,hash:b},z.storage.update(),!0):!1},update:{add:function(a){z.update.queue.add(a)},queue:{queue:{},journal:{},isLock:!1,unlock:function(){z.update.queue.isLock=!1;z.update.proceed()},add:function(a){"string"===typeof a&&void 0===z.update.queue.journal[a]&&(z.update.queue.journal[a]=!0,z.update.queue.queue[a]={url:a,working:!1});z.update.queue.isLock||
z.update.proceed()},del:function(a){"string"===typeof a&&(z.update.queue.queue[a]=null,delete z.update.queue.queue[a])},work:function(a){"object"===typeof z.update.queue.queue[a]&&(z.update.queue.queue[a].working=!0)},isWorking:function(a){if("object"===typeof z.update.queue.queue[a])return z.update.queue.queue[a].working}},proceed:function(){A.objects.forEach(z.update.queue.queue,function(a,b){var c=null;!1===z.update.queue.isWorking(a)&&(z.update.queue.work(a),c=y.create(b.url,y.settings.methods.GET,
null,{headers:function(c,d){z.update.processing(a,b.url,d)},fail:function(c,d){z.update.fail(a,b.url,d)}}),c.send())})},processing:function(a,b,c){var d="",e=z.get(b);null!==c.headers&&""!==c.headers._headers&&(z.update.queue.del(a),A.objects.forEach(c.headers.headers,function(a,b){"date"!==a.toLowerCase()&&(d+=b)}),z.get(b)!==d&&(null===e?B.log("[HASHES]:: hash for resource ["+b+"] was generated. Next updating of page, resource will be loaded again.",B.types.KERNEL_LOGS):(B.log("[HASHES]:: resource ["+
b+"] have to be updated.",B.types.KERNEL_LOGS),z.resources.update(b)),z.set(b,d)),c.abort())},fail:function(a,b,c){null===c.headers&&(B.log("[HASHES]:: fail to load hash for resource ["+b+"].",B.types.KERNEL_LOGS),z.update.queue.del(a))}},resources:{update:function(a){if(!0===z.resources.css.update(a))return!0;B.log("[HASHES]:: resource ["+a+"] cannot be updated in current session. It will be done after page be reloaded.",B.types.KERNEL_LOGS)},css:{update:function(a){var b=document.querySelector("style["+
u.resources.css.settings.attr.SRC+'$="'+a+'"]');return null!==b?(u.resources.css.connect(a,function(){b.parentNode.removeChild(b);B.log("[HASHES]:: resource ["+a+"] have been updated in current session.",B.types.KERNEL_LOGS)}),!0):!1}}}};F={storage:{},get:function(a,b,c){var d=F.storage;return a in d&&b in d[a]?d[a][b]:c?F.set(a,b,c):null},set:function(a,b,c){var d=F.storage;d[a]=a in d?d[a]:{};d[a][b]=c;return d[a][b]},remove:function(a,b){var c=F.storage;return a in c&&b in c[a]?(c[a][b]=null,delete c[a][b],
0===Object.keys(c[a]).length&&(c[a]=null,delete c[a]),!0):!1}};t={deleteAttribute:function(a,b){try{delete a[b]}catch(c){a.removeAttribute(b)}},clear:function(a){0===Object.keys(a.FlexObjectStorage).length&&(a.FlexObjectStorage=null,t.deleteAttribute(a,"FlexObjectStorage"))}};I={settings:{COMMON_STORAGE_NAME:"FlexRegisterStorage"},build:function(a,b){var c=function(a,b){this.name=a;this.onReady=b;this.items={}};c.prototype={add:function(a){return this.items[a]?!1:(this.items[a]={isDone:!1,key:a},
!0)},done:function(a,b){this.items[a]&&(this.items[a].isDone=!0);return!1===("boolean"===typeof b?b:!1)&&!1!==this.isReady()?(null!==this.onReady&&u.handle(this.onReady,null,"Register: "+this.name,this),!0):!1},isReady:function(){for(var a in this.items)if(!1===this.items[a].isDone)return!1;return!0},isIn:function(a){return this.items[a]?!0:!1},isDone:function(a){return this.items[a]?this.items[a].isDone:null}};return new c(a,b)},open:function(a,b,c){a="string"===typeof a?a:null;b=b instanceof Array?
b:void 0!==b?[b]:null;c="function"===typeof c?c:null;var d=null,e=F.get("flex.core",I.settings.COMMON_STORAGE_NAME,{});return null===a||e[a]?!1:(d=I.build(a,c),b.forEach(function(a){d.add(a)}),e[a]=d,!0)},add:function(a,b){var c=F.get("flex.core",I.settings.COMMON_STORAGE_NAME,{});return c[a]?c[a].add(b):!1},done:function(a,b,c){var d=F.get("flex.core",I.settings.COMMON_STORAGE_NAME,{});d[a]&&!1!==d[a].done(b,"boolean"===typeof c?c:!1)&&(d[a]=null,delete d[a]);return!1},isIn:function(a,b){var c=F.get("flex.core",
I.settings.COMMON_STORAGE_NAME,{});return c[a]?c[a].isIn(b):!1},isDone:function(a,b){var c=F.get("flex.core",I.settings.COMMON_STORAGE_NAME,{});return c[a]?c[a].isDone(b):!1},isReady:function(a){var b=F.get("flex.core",I.settings.COMMON_STORAGE_NAME,{});return b[a]?b[a].isReady():!0}};D={DOM:{add:function(){return"function"===typeof window.addEventListener?function(a,b,c){Array.prototype.forEach.call(b instanceof Array?b:[b],function(b){a.addEventListener(b,c,!1)})}:"function"===typeof document.attachEvent?
function(a,b,c){Array.prototype.forEach.call(b instanceof Array?b:[b],function(b){a.attachEvent("on"+b,c)})}:function(a,b,c){Array.prototype.forEach.call(b instanceof Array?b:[b],function(b){a["on"+b]=c})}}(),remove:function(){return"function"===typeof window.removeEventListener?function(a,b,c){a.removeEventListener(b,c,!1)}:"function"===typeof document.detachEvent?function(a,b,c){a.detachEvent("on"+b,c)}:function(a,b,c){a["on"+b]=null}}()},core:{storage:{},listen:function(a,b,c,d,e){a=a||null;b=
b||null;c=c||null;d=d||X.id();var f=D.core;if(null!==a&&null!==b&&null!==c){if(!1!==("boolean"!==typeof e?!1:e)&&null===f.get(a,b))return!1;a=f.register(a,b);a[d]=c;return d}return!1},remove:function(a,b,c){a=a||null;b=b||null;c=c||null;var d,e=D.core.storage;d=D.core;return null!==a&&null!==b&&null!==c&&(d=d.register(a,b),c in d)?(d[c]=null,delete d[c],0===Object.keys(d).length&&(e[a][b]=null,delete e[a][b],0===Object.keys(e[a]).length&&(e[a]=null,delete e[a])),!0):!1},register:function(a,b){var c=
D.core.storage;a in c||(c[a]={});b in c[a]||(c[a][b]={});return c[a][b]},get:function(a,b){var c=D.core.storage;return a in c&&b in c[a]?c[a][b]:null},fire:function(a,b,c){a=D.core.get(a,b);if(null!==a)for(var d in a)try{a[d](c)}catch(e){}}}};u={handle:function(a,b,c,d,e){function f(){return null===b?a.call(d):"number"===typeof b.length&&"object"===typeof b?a.apply(d,b):a.call(d,b)}a=a||null;b=b||null;c=c||null;d=d||null;if(null!==a)if(e)try{return f()}catch(g){B.log("Initializer runFunction method catch error: \r\n"+
B.parseError(g)+"\r\n Call point: "+c,B.types.WARNING)}else return f();return null},localStorage:{get:function(a,b,c){var d=null;b="boolean"===typeof b?b:!1;try{return d=window.localStorage.getItem(("string"===typeof c?c:"")+a),"string"!==typeof d&&(d=null),!1!==b&&(d=u.convertor.BASE64.decode(d),d=u.convertor.UTF8.decode(d)),d}catch(e){return null}},set:function(a,b,c,d){var e=b;c="boolean"===typeof c?c:!1;d="string"===typeof d?d:"";try{return window.localStorage.removeItem(d+a),!1!==c&&(e="string"!==
typeof b?JSON.stringify(b):e,e=u.convertor.UTF8.encode(e),e=u.convertor.BASE64.encode(e)),window.localStorage.setItem(d+a,e),!0}catch(f){return B.log("Error during saving data into localStorage. [key]:["+a+"]",B.types.WARNING),!1}},del:function(a,b){try{return window.localStorage.removeItem(("string"===typeof b?b:"")+a),!0}catch(c){return B.log("Error during deleting data from localStorage. [key]:["+a+"]",B.types.WARNING),null}},getJSON:function(a,b){var c=u.localStorage.get(a,!0,b);if(null!==c)try{return c=
JSON.parse(c)}catch(d){}return null},setJSON:function(a,b,c){return u.localStorage.set(a,JSON.stringify(b),!0,c)},reset:function(a){a="string"===typeof a?a:"";var b=[];try{if(null!==a){for(var c in window.localStorage)0===c.indexOf(a)&&b.push(c);b.forEach(function(a){window.localStorage.removeItem(a)})}else window.localStorage.clear();return!0}catch(d){return!1}},isAvailable:function(){var a=X.id(),b;u.localStorage.set(a,a);b=u.localStorage.get(a)===a?!0:!1;u.localStorage.del(a);return b}},resources:{settings:{RESOURCES_MARK_ATTR:{name:"data-flex-connect-mark",
value:"dynamically"},CSS_TIMER_PROPERTY:"flex_css_load_event_timer",CSS_TIMER_DURATION:5E3},css:{settings:{URLS:[{reg:/url\('([^\)'].*?)'\)/gi,left:/url\('/gi,right:/'\)/gi,_left:'url("',_right:'")'},{reg:/url\("([^\)"].*?)"\)/gi,left:/url\("/gi,right:/"\)/gi,_left:'url("',_right:'")'}],attr:{SRC:"data-flex-src"}},connect:function(a,b,c){function d(a){var b=u.resources.settings,c=document.createElement("LINK");c.type="text/css";c.href=a;c.rel="stylesheet";c.setAttribute(b.RESOURCES_MARK_ATTR.name,
b.RESOURCES_MARK_ATTR.value);return{link:c,append:function(){document.head.appendChild(c)}}}function e(a,b,c){function d(a,b){clearTimeout(a[f.CSS_TIMER_PROPERTY]);a[f.CSS_TIMER_PROPERTY]=null;delete a[f.CSS_TIMER_PROPERTY]}var f=u.resources.settings;a[f.CSS_TIMER_PROPERTY]=setTimeout(function(){if(void 0!==a[f.CSS_TIMER_PROPERTY]){var e=document.createElement("IMG");d(a,f);D.DOM.add(e,["load","error"],function(a){u.handle(c,b,"system.resources.css.connect",this)});e.src=b}},f.CSS_TIMER_DURATION);
D.DOM.add(a,"load",function(e){void 0!==a[f.CSS_TIMER_PROPERTY]&&(d(a,f),u.handle(c,b,"system.resources.css.connect",this))})}function f(a){try{Array.prototype.forEach.call(document.styleSheets,function(b){if(-1!==b.href.indexOf(a))throw"found";})}catch(b){if("found"===b)return!0}return!1}var g=null;b=b||null;c=c||null;a=a||null;return null!==a&&!1===f(a)?(g=d(a),D.DOM.add(g.link,"error",function(b){B.log("During loading CSS resource ["+a+"] was error",B.types.WARNING)}),null!==c&&D.DOM.add(g.link,
"error",c),null!==b?e(g.link,a,b):u.handle(b,null,"system.resources.css.connect",this),g.append(),!0):!1},adoption:function(a,b,c){b=null!==b?"object"===typeof b?void 0!==b.body?b:document:document:document;var d=b.createElement("style");c="string"===typeof c?c:null;if("string"===typeof a)try{return null!==c&&(a=u.resources.css.correctPaths(a,c),d.setAttribute(u.resources.css.settings.attr.SRC,c)),d.type="text/css",d.styleSheet?d.styleSheet.cssText=a:d.appendChild(b.createTextNode(a)),b.head.appendChild(d),
d}catch(e){B.log("Error during adoption of CSS resource: url = ["+c+"], cssText starts from ["+a.substr(0,50)+" (...)]",B.types.CRITICAL)}return null},correctPaths:function(a,b){!1!==J.settings.CHECK_PATHS_IN_CSS&&"string"===typeof b&&""!==b&&u.resources.css.settings.URLS.forEach(function(c){var d=a.match(c.reg);d instanceof Array&&d.forEach(function(d){var e;e=d.replace(c.left,"");e=e.replace(c.right,"");var f;0!==e.trim().toLowerCase().indexOf("data:")&&(f=u.url.parse(e,b),e=null!==f?f.url:e);null!==
e&&(a=a.replace(d,c._left+e+c._right))})});return a}},js:{connect:function(a,b,c){function d(a){var b=u.resources.settings,c=document.createElement("SCRIPT");c.type="application/javascript";c.src=a;c.setAttribute(b.RESOURCES_MARK_ATTR.name,b.RESOURCES_MARK_ATTR.value);return{script:c,append:function(){document.head.appendChild(c)}}}var e=null;b=b||null;c=c||null;a=a||null;return null!==a?(e=d(a),null!==b&&D.DOM.add(e.script,"load",b),null!==c&&D.DOM.add(e.script,"error",c),e.append(),e.script):!1},
adoption:function(a,b){var c=document.createElement("SCRIPT");b=b||null;a=a||null;null!==a&&(c.type="application/javascript",c.appendChild(document.createTextNode(a)),document.body.insertBefore(c,document.body.childNodes[0]),null!==b&&u.handle(b,null,"system.resources.js.adoption",this))},getCurrentSRC:function(a){var c;a="boolean"===typeof a?a:!1;try{throw Error("Script URL detection");}catch(d){return"string"===typeof d.stack&&(c=d.stack.match(b),c instanceof Array&&0<c.length)?a?c[c.length-1]:
-1===c[c.length-1].indexOf(W.CORE_URL)?c[c.length-1]:null:null}}}},convertor:{UTF8:{encode:function(a){return unescape(encodeURIComponent(a))},decode:function(a){return decodeURIComponent(escape(a))}},BASE64:{decode:function(a){var b={},c,d=[],e="",f=String.fromCharCode,g,h=[[65,91],[97,123],[48,58],[43,44],[47,48]],k=0,l=0,m;for(g in h)for(c=h[g][0];c<h[g][1];c++)d.push(f(c));for(c=0;64>c;c++)b[d[c]]=c;for(c=0;c<a.length;c+=72)for(g=a.substring(c,c+72),d=0;d<g.length;d++)for(h=b[g.charAt(d)],k=(k<<
6)+h,l+=6;8<=l;)h=f((k>>>(l-=8))%256),m=h.charCodeAt(0),e=0!==m?e+h:e;return e},encode:function(a){var b,c,d,e,f=0,g=0,h=[];if(!a)return a;do b=a.charCodeAt(f++),c=a.charCodeAt(f++),d=a.charCodeAt(f++),e=b<<16|c<<8|d,b=e>>18&63,c=e>>12&63,d=e>>6&63,e&=63,h[g++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e);
while(f<a.length);f=h.join("");a=a.length%3;return(a?f.slice(0,a-3):f)+"===".slice(a||3)}}},url:{settings:{parser:{LAST:/([^\/]*)$/gi,CORRECTION:/[\/\\]$/gi,BAD_SLASH:/\\/gi,PROTOCOL:/:\/\//gi,DOUBLE:/\/{2,}/gi}},getURLInfo:function(a){var b=document.createElement("a"),c=null;"string"===typeof a&&(b.setAttribute("href",a),c={hostname:b.hostname,host:b.host,port:b.port,protocol:b.protocol,isFull:!1},c.isFull=""!==c.hostname?0!==a.indexOf(c.protocol+"//"+c.hostname)?!1:!0:!1);return c},getCurrentDomain:function(){return window.location.origin?
window.location.origin:window.location.protocol+"//"+window.location.host},getParams:function(a){var b=null,c=null;a=a.split("?");b=2===a.length?a[1]:null;a=a[0];null!==b&&(c=b.split("&"),b={},c.forEach(function(a){a=a.split("=");2===a.length&&(b[a[0]]=a[1])}));return{url:a,params:b}},restoreFullURL:function(a){var b;return"string"===typeof a?(b=u.url.getURLInfo(a),!1===b.isFull?""===b.hostname?u.url.getCurrentDomain()+(0!==a.indexOf("/")?"/":"")+a:b.protocol+"//"+b.host+(0!==a.indexOf("/")?"/":"")+
a:a):null},parse:function(a,b){function c(a){var b=0,d=!0,e=-1,f="";a.split("/").forEach(function(a,c){".."===a?(b+=1,-1!==e&&e!==c-1&&(d=!1),e=c):f+="/"+a});return!0===d?{count:b,url:f}:!1}function d(a){a=a.replace(u.url.settings.parser.CORRECTION,"");return a=a.replace(u.url.settings.parser.BAD_SLASH,"/")}var e=null,f=null;b="string"===typeof b?b:null;var e=0,g=f=null;if("string"===typeof a&&(a=d(a),g=u.url.getParams(a),a=g.url,g=g.params,f=u.url.getURLInfo(a),null!==f&&(e=c(a),!1!==e)))if(0<e.count){if(null!==
b&&(f=u.url.parse(b),null!==f&&e.count<f.parts.length-1))return f.parts.splice(f.parts.length-e.count,e.count),f.parts=f.parts.map(function(a){return"//"===a?"":a}),a=f.parts.join("/")+e.url,u.url.parse(a)}else if(!1===f.isFull){if(b=null===b?u.url.getCurrentDomain():b,f=u.url.parse(b),null!==f)return 0===a.indexOf("~/")?a=a.replace("~",f.home):(f.parts=f.parts.map(function(a){return"//"===a?"":a}),a=f.parts.join("/")+(0!==a.indexOf("/")?"/":"")+a),u.url.parse(a)}else if(e={target:a.match(u.url.settings.parser.LAST),
_path:"",_url:a,_hostname:f.hostname,hostname:""!==f.hostname?f.hostname:window.location.hostname,_host:f.host,host:""!==f.host?f.host:window.location.host,_port:f.port,port:""!==f.port?f.port:window.location.port,_protocol:f.protocol,protocol:":"!==f.protocol?f.protocol:window.location.protocol,home:""===f.hostname?window.location.protocol+"//"+window.location.host:f.protocol+"//"+f.host,_home:""!==f.hostname?f.protocol+"//"+f.host:"",params:g,parts:null},0<e.target.length)return e.target instanceof
Array?(e.target=e.target[0],-1===e.target.indexOf(".")&&(e.target="")):e.target="",e._path=a.replace(e.target,""),""===e._home?(e.path=e.home+(0===e._path.indexOf("/")?"":"/")+e._path,e.url=e.home+(0===e._url.indexOf("/")?"":"/")+e._url):(e.path=e._path,e.url=e._url),e.parts=e.url.split("/").map(function(a){return""===a?"//":a}),-1!==e.parts.indexOf(e.target)&&e.parts.splice(e.parts.indexOf(e.target),1),e;return null},sterilize:function(a){var b=X.id();return a.replace(u.url.settings.parser.PROTOCOL,
b).replace(u.url.settings.parser.BAD_SLASH,"/").replace(u.url.settings.parser.DOUBLE,"/").replace(b,"://")},getTypeOfResource:function(a){a=a.replace(g,"");a=a.match(m);return a instanceof Array&&1===a.length?a[0].toLowerCase():null},is:{clear:function(a){return"string"===typeof a?(a=a.split("?"),a=a[0],a=a.replace(c,"")):null},js:function(a){a=u.url.is.clear(a);return null!==a?(k.lastIndex=0,k.test(a)):!1},css:function(a){a=u.url.is.clear(a);return null!==a?(C.lastIndex=0,C.test(a)):!1}}}};X={id:function(){var a=
0;return function(b){a+=1;return(b||"")+(new Date).valueOf()+"_"+a}}()};B={types:{CRITICAL:"CRITICAL",LOGICAL:"LOGICAL",WARNING:"WARNING",NOTIFICATION:"NOTIFICATION",LOGS:"LOG",KERNEL_LOGS:"KERNEL_LOGS"},rendering:{CRITICAL:"color: #FF0000;font-weight:bold;",LOGICAL:"color: #00FFF7;font-weight:bold;",WARNING:"color: #A69600;font-weight:bold;",NOTIFICATION:"color: #988DFF;font-weight:bold;",LOGS:"color: #6C6C6C;",KERNEL_LOGS:"color: #008B0E;font-weight:bold;"},parseError:function(a){var b=a.name+": "+
a.message+"\r\n--------------------------------------------",c;for(c in a)"name"!==c&&"message"!==c&&(b=b+"\r\n  "+c+"="+a[c]);return b},log:function(a,b){b=b||"LOGS";console&&B.types[b]&&void 0!==console.log&&-1!==J.settings.SHOWN_LOGS.indexOf(b)&&console.log("%c ["+b+"]%c"+a,B.rendering[b],B.rendering.LOGS)}};w={callers:{node:function(){var a={};return function(b,c,d){var e=null;c="boolean"===typeof c?c:!1;if("string"===typeof b){if(c&&a[b]&&null!==a[b]&&(e=a[b]),e=null!==e?e:(d||document).querySelector(b),
c&&!a[b]&&null!==e&&(a[b]=e),null!==e)return new w.constructors.node(e)}else if(void 0!==b&&("string"===typeof b.nodeName||b==window))return new w.constructors.node(b);return null}}(),nodes:function(){var a={};return function(b,c,d){var e=null;c="boolean"===typeof c?c:!1;if("string"===typeof b){if(c&&a[b]&&null!==a[b]&&0<a[b].length&&(e=a[b]),e=null!==e?e:(d||document).querySelectorAll(b),c&&!a[b]&&null!==e&&0<e.length&&(a[b]=e),null!==e)return new w.constructors.nodes(e)}else if(void 0!==b&&"number"===
typeof b.length&&0<b.length){if("string"===typeof b[0])return e=[],Array.prototype.forEach.call(b,function(a,b){var c=(d||document).querySelector(a);null!==c&&e.push(c)}),new w.constructors.nodes(e);if("string"===typeof b[0].nodeName)return new w.constructors.nodes(b)}return null}}(),array:function(a){return a instanceof Array?new w.constructors.array(a):null},string:function(a){return"string"===typeof a?new w.constructors.string(a):null},"boolean":function(a){return"boolean"===typeof a?new w.constructors["boolean"](a):
null},object:function(a){return"object"===typeof a?new w.constructors.object(a):null}},prototypes:{node:{},nodes:{},array:{},string:{},"boolean":{},object:{},update:{update:function(a){function b(a){var c=null,d;for(d in a)if(a.hasOwnProperty(d)){if("object"===typeof a[d]){var c=function(){c.target=this.target;return c},e;for(e in a[d])c[e]=a[d][e];a[d]=c}"function"===typeof a[d]&&b(a[d])}}w.prototypes[a]&&b(w.prototypes[a])},node:function(){w.prototypes.update.update("node")},nodes:function(){w.prototypes.update.update("nodes")},
array:function(){w.prototypes.update.update("array")},string:function(){w.prototypes.update.update("string")},"boolean":function(){w.prototypes.update.update("boolean")},object:function(){w.prototypes.update.update("object")}},add:{add:function(a,b,c){var d=null,e=null;"string"===typeof a&&"string"===typeof b&&void 0!==c&&w.prototypes[a]&&(d=b.split("."),e=w.prototypes[a],d.forEach(function(a,b){void 0===e[a]?b===d.length-1?e[a]=c:(e[a]={},e=e[a]):("object"!==typeof e[a]&&"function"!==typeof e[a]&&
(e[a]={}),e=e[a])}),w.prototypes.update[a]())},node:function(a,b){w.prototypes.add.add("node",a,b)},nodes:function(a,b){w.prototypes.add.add("nodes",a,b)},array:function(a,b){w.prototypes.add.add("array",a,b)},string:function(a,b){w.prototypes.add.add("string",a,b)},"boolean":function(a,b){w.prototypes.add.add("boolean",a,b)},object:function(a,b){w.prototypes.add.add("object",a,b)}}},constructors:{node:function(a){this.target=a},nodes:function(a){this.target=a},array:function(a){this.target=a},string:function(a){this.target=
a},"boolean":function(a){this.target=a},object:function(a){this.target=a}},build:function(){for(var a in w.constructors)w.constructors[a].prototype=w.prototypes[a];return!0}};Ca=J.init;a=A.objects.copy;f=A.objects.extend;H=A.objects.forEach;V=A.objects.validate;x=A.objects.isValueIn;G=A.classes.of;E=A.classes.create;Da=X.id;N=D.DOM.add;O=D.DOM.remove;L=D.core.fire;Y=D.core.listen;M=D.core.register;K=D.core.remove;S=F.set;T=F.get;U=F.remove;P=I.open;Q=I.add;R=I.done;Aa=y.create;Ba={POST:y.settings.methods.POST,
GET:y.settings.methods.GET,PUT:y.settings.methods.PUT,DELETE:y.settings.methods.DELETE,OPTIONS:y.settings.methods.OPTIONS};xa=B.parseError;ya=B.log;za=B.types;ra=w.callers.node;sa=w.callers.nodes;ta=w.callers.array;ua=w.callers.object;va=w.callers.string;wa=w.callers["boolean"];Z=w.prototypes.add.node;aa=w.prototypes.add.nodes;ba=w.prototypes.add.array;ca=w.prototypes.add.object;da=w.prototypes.add.string;ea=w.prototypes.add["boolean"];v=u.resources.css.connect;h=u.resources.css.adoption;l=u.resources.js.connect;
d=u.resources.js.adoption;r=u.resources.js.getCurrentSRC;qa=u.handle;p=u.convertor.UTF8.encode;n=u.convertor.UTF8.decode;e=u.convertor.BASE64.encode;q=u.convertor.BASE64.decode;fa=u.url.parse;ga=u.url.restoreFullURL;la=u.localStorage.set;ma=u.localStorage.get;na=u.localStorage.del;oa=u.localStorage.setJSON;pa=u.localStorage.getJSON;ja=z.get;ka=z.update.add;ha=J.get;ia=J.set;W.detect();w.build();A.wrappers.objects();return{init:Ca,oop:{objects:{copy:a,extend:f,forEach:H,validate:V,isValueIn:x},classes:{of:G,
create:E}},unique:Da,events:{DOM:{add:N,remove:O},core:{fire:L,listen:Y,register:M,remove:K}},overhead:{globaly:{set:S,get:T,del:U},objecty:{set:function(a,b,c,d){return"object"===typeof a&&"string"===typeof b&&void 0!==c?("object"!==typeof a.FlexObjectStorage&&(a.FlexObjectStorage={}),!1===("boolean"===typeof d?d:!0)?void 0===a.FlexObjectStorage[b]&&(a.FlexObjectStorage[b]=c):a.FlexObjectStorage[b]=c,c):null},get:function(a,b,c,d){d=void 0!==d?d:null;if("object"===typeof a&&"string"===typeof b)if("object"===
typeof a.FlexObjectStorage){if(void 0!==a.FlexObjectStorage[b])return d=a.FlexObjectStorage[b],!0===("boolean"===typeof c?c:!1)&&(a.FlexObjectStorage[b]=null,t.deleteAttribute(a,b),t.clear(a)),d;if(null!==d)return a.FlexObjectStorage[b]=d,a.FlexObjectStorage[b]}else if(null!==d)return a.FlexObjectStorage={},a.FlexObjectStorage[b]=d,a.FlexObjectStorage[b];return null},del:function(a,b){return"object"===typeof a&&"string"===typeof b?"object"===typeof a.FlexObjectStorage&&void 0!==a.FlexObjectStorage[b]?
(a.FlexObjectStorage[b]=null,t.deleteAttribute(a,b),t.clear(a),!0):!1:null}},register:{open:P,add:Q,done:R}},ajax:{send:Aa,methods:Ba},resources:{parse:{css:{stringify:function(a){function b(a){function c(a){var b="";a.cssRules&&(b="@keyframes "+a.name+" {\n\r",Array.prototype.forEach.call(a.cssRules,function(a){b+=a.keyText+" { "+a.style.cssText+" }\n\r"}),b+="}");return b}var d="";a.cssRules||a.rules?Array.prototype.forEach.call(a.cssRules||a.rules,function(a){d="string"===typeof a.cssText?d+(a.cssText+
"\n\r"):d+(c(a)+"\n\r")}):"string"===typeof a.cssText&&(d=a.cssText);return d}var c=null;try{Array.prototype.forEach.call(document.styleSheets,function(d){if(d.href&&-1!==d.href.indexOf(a))throw c=b(d),"found";})}catch(d){}finally{return c}}}},attach:{css:{connect:v,adoption:h},js:{connect:l,adoption:d,getCurrentSRC:r}}},localStorage:{add:la,get:ma,del:na,addJSON:oa,getJSON:pa},system:{handle:qa,convertor:{UTF8:{encode:p,decode:n},BASE64:{encode:e,decode:q}},url:{parse:fa,restore:ga}},logs:{parseError:xa,
log:ya,types:za},hashes:{get:ja,update:ka},callers:{node:ra,nodes:sa,array:ta,object:ua,string:va,"boolean":wa,define:{node:Z,nodes:aa,array:ba,object:ca,string:da,"boolean":ea}},config:{get:ha,set:ia}}};M.prototype=M.prototype();window.flex=new M;window._node=flex.callers.node;window._nodes=flex.callers.nodes;window._array=flex.callers.array;window._object=flex.callers.object;window._string=flex.callers.string;window._boolean=flex.callers["boolean"];flex.registry={};flex.registry.events={ui:{window:{resize:{GROUP:"flex.ui.window.resize",
REFRESH:"refresh",FINISH:"finish"},maximize:{GROUP:"flex.ui.window.maximize",MAXIMIZED:"maximized",RESTORED:"restored",CHANGE:"change"}},patterns:{GROUP:"flex.ui.patterns",MOUNTED:"mounted"}}};N.prototype=N.prototype();O.prototype=O.prototype();L.prototype=L.prototype();P.prototype=P.prototype();Q.prototype=Q.prototype();R.prototype=R.prototype();S.prototype=S.prototype();T.prototype=T.prototype();U.prototype=U.prototype();window.flex.libraries={events:new N,binds:new O,html:new P,ui:{window:{move:new R,
resize:new S,maximize:new T,focus:new Q},patterns:new L},types:{array:new U}};window._patterns=flex.libraries.ui.patterns})();