!function(){"use strict";var e=function(){},t=function(){},n=function(){},o=function(){},r=function(){},l=function(){},i=function(){},a=function(){},s=function(){},u={array:function(){}};e.prototype=function(){var e=null,t=null,n=null,o=null,r=null,l=null,i=null,a=null,s=null,u=null,c=null,f=null,d=null,p=null,h=null,g=null,y=null;return e={values:{USE_STORAGE_CSS:!0,USE_STORAGE_JS:!0,USE_STORAGE_HTML:!0,PATTERN_NODE:"pattern"},validator:{USE_STORAGE_CSS:function(e){return"boolean"==typeof e},USE_STORAGE_JS:function(e){return"boolean"==typeof e},USE_STORAGE_HTML:function(e){return"boolean"==typeof e},PATTERN_NODE:function(e){return"string"==typeof e&&e.length>0?0===e.replace(/\w/gi,"").length:!1}},setup:function(t){null!==t&&"object"==typeof t&&_object(t).forEach(function(t,n){void 0!==e.values[t]&&void 0!==e.validator[t]&&(e.values[t]=e.validator[t](n)?n:e.values[t])})},get:function(){return e.values},debug:function(){e.values.USE_STORAGE_CSS=!1,e.values.USE_STORAGE_JS=!1,e.values.USE_STORAGE_HTML=!1,flex.config.set({SHOWN_LOGS:["CRITICAL","LOGICAL","WARNING","NOTIFICATION","LOGS"]})}},t={measuring:{MEASURE:!0},classes:{SOURCE:function(){},PATTERN:function(){},INSTANCE:function(){},RESULT:function(){},CALLER:function(){}},regs:{BODY:/<\s*body[^>]*>(\n|\r|\s|.)*?<\s*\/body\s*>/gi,BODY_TAG:/<\s*body[^>]*>|<\s*\/\s*body\s*>/gi,BODY_CLEAR:/^[\n\r\s]*|[\n\r\s]*$/gi,TABLE:/<\s*table[^>]*>(\n|\r|\s|.)*?<\s*\/table\s*>/gi,TABLE_TAG:/<\s*table[^>]*>|<\s*\/\s*table\s*>/gi,ANY_TAG:/<\s*[\w]{1,}[^>]*>(\n|\r|\s|\t|.)*<\s*\/\s*\w{1,}\s*>/gi,FIRST_TAG:/^\<.*?\>/gi,TAG_BORDERS:/<|>/gi,CSS:/<link\s+.*?\/>|<link\s+.*?\>/gi,CSS_HREF:/href\s*\=\s*"(.*?)"|href\s*\=\s*'(.*?)'/gi,CSS_REL:/rel\s*=\s*"stylesheet"|rel\s*=\s*'stylesheet'/gi,CSS_TYPE:/type\s*=\s*"text\/css"|type\s*=\s*'text\/css'/gi,JS:/<script\s+.*?>/gi,JS_SRC:/src\s*\=\s*"(.*?)"|src\s*\=\s*'(.*?)'/gi,JS_TYPE:/type\s*=\s*"text\/javascript"|type\s*=\s*'text\/javascript'/gi,STRING:/"(.*?)"|'(.*?)'/gi,STRING_BORDERS:/"|'/gi,DOM:/\{\{\$[\w\.\,]*?\}\}/gi,DOM_OPEN:"\\{\\{\\$",DOM_CLOSE:"\\}\\}",HOOK:/\{\{[\w\.]*?\}\}/gi,MODEL:/\{\{\:\:\w*?\}\}/gi,MODEL_BORDERS:/\{\{\:\:|\}\}/gi,MODEL_OPEN:"\\{\\{\\:\\:",MODEL_CLOSE:"\\}\\}",HOOK_OPEN:"\\{\\{",HOOK_CLOSE:"\\}\\}",HOOK_OPEN_COM:"<\\!--\\{\\{",HOOK_CLOSE_COM:"\\}\\}-->",HOOK_BORDERS:/\{\{|\}\}/gi,GROUP_PROPERTY:/__\w*?__/gi,FIRST_WORD:/^\w+/gi,NOT_WORDS_NUMBERS:/[^\w\d]/gi,CONDITION_STRUCTURE:/^\w*=/gi},marks:{DOM:"DOM"},storage:{USE_LOCALSTORAGE:!0,VIRTUAL_STORAGE_GROUP:"FLEX_UI_PATTERNS_GROUP",VIRTUAL_STORAGE_ID:"FLEX_UI_PATTERNS_STORAGE",CSS_ATTACHED_JOURNAL:"FLEX_UI_PATTERNS_CSS_JOURNAL",JS_ATTACHED_JOURNAL:"JS_ATTACHED_JOURNAL",PRELOAD_TRACKER:"FLEX_UI_PATTERNS_PRELOAD_TRACKER",NODE_BINDING_DATA:"FLEX_PATTERNS_BINDINGS_DATA",CONTROLLERS_LINKS:"FLEX_PATTERNS_CONTROLLERS_LINKS",CONTROLLERS_STORAGE:"FLEX_PATTERNS_CONTROLLERS_STORAGE",CONDITIONS_STORAGE:"FLEX_PATTERNS_CONDITIONS_STORAGE",HOOKS_STORAGE:"FLEX_PATTERNS_HOOKS_STORAGE",PATTERN_SOURCES:"FLEX_PATTERNS_PATTERN_SOURCES",PATTERNS:"FLEX_PATTERNS_PATTERNS"},compatibility:{PARENT_TO_CHILD:{table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td",colgroup:"col"},CHILD_TO_PARENT:{tr:"tbody",th:"tbody",td:"tr",col:"colgroup",tbody:"table",thead:"table",tfoot:"table"},BASE:"div"},css:{classes:{HOOK_WRAPPER:"flex_patterns_hook_wrapper"},attrs:{MODEL_DATA:"data-flex-model-data",DOM_MARK:"data-flex-dom-mark"},selectors:{HOOK_WRAPPERS:".flex_patterns_hook_wrapper"}},other:{INDEXES:"__indexes"}},f={SIGNATURE:"[flex.ui.patterns]",source:{TEMPLATE_WAS_LOADED:"0001:TEMPLATE_WAS_LOADED",FAIL_TO_LOAD_TEMPLATE:"0002:FAIL_TO_LOAD_TEMPLATE",FAIL_TO_PARSE_TEMPLATE:"0003:FAIL_TO_PARSE_TEMPLATE",FAIL_TO_LOAD_JS_RESOURCE:"0004:FAIL_TO_LOAD_JS_RESOURCE"},pattern:{CANNOT_FIND_FIRST_TAG:"1000:CANNOT_FIND_FIRST_TAG",CANNOT_CREATE_WRAPPER:"1001:CANNOT_CREATE_WRAPPER",WRONG_PATTERN_WRAPPER:"1002:WRONG_PATTERN_WRAPPER",WRONG_HOOK_VALUE:"1003:WRONG_HOOK_VALUE",WRONG_CONDITION_DEFINITION:"1004:WRONG_CONDITION_DEFINITION",CANNOT_FIND_CONDITION_BEGINING:"1005:CANNOT_FIND_CONDITION_BEGINING",CANNOT_FIND_CONDITION_END:"1006:CANNOT_FIND_CONDITION_END",CANNOT_FIND_CONDITION_NODES:"1007:CANNOT_FIND_CONDITION_NODES",CANNOT_FIND_CONDITION_VALUE:"1008:CANNOT_FIND_CONDITION_VALUE",UNEXCEPTED_ERROR_CONDITION_PARSER:"1009:UNEXCEPTED_ERROR_CONDITION_PARSER"},instance:{BAD_HOOK_FOR_CLONE:"2000:BAD_HOOK_FOR_CLONE",NO_URL_FOR_CLONE_HOOK:"2001:NO_URL_FOR_CLONE_HOOK"},caller:{CANNOT_INIT_PATTERN:"3000:CANNOT_INIT_PATTERN",CANNOT_GET_CHILD_PATTERN:"3001:CANNOT_GET_CHILD_PATTERN",CANNOT_GET_PATTERN:"3002:CANNOT_GET_PATTERN",PATTERN_WITHOUT_SRC:"3003:PATTERN_WITHOUT_SRC",CANNOT_FIND_ROOT_TEMPLATE:"3004:CANNOT_FIND_ROOT_TEMPLATE",ONLY_ONE_TEMPLATE_ON_SAME_LEVEL:"3005:ONLY_ONE_TEMPLATE_ON_SAME_LEVEL"},layout:{BAD_ARRAY_OF_HOOKS:"4000:BAD_ARRAY_OF_HOOKS"}},n={proto:function(n){var o=this,r=null,l=null,i=null,a=null,s=null,h=null,g=null,y=null;return r=function(t,r){var l=null,a=null,s=null;return null===n.html?(s=c.get(o.url),null!==s&&e.get().USE_STORAGE_HTML===!0?i(s,t,r):(l=d.measure(),a=flex.ajax.send(o.url,flex.ajax.methods.GET,null,{success:function(e){d.measure(l,"loading sources for ("+o.url+")"),c.add(o.url,e),i(e,t,r)},fail:function(){throw d.measure(l,"loading sources for ("+o.url+")"),flex.logs.log(g()+f.source.FAIL_TO_LOAD_TEMPLATE,flex.logs.types.CRITICAL),h(r),f.source.FAIL_TO_LOAD_TEMPLATE}}),a.send())):flex.logs.log(g()+f.source.TEMPLATE_WAS_LOADED,flex.logs.types.NOTIFICATION),!0},l={URLs:function(e){var t=flex.system.url.restore(o.url);return null!==t&&(e=e.map(function(e){var n=flex.system.url.parse(e,t);return null!==n?n.url:!1}),e=e.filter(function(e){return e!==!1})),e},html:function(e){var o=t.regs,r=e.match(o.BODY);return null!==r&&1===r.length?(n.html=r[0].replace(o.BODY_TAG,"").replace(o.BODY_CLEAR,""),n.original=e,n.html=p.tableFix(n.html),!0):(n.html=null,!1)},css:function(){var e=t.regs,o=null!==n.original?n.original.match(e.CSS):null,r=[];null!==o&&Array.prototype.forEach.call(o,function(t){function n(t){var n=t.search(e.CSS_REL),o=t.search(e.CSS_TYPE);return n>0&&o>0}var o=t.match(e.CSS_HREF),l=null;n(t)!==!1&&null!==o&&1===o.length&&(l=o[0].match(e.STRING),null!==l&&1===l.length&&r.push(l[0].replace(e.STRING_BORDERS,"")))}),n.css=l.URLs(r)},js:function(){var e=t.regs,o=null!==n.original?n.original.match(e.JS):null,r=[];null!==o&&Array.prototype.forEach.call(o,function(t){function n(t){var n=t.search(e.JS_TYPE);return n>0}var o=t.match(e.JS_SRC),l=null;n(t)!==!1&&null!==o&&1===o.length&&(l=o[0].match(e.STRING),null!==l&&1===l.length&&r.push(l[0].replace(e.STRING_BORDERS,"")))}),n.js=l.URLs(r)}},i=function(e,t,n){l.html(e.original)?(l.js(),l.css(),a.css.load(function(){a.js.load(function(){h(t)},function(){h(n)})})):(flex.logs.log(g()+f.source.FAIL_TO_PARSE_TEMPLATE,flex.logs.types.NOTIFICATION),h(n))},a={css:{load:function(r){var l=flex.overhead.globaly.get(t.storage.VIRTUAL_STORAGE_GROUP,t.storage.CSS_ATTACHED_JOURNAL,{}),i=flex.unique();null!==n.css&&n.css.length>0?(flex.overhead.register.open(i,n.css,r),Array.prototype.forEach.call(n.css,function(t){var n=null,r=null;l[t]?flex.overhead.register.done(i,t):(l[t]=!0,n=c.get(t),null===n||e.get().USE_STORAGE_CSS===!1?(r=d.measure(),flex.resources.attach.css.connect(t,function(e){var t=flex.resources.parse.css.stringify(e);null!==t&&c.add(e,t),null!==i&&flex.overhead.register.done(i,e),d.measure(r,"loading resources for ("+o.url+"):: "+e)})):(flex.resources.attach.css.adoption(n,null,t),flex.overhead.register.done(i,t),c.add(t,n)))})):h(r)}},js:{load:function(r,l){var i=flex.overhead.globaly.get(t.storage.VIRTUAL_STORAGE_GROUP,t.storage.JS_ATTACHED_JOURNAL,{}),a=flex.unique();null!==n.js&&n.js.length>0?(flex.overhead.register.open(a,n.js,r),Array.prototype.forEach.call(n.js,function(t){var n=null,r=null;void 0===i[t]?(u.references.assign(t,o.url),i[t]=!0,n=c.get(t),null===n||e.get().USE_STORAGE_JS===!1?(r=d.measure(),flex.resources.attach.js.connect(t,function(){flex.overhead.register.done(a,t);var e=flex.ajax.send(t,flex.ajax.methods.GET,null,{success:function(e){c.add(t,e.original)}});e.send(),d.measure(r,"loading resources for ("+o.url+"):: "+t)},function(){throw flex.logs.log(g()+f.source.FAIL_TO_LOAD_JS_RESOURCE,flex.logs.types.CRITICAL),d.measure(r,"loading resources for ("+o.url+"):: "+t),h(l),f.source.FAIL_TO_LOAD_JS_RESOURCE})):(u.current.set(t),flex.resources.attach.js.adoption(n,function(){flex.overhead.register.done(a,t),u.current.reset(t)}),c.add(t,n))):flex.overhead.register.done(a,t)})):h(r)}}},h=function(e){"function"==typeof e&&e.call(n.__instance,o.url,o.original_url,n.__instance)},s={html:function(){return n.html}},g=function(){return f.SIGNATURE+":: pattern ("+o.url+")"},y={load:r,html:s.html},{load:y.load,html:y.html}},instance:function(e){return flex.oop.objects.validate(e,[{name:"url",type:"string"},{name:"html",type:"string",value:null},{name:"css",type:"array",value:null},{name:"js",type:"array",value:null}])!==!1?_object({parent:t.classes.SOURCE,constr:function(){this.url=flex.system.url.restore(e.url),this.original_url=e.url},privates:{original:null,html:e.html,css:e.css,js:e.js},prototype:n.proto}).createInstanceClass():null},storage:{add:function(e,n){var o=flex.overhead.globaly.get(t.storage.VIRTUAL_STORAGE_GROUP,t.storage.PATTERN_SOURCES,{});void 0===o[e]&&(o[e]=n)},get:function(e){var n=flex.overhead.globaly.get(t.storage.VIRTUAL_STORAGE_GROUP,t.storage.PATTERN_SOURCES,{});return void 0!==n[e]?n[e]:null}},init:function(e,r,l){var i=e instanceof Array?e:[e],a=(flex.overhead.globaly.get(t.storage.VIRTUAL_STORAGE_GROUP,t.storage.PRELOAD_TRACKER,{}),flex.unique()),s=[],u=!1;flex.overhead.register.open(a,i,function(){"function"!=typeof r||u?flex.system.handle(l):r(s)}),i.forEach(function(e){var t=n.storage.get(e);null!==t?(s.push(t),flex.overhead.register.done(a,e)):(t=n.instance({url:e}),t.load(function(e,t,r){s.push(r),n.storage.add(t,r),o.init(e,r.html()),flex.overhead.register.done(a,t)},function(e,t){u=!0,flex.overhead.register.done(a,t)}))})}},o={proto:function(e){var n=this,o=null,r=null,l=null,i=null,a=null;return o={hooks:{getFromHTML:function(){var n=e.html.match(t.regs.HOOK);return n instanceof Array?(n=function(e){var t={};return e.filter(function(e){return void 0===t[e]?(t[e]=!0,!0):!1})}(n),n=n.map(function(e){return e.replace(RegExp(t.regs.HOOK_OPEN,"gi"),"").replace(RegExp(t.regs.HOOK_CLOSE,"gi"),"")})):[]},wrap:function(e){function n(e){var n=e.nodeValue,o=n.match(t.regs.HOOK),r=null,l=void 0!==t.compatibility.PARENT_TO_CHILD[e.parentNode.nodeName.toLowerCase()]?t.compatibility.PARENT_TO_CHILD[e.parentNode.nodeName.toLowerCase()]:t.compatibility.BASE;if(o instanceof Array){o.forEach(function(e){var o=e.replace(t.regs.HOOK_BORDERS,"");n=n.replace(RegExp(t.regs.HOOK_OPEN+o+t.regs.HOOK_CLOSE,"gi"),"<"+l+' id="'+o+'" class="'+t.css.classes.HOOK_WRAPPER+'"><!--'+e+"--></"+l+">")}),r=document.createElement(e.parentNode.nodeName),r.innerHTML=n;for(var i=0,a=r.childNodes.length;a>i;i+=1)e.parentNode.insertBefore(r.childNodes[0],e);e.parentNode.removeChild(e)}}return void 0!==e.childNodes&&e.childNodes.length>0&&Array.prototype.forEach.call(Array.prototype.filter.call(e.childNodes,function(){return!0}),function(e){"string"==typeof e.innerHTML?p.testReg(t.regs.HOOK,e.innerHTML)&&o.hooks.wrap(e):"string"==typeof e.nodeValue&&p.testReg(t.regs.HOOK,e.nodeValue)&&n(e)}),!0},setters:{inNodes:function(e,n,r,l){var l=l instanceof RegExp?l:RegExp(t.regs.HOOK_OPEN_COM+n+t.regs.HOOK_CLOSE_COM,"gi"),n=n instanceof RegExp?n:RegExp(t.regs.HOOK_OPEN+n+t.regs.HOOK_CLOSE,"gi");void 0!==e.childNodes&&e.childNodes.length>0&&Array.prototype.forEach.call(e.childNodes,function(e){"string"==typeof e.innerHTML?p.testReg(l,e.innerHTML)&&o.hooks.setters.inNodes(e,n,r,l):"string"==typeof e.nodeValue&&p.testReg(n,e.nodeValue)&&r.push(o.hooks.setters.nodeSetter(e.parentNode))})},inAttributes:function(e,n,r,l){var l=l instanceof RegExp?l:RegExp(t.regs.HOOK_OPEN+n+t.regs.HOOK_CLOSE,"gi");e.attributes&&Array.prototype.forEach.call(e.attributes,function(i){"string"==typeof i.value&&""!==i.value&&p.testReg(l,i.value)&&(e.setAttribute(i.nodeName,i.value.replace(l,"{{"+n+"_attr}}")),r.push(o.hooks.setters.attrSetter(RegExp(t.regs.HOOK_OPEN+n+"_attr"+t.regs.HOOK_CLOSE,"gi"),e,i.nodeName,e.getAttribute(i.nodeName))))}),e.childNodes&&Array.prototype.forEach.call(e.childNodes,function(e){o.hooks.setters.inAttributes(e,n,r,l)})},attrSetter:function(e,t,n,o){return function(r){t.setAttribute(n,o.replace(e,r))}},nodeSetter:function(e){function n(e,n){var o=null,l=null;return e.innerHTML!==n&&(l=r.getFirstTagFromHTML(n.replace(t.regs.BODY_CLEAR,"")),void 0!==t.compatibility.CHILD_TO_PARENT[l]&&t.compatibility.CHILD_TO_PARENT[l]!==e.nodeName.toLowerCase()&&(o=document.createElement(t.compatibility.CHILD_TO_PARENT[l]),void 0!==e.attributes&&null!==e.attributes&&void 0!==e.attributes.length&&Array.prototype.forEach.call(e.attributes,function(e){o.setAttribute(e.nodeName,e.value)}),o.innerHTML=n,e.parentNode.insertBefore(o,e),e.parentNode.removeChild(e),e=o)),e}return function(o){if("string"==typeof o.innerHTML)return e.parentNode.insertBefore(o,e),e.parentNode.removeChild(e),!0;if(o instanceof t.classes.RESULT)return o.nodes().forEach(function(t){e.parentNode.insertBefore(t,e)}),e.parentNode.removeChild(e),!0;if(void 0!==o.toString||"string"==typeof o){e.innerHTML="string"==typeof o?o:""+o,e=n(e,o);for(var r=e.childNodes.length-1;r>=0;r-=1)e.parentNode.insertBefore(e.childNodes[0],e);return e.parentNode.removeChild(e),!0}}}},process:function(){e.hooks_html=o.hooks.getFromHTML(),o.hooks.wrap(e.pattern)}},model:{getFromHTML:function(){var n=e.html.match(t.regs.MODEL);return n instanceof Array?(n=function(e){var t={};return e.filter(function(e){return void 0===t[e]?(t[e]=!0,!0):!1})}(n),n=n.map(function(e){return e.replace(t.regs.MODEL_BORDERS,"")})):null},setAttrData:function(e,n){var o=e.getAttribute(t.css.attrs.MODEL_DATA);o="string"==typeof o&&""!==o?JSON.parse(o):[],o.push(n),e.setAttribute(t.css.attrs.MODEL_DATA,JSON.stringify(o))},find:{inStyles:function(e,n){var r=n.split(";");r.forEach(function(n){var r=n.split(":"),l=n.match(t.regs.MODEL);r.length>1&&void 0!==e.style[r[0]]&&(l=n.match(t.regs.MODEL),l instanceof Array&&1===l.length&&(l=l[0].replace(t.regs.MODEL_BORDERS,""),o.model.setAttrData(e,{style:r[0],model:l})))})},inAttrs:function(e,n,r){var r=r instanceof RegExp?r:RegExp(t.regs.MODEL_OPEN+n+t.regs.MODEL_CLOSE,"gi");e.attributes&&Array.prototype.forEach.call(e.attributes,function(t){var l=null;if("string"==typeof t.value&&""!==t.value&&p.testReg(r,t.value)&&("style"===t.nodeName?o.model.find.inStyles(e,t.value):o.model.setAttrData(e,{attr:t.nodeName,model:n}),e.removeAttribute(t.nodeName),void 0!==e[t.nodeName])){try{e[t.nodeName]=null}catch(i){}if(l="default"+t.nodeName[0].toUpperCase()+t.nodeName.substr(1,t.nodeName.length-1),void 0!==e[l])try{e[l]=""}catch(i){}}}),e.childNodes&&Array.prototype.forEach.call(e.childNodes,function(e){o.model.find.inAttrs(e,n,r)})},inHTML:function(e,n,r){var r=r instanceof RegExp?r:RegExp(t.regs.MODEL_OPEN+n+t.regs.MODEL_CLOSE,"gi");void 0!==e.childNodes&&e.childNodes.length>0&&Array.prototype.forEach.call(e.childNodes,function(t){"string"==typeof t.innerHTML?p.testReg(r,t.innerHTML)&&o.model.find.inHTML(t,n,r):"string"==typeof t.nodeValue&&p.testReg(r,t.nodeValue)&&(t.nodeValue=flex.unique(),o.model.setAttrData(e,{model:n,text:t.nodeValue}))})}},process:function(){var t=o.model.getFromHTML();null!==t&&t.forEach(function(t){o.model.find.inAttrs(e.pattern,t),o.model.find.inHTML(e.pattern,t,null)})}},conditions:{getName:function(e){var t=e.split("=");if(2===t.length)return{name:t[0],value:t[1]};throw flex.logs.log(a()+f.pattern.WRONG_CONDITION_DEFINITION+" (original comment: "+e+")",flex.logs.types.CRITICAL),f.pattern.WRONG_CONDITION_DEFINITION},getNodes:function(e,n,r){var l=!1,i=[],s=[],u=!1,c=null;try{Array.prototype.forEach.call(r.childNodes,function(r){var a=null;if(l){if(8===r.nodeType&&r.nodeValue===e)throw l=null,c=r,"closed";8===r.nodeType&&p.testReg(t.regs.CONDITION_STRUCTURE,r.nodeValue)?(a=o.conditions.getName(r.nodeValue).name,-1===s.indexOf(a)&&s.push(a),u=!0):8===r.nodeType&&-1!==s.indexOf(r.nodeValue)?u=!1:i.push(r)}else r===n&&(l=!0)})}catch(d){if("closed"!==d)throw flex.logs.log(a()+f.pattern.UNEXCEPTED_ERROR_CONDITION_PARSER+" (condition name: "+e+")",flex.logs.types.CRITICAL),f.pattern.UNEXCEPTED_ERROR_CONDITION_PARSER}if(l===!1)throw flex.logs.log(a()+f.pattern.CANNOT_FIND_CONDITION_BEGINING+" (condition name: "+e+")",flex.logs.types.CRITICAL),f.pattern.CANNOT_FIND_CONDITION_BEGINING;if(l===!0)throw flex.logs.log(a()+f.pattern.CANNOT_FIND_CONDITION_END+" (condition name: "+e+")",flex.logs.types.CRITICAL),f.pattern.CANNOT_FIND_CONDITION_END;return{nodes:i,included:s,close:c}},find:function(e){function n(e,r){void 0!==e.childNodes&&Array.prototype.forEach.call(e.childNodes,function(e){var l=null,i=null;8===e.nodeType?p.testReg(t.regs.CONDITION_STRUCTURE,e.nodeValue)&&(l=o.conditions.getName(e.nodeValue),void 0===r[l.name]&&(r[l.name]=[]),i=o.conditions.getNodes(l.name,e,e.parentNode),r[l.name].push({value:l.value,open:e,close:i.close,nodes:i.nodes,included:i.included})):void 0!==e.childNodes&&e.childNodes.length>0&&n(e,r)})}function r(e){function t(e){-1===o.indexOf(e)&&o.push(e)}function n(e){var t=document.createTextNode("");return e.parentNode.insertBefore(t,e),function(e){t.parentNode.insertBefore(e,t)}}var o=[];return _object(e).forEach(function(o,r){r instanceof Array&&r.forEach(function(r,l){e[o][l].append=n(r.open),t(r.open),t(r.close)})}),o}function l(e,t){_object(e).forEach(function(t,n){n instanceof Array&&n.forEach(function(n,o){n.nodes.forEach(function(e){n.append(e)}),e[t][o].comment=null,delete e[t][o].comment})}),t.forEach(function(e){null!==e.parentNode&&e.parentNode.removeChild(e)})}var i={},a=null;return n(e,i),a=r(i),l(i,a),i},process:function(e,t){var n=o.conditions.find(e),r={};return _object(t).forEach(function(e,t){var o=!1;void 0!==n[e]?(r[e]={},n[e].forEach(function(n){r[e][n.value]=void 0===r[e][n.value]?[]:r[e][n.value],r[e][n.value]=function(e,t,n){var o={append:function(){var n=[];t.forEach(function(t,o){void 0===t.__to_deleted?e(t):n.push(o)}),n.length>0&&(t=t.filter(function(e,t){return-1===n.indexOf(t)}))},remove:function(){var e=[];t.forEach(function(t,n){return null!==t.parentNode?t.parentNode.removeChild(t):void(void 0!==t.__to_deleted&&e.push(n))}),e.length>0&&(t=t.filter(function(t,n){return-1===e.indexOf(n)}))},del:function(){t.forEach(function(e){e.__to_deleted=!0})},included:n};return o.append.blocked=!1,o.remove.blocked=!1,o}(n.append,n.nodes,n.included),n.nodes.forEach(function(e){n.value!==t?null!==e.parentNode&&e.parentNode.removeChild(e):o=!0})}),r[e].__update=function(e){return function(t){_object(e).forEach(function(e,n){void 0!==n.append&&void 0!==n.remove&&(n.append.blocked||n.remove.blocked||(t===e?n.append():n.remove()))})}}(r[e]),r[e].__block=function(e){return function(){_object(e).forEach(function(e,t){void 0!==t.append&&void 0!==t.remove&&(t.append.blocked=!0,t.remove.blocked=!0)})}}(r[e]),r[e].__unblock=function(e){return function(){_object(e).forEach(function(e,t){void 0!==t.append&&void 0!==t.remove&&(t.append.blocked=!1,t.remove.blocked=!1)})}}(r[e]),r[e].__included=function(e){var t=[];return _object(e).forEach(function(e,n){void 0!==n.included&&(t=t.concat(n.included))}),t}(r[e]),o||flex.logs.log(a()+f.pattern.CANNOT_FIND_CONDITION_VALUE+" (condition name: "+e+' = "'+t+'")',flex.logs.types.NOTIFICATION)):flex.logs.log(a()+f.pattern.CANNOT_FIND_CONDITION_NODES+" (condition name: "+e+")",flex.logs.types.WARNING)}),Object.keys(r).length>0?r:null}},marks:{getFromHTML:function(n){var o=null,r=[];return void 0!==t.regs[n]&&(o=e.html.match(t.regs[n]),o instanceof Array&&(o=function(e){var t={};return e.filter(function(e){return void 0===t[e]?(t[e]=!0,!0):!1})}(o),o.forEach(function(o){var l=o.replace(RegExp(t.regs[n+"_OPEN"],"gi"),"").replace(RegExp(t.regs[n+"_CLOSE"],"gi"),"");e.html=e.html.replace(RegExp(t.regs[n+"_OPEN"]+l.replace(/\./gi,"\\.")+t.regs[n+"_CLOSE"],"gi")," "+t.css.attrs[n+"_MARK"]+'="'+l+'" '),l=l.split(","),l.forEach(function(e){e=e.replace(/\s/gi),-1===r.indexOf(e)&&r.push(e)})}))),r},getFromDOM:function(n,o){var r={};return e[o.toLowerCase()]instanceof Array&&(e[o.toLowerCase()].forEach(function(e){r[e]=_nodes("*["+t.css.attrs[o+"_MARK"]+'*="'+e+'"]',!1,n),null!==r[e].target&&r[e].target.length>0&&(r[e]=r[e].target)}),_object(r).forEach(function(e,n){if(null!==r[e]){switch(o){case t.marks.DOM:r[e]=n}Array.prototype.forEach.call(n,function(e){e.removeAttribute(t.css.attrs[o+"_MARK"])})}})),r},process:function(){[t.marks.DOM].forEach(function(t){e[t.toLowerCase()]=o.marks.getFromHTML(t)})}},process:function(){if(e.pattern=r.getParent(r.getFirstTagFromHTML(e.html)),null!==e.pattern)return o.marks.process(),e.pattern.innerHTML=e.html,o.hooks.process(),o.model.process(),!0;throw flex.logs.log(a()+f.pattern.CANNOT_CREATE_WRAPPER,flex.logs.types.CRITICAL),f.pattern.CANNOT_CREATE_WRAPPER}},r={getParent:function(e){return"string"==typeof e?void 0!==t.compatibility.CHILD_TO_PARENT[e]?document.createElement(t.compatibility.CHILD_TO_PARENT[e]):document.createElement(t.compatibility.BASE):null},getFirstTagFromHTML:function(e){var n=e.match(t.regs.FIRST_TAG);return null!==n&&1===n.length?n[0].replace(t.regs.TAG_BORDERS,"").match(t.regs.FIRST_WORD)[0].toLowerCase():(flex.logs.log(a()+f.pattern.CANNOT_FIND_FIRST_TAG+"(Probably hook has symbol of caret inside (\\n, \\r))",flex.logs.types.NOTIFICATION),null)}},l=function(n){var r={},l=e.pattern.cloneNode(!0);return e.hooks_html.forEach(function(e){var t=[];o.hooks.setters.inAttributes(l,e,t),o.hooks.setters.inNodes(l,e,t),r[e]=function(e){return function(t){e.forEach(function(e){e(t)})}}(t)}),{clone:l,setters:r,dom:o.marks.getFromDOM(l,t.marks.DOM),applyConditions:function(){var e=null;return void 0!==n&&null!==n&&(e=o.conditions.process(l,n)),e}}},a=function(){return f.SIGNATURE+":: pattern ("+n.url+")"},i={build:o.process,clone:l},{build:i.build,pattern:i.clone}},instance:function(e){return flex.oop.objects.validate(e,[{name:"url",type:"string"},{name:"html",type:"string"}])!==!1?_object({parent:t.classes.PATTERN,constr:function(){this.url=flex.system.url.restore(e.url)},privates:{html:e.html,pattern:null,hooks_html:null,dom:null},prototype:o.proto}).createInstanceClass():null},storage:{add:function(e,n){var o=flex.overhead.globaly.get(t.storage.VIRTUAL_STORAGE_GROUP,t.storage.PATTERNS,{});void 0===o[e]&&(o[e]=n)},get:function(e){var n=flex.overhead.globaly.get(t.storage.VIRTUAL_STORAGE_GROUP,t.storage.PATTERNS,{});return void 0!==n[e]?n[e]:null}},init:function(e,t){var n=o.storage.get(e);return null!==n?n:(n=o.instance({url:e,html:t}),n.build()!==!1?(r.init(e,n.pattern),o.storage.add(e,n),n):null)}},r={proto:function(e){var n=this,e=e,o=null,a=null,s=null,c=null,d=null,g=null,y=null,E=null,v=null,_={ExArray:flex.libraries.types.array.ExArray};return y={update:function(e,n,o,r){var e=e instanceof Array?void 0!==e[0]?e[0]:{}:e,l=void 0!==o&&null!==o?o:{},r=void 0!==r&&null!==r?r:null;return _object(e).forEach(function(e,n){void 0===l[e]?n instanceof t.classes.RESULT?(l["__"+e+"__"]=n.url,l[e]=n.hooks_map()):"object"==typeof n?(l[e]={},l[e]=y.update(n,l[e].__conditions__,l[e],null!==r&&void 0!==r[e]?r[e].hooks:null)):l[e]=!0:n instanceof t.classes.RESULT||"object"!=typeof n||(l[e]=y.update(n,l[e].__conditions__,l[e],null!==r&&void 0!==r[e]?r[e].hooks:null))}),l.__conditions__=void 0!==n?n:null,null!==r&&_object(r).forEach(function(e,t){void 0===l["__"+e+"__"]&&"object"==typeof t&&void 0!==t.url?(l["__"+e+"__"]=t.url,void 0!==t.hooks&&(l[e]=y.update(l[e],null,null,t.hooks))):void 0!==l["__"+e+"__"]&&"object"==typeof t&&void 0!==t.url&&(l[e]=y.update(l[e],null,null,t.hooks))}),l},convertHooks:function(e,t){var o=[],t=t instanceof Array?t:[t],r=y.update(t,e.__conditions__,e);return t.forEach(function(e){var t={};_object(e).forEach(function(e,o){if(void 0===r[e])throw flex.logs.log(f.instance.BAD_HOOK_FOR_CLONE+"("+n.url+")",flex.logs.types.CRITICAL),f.instance.BAD_HOOK_FOR_CLONE;"boolean"==typeof r[e]&&r[e]===!0?t[e]=o:"object"==typeof r[e]&&void 0!==r["__"+e+"__"]&&"object"==typeof o&&null!==o?t[e]=i.instance({url:r["__"+e+"__"],conditions:r[e].__conditions__,hooks:y.convertHooks(r[e],o)}):flex.logs.log(f.instance.NO_URL_FOR_CLONE_HOOK+"("+n.url+")",flex.logs.types.WARNING)}),o.push(t)}),o},clone:function(e,o,r){var l=y.convertHooks(e,o),a=null,r="function"==typeof r?r:null;return l.length>0?(a=i.instance({url:n.url,hooks:l,callbacks:{success:r}}).render(!0),a instanceof t.classes.RESULT?a.nodes():null):void 0}},a={build:function(e){return e instanceof Array?e.forEach(function(t,n){e[n]=a.build(e[n])}):null!==e&&_object(e).forEach(function(t,n){"function"==typeof n?e[t]=n():"object"==typeof n&&null!==n&&(a.convertObj(n,e,t),delete e[t])}),e},apply:function(e,n,r,l){null!==e&&_object(n).forEach(function(n,i){var a=void 0!==l[n]&&void 0!==l[n].hooks?l[n].hooks:null;void 0!==e[n]?(e[n]instanceof t.classes.RESULT&&(o.current["__"+n+"__"]=e[n].map().original,s.current.model["__"+n+"__"]=e[n].model(),s.current.binds["__"+n+"__"]=e[n].binds(),c.current["__"+n+"__"]=e[n].dom().original,r[n]=e[n].hooks_map(),null!==a&&(a=y.update(null,null,r[n],a),e[n].hooks_map(a))),i(e[n])):i("")})},convertObj:function(e,t,n){_object(e).forEach(function(e,o){var r=n+"."+e;"object"==typeof o&&null!==o?a.convertObj(o,t,r):t[r]=o})}},o={current:{},map:{},update:function(e){var t={__context:e.childNodes.length>0?e.childNodes[0]:null};"object"==typeof o.current&&null!==o.current&&_object(o.current).forEach(function(e,n){t[e]=n}),o.map.push(t)},reset:function(){o.map=[]},iteration:function(){o.current={}},collapse:function(e){function t(e){var n=null;return e instanceof Array?(n=[],e.forEach(function(e){n.push(t(e))})):(n={},void 0!==e.__context&&(n.__context=r.map.create(e.__context.parentNode)),_object(e).forEach(function(e,o){"__context"!==e&&("object"==typeof o||o instanceof Array)&&(n[e]=t(o))})),n}return{map:t(e),original:e,update:function(){var e=o.collapse(this.original);this.map=e.map}}}},s={current:null,model:null,binds:null,map:function(e,n){var o=_nodes("*["+t.css.attrs.MODEL_DATA+"]",!1,e).target;return o.length>0&&Array.prototype.forEach.call(o,function(e){var o=JSON.parse(e.getAttribute(t.css.attrs.MODEL_DATA));o instanceof Array&&o.forEach(function(t){var o=null;void 0===s.current.binds[t.model]&&(s.current.binds[t.model]=[]),void 0!==t.text?(o=p.getTextNode(e,t.text),null!==o&&(o.nodeValue=void 0!==n[t.model]?n[t.model]:"",s.current.binds[t.model].push({node:o,attr:null,prop:"nodeValue",style:null}))):s.current.binds[t.model].push({node:e,attr:void 0===t.attr?null:t.attr,prop:void 0===t.prop?null:t.prop,style:void 0===t.style?null:t.style})})}),_object(n).forEach(function(e,t){void 0===s.current.binds[e]&&(s.current.binds[e]=t)}),s.current.binds},update:function(e,n){function o(e,n){function o(e){var t="";return e.split("-").forEach(function(e,n){n>0&&(e=String.prototype.toUpperCase.apply(e.charAt(0))+e.substr(1,e.length-1)),t+=e}),t}function r(e,t,n,o){var r=n+o;e instanceof Array&&e.forEach(function(e){e.state_code!==r&&(e.state_code=r,e.call(t,n,o))})}function l(e,t,n,l,i){null!==t.attr&&!function(e,t,n,o,l){_node(n).bindingAttrs().bind(o,function(n,o){e[t]!==o&&(e[t]=o,r(l,this,n,o))})}(n,e,t.node,t.attr,l),null!==t.style&&!function(e,t,n,o,l){_node(n).bindingProps().bind("style."+o,function(n,o){e[t]!==o&&(e[t]=o,r(l,this,n,o))})}(n,e,t.node,o(t.style),l),p.binds.isPossible(t.node,i)?!function(e,t,n,o,l){p.binds.assing(n,i,function(n,i){var a=i();e[t]!==a&&(e[t]=a,r(l,this,o,a))})}(n,e,t.node,t.attr,l):null!==t.prop&&!function(e,t,n,o,l){_node(n).bindingProps().bind(o,function(n,o){e[t]!==o&&(e[t]=o,r(l,this,n,o))})}(n,e,t.node,t.prop,l)}function i(e,t,n,l,i){null!==t.attr&&!function(e,t,n,o,l){e[t]=n.getAttribute(o),_object(e).binding().bind(t,function(e){var t=!1;n.getAttribute(o)!==e&&(n.setAttribute(o,e),t=!0),void 0!==n[o]&&n[o]!==e&&(n[o]=e,t=!0),t&&r(l,n,o,e)})}(n,e,t.node,t.attr,l),null!==t.style&&!function(e,t,n,o,l){e[t]=n.style[o],_object(e).binding().bind(t,function(e){n.style[o]!==e&&(n.style[o]=e,r(l,n.style,o,e))})}(n,e,t.node,o(t.style),l),null!==t.prop&&void 0!==t.node[i]&&!function(e,t,n,o,l){e[t]=n[o],_object(e).binding().bind(t,function(e){n[o]!==e&&(n[o]=e,r(l,n,o,e))})}(n,e,t.node,i,l)}null!==e&&_object(e).forEach(function(o,a){var s=[];p.testReg(t.regs.GROUP_PROPERTY,o)||(n[o]=null,a instanceof Array?a.forEach(function(e){var r=null!==e.prop?e.prop:e.attr;e.node[t.storage.NODE_BINDING_DATA]={outcome_call:!1},l(o,e,n,s,r),i(o,e,n,s,r)}):!function(e,t,n,o){e[t]=n,_object(e).binding().bind(t,function(e){r(o,null,null,e)})}(n,o,a,s),e[o]={addHandle:function(e){return e.state_code=null,e.id=flex.unique(),this.handles.push(e),e.id},removeHandle:function(e){var t=-1;this.handles.forEach(function(n,o){n.id===e&&(t=o)}),-1!==t&&this.handles.splice(t,1)},handles:s},e[o].addHandle.bind(e[o]),e[o].removeHandle.bind(e[o]))})}s.map(e,n),o(s.current.binds,s.current.model),s.model.push(s.current.model),s.binds.push(s.current.binds)},clear:function(e){var n=_nodes("*["+t.css.attrs.MODEL_DATA+"]",!1,e).target;n.length>0&&Array.prototype.forEach.call(n,function(e){e.removeAttribute(t.css.attrs.MODEL_DATA)})},reset:function(){s.model=[],s.binds=[]},iteration:function(){s.current={model:{},binds:{}}},getLast:function(){var e={model:s.model instanceof Array?s.model[s.model.length-1]:s.model,binds:s.binds instanceof Array?s.binds[s.binds.length-1]:s.binds};return e},getDefaults:function(e,t){var n={};return _object(e).forEach(function(e,o){void 0===t[e]&&(n[e]=o)}),n},changes:{attach:function(e,t,n){e.model()instanceof Array&&(e.model(new _.ExArray(e.model())),function(e,t,n){e.model().bind("add",function(o){var r=null,l=this,i=null;r=y.clone(e.hooks_map(),o.item,function(t,n){return l[o.index]=n.model,e.binds().splice(o.index,0,n.binds),e.dom().original instanceof Array&&e.dom().original.splice(o.index,0,n.dom.original[0]),e.map().original instanceof Array&&e.map().original.splice(o.index,0,n.map.original[0]),!1}),t.splice(o.index,0,r),t.length>1?t.length-1>o.index?(i=t[o.index+1][0],null!==i.parentNode&&r.forEach(function(e){i.parentNode.insertBefore(e,i)})):(i=t[0][0],null!==i.parentNode&&r.forEach(function(e){i.parentNode.appendChild(e)})):r.forEach(function(e){n.parentNode.insertBefore(e,n)})}),e.model().bind("remove",function(n){void 0!==t[n.index]&&t[n.index]instanceof Array&&t[n.index].forEach(function(e){e.parentNode.removeChild(e)}),t.splice(n.index,1),e.binds().splice(n.index,1),e.dom().original instanceof Array&&e.dom().original.splice(n.index,1),e.map().original instanceof Array&&e.map().original.splice(n.index,1)})}(e,t,n))}}},c={current:null,dom:null,update:function(e){Object.keys(c.current).length>0&&_object(c.current).forEach(function(t,n){e[t]=n}),c.dom.push(e)},reset:function(){c.dom=[]},iteration:function(){c.current={}},collapse:function(e){function n(e,o,l){function a(e,n){function o(e,n){Array.prototype.forEach.call(e,function(o,r){var l=e.length>1?n.concat([r]):n;void 0!==o[t.other.INDEXES]&&-1===i.indexOf(o)&&(i.push(o),delete o[t.other.INDEXES]),(void 0===o[t.other.INDEXES]||l.length>o[t.other.INDEXES].length)&&(o[t.other.INDEXES]=e.length>1?n.concat([r]):n)})}e instanceof NodeList?o(e,n):e instanceof r.nodeList.NODE_LIST&&e.collections.forEach(function(e){o(e,n)})}function s(e,t,n){var o=[],l=[];return e.length>0&&"object"==typeof e[0]&&null!==e[0]?(_object(e[0]).forEach(function(e){o.push(e)}),o.forEach(function(o){t[o]=[],e.forEach(function(e,i){e[o]instanceof NodeList||e[o]instanceof r.nodeList.NODE_LIST?(t[o].push(e[o]),a(e[o],n.concat([i]))):e[o]instanceof Array?(t[o].push({}),s(e[o],t[o][t[o].length-1],n.concat([i])),-1===l.indexOf(o)&&l.push(o)):"object"!=typeof e[o]||null===e[o]||e[o]instanceof r.nodeList.NODE_LIST||(t[o].push(e[o]),-1===l.indexOf(o)&&l.push(o));
})}),l.forEach(function(e){var o=t[e];t[e]={},s(o,t[e],n)}),_object(t).forEach(function(e,n){var o=r.nodeList.create();n instanceof Array&&(n.forEach(function(e){o.add(e)}),t[e]=o)}),t[name]):void 0}_object(e).forEach(function(e,t){t instanceof Array?(o[e]={},s(t,o[e],l)):t instanceof NodeList?(a(t,l),o[e]=r.nodeList.create(t)):"object"==typeof t&&(o[e]={},n(t,o[e],l))})}function o(e){var t=null;return e instanceof Array?(t=[],e.forEach(function(e){t.push(o(e))})):e instanceof NodeList?t=r.nodeList.create(e):"object"!=typeof e||null===e||e instanceof r.nodeList.NODE_LIST||(t={},_object(e).forEach(function(e,n){t[e]=o(n)})),t}var l=[],i=[];return null!==e&&n(e,l,[]),{listed:o(e),grouped:l,original:e,update:function(){var t=c.collapse(e);this.grouped=t.grouped,this.listed=t.listed}}}},E={get:function(e,t){var n={};return null!==t&&_object(t).forEach(function(t,o){n[t]=o(e)}),Object.keys(n).length>0?n:null},setDefault:function(e){var t=h.storage.get(n.url);return"object"==typeof t&&null!==t&&("object"==typeof e&&null!==e||(e={}),_object(t).forEach(function(t,n){void 0===e[t]&&(e[t]=n)}),e=Object.keys(e).length>0?e:null),e},tracking:function(e,t,n){var o=[];"object"==typeof e&&null!==e&&(_object(e).forEach(function(r,l){if("function"==typeof l)if(void 0!==l.tracking&&void 0!==t[r])l.tracking=l.tracking instanceof Array?l.tracking:[l.tracking],l.tracking.forEach(function(l){var i={},a=s.getLast(),u=null;void 0!==a.binds[l]&&"function"==typeof a.binds[l].addHandle&&(_object(n).forEach(function(e,t){i[e]=void 0!==a.model[e]?function(){return a.model[e]}:t}),u=function(e,t,n,o){return function(){var r={},l=null;_object(n).forEach(function(e,t){r[e]="function"==typeof t?t():t}),l=e[t](r),o[t].__included.length>0&&o[t].__included.forEach(function(t){"function"==typeof e[t]&&void 0!==o[t]&&void 0!==e[t].tracking&&o[t].__unblock()}),o[t].__update(l),void 0!==o[t][l]&&o[t][l].included.length>0&&o[t][l].included.forEach(function(t){var n=null;"function"==typeof e[t]&&void 0!==o[t]&&void 0!==e[t].tracking&&(n=e[t](r),o[t].__update(n))}),o[t].__included.length>0&&o[t].__included.forEach(function(t){"function"==typeof e[t]&&void 0!==o[t]&&void 0!==e[t].tracking&&o[t].__block()})}}(e,r,i,t),a.binds[l].addHandle(u),o.push(u))});else{var i=l(n);void 0!==t[r]&&_object(t[r]).forEach(function(e,n){e!==i&&void 0!==n.del&&(n.del(),t[r][e]=null,delete t[r][e])})}}),o.forEach(function(e){e()}))}},g={apply:function(e,t,o){var r=u.storage.get(null!==o?[o,n.url]:n.url);null!==r&&r.forEach(function(n){d.handle(n,e,t)})}},d={build:function(t){var r=null,i=null,u=null,f=document.createTextNode(""),p=[f],h=[];return null!==t.hooks&&(o.reset(),s.reset(),c.reset(),t.conditions=E.setDefault(t.conditions),t.hooks=a.build(t.hooks),i=y.update(t.hooks,t.conditions,null,t.map),t.hooks=t.hooks instanceof Array?t.hooks:[t.hooks],t.hooks.forEach(function(n){var l=null;r=e.pattern(E.get(n,t.conditions),t.conditions),o.iteration(),s.iteration(),c.iteration(),a.apply(n,r.setters,i,t.map),o.update(r.clone),s.update(r.clone,s.getDefaults(n,r.setters)),s.clear(r.clone),c.update(r.dom),l=r.applyConditions(),h.push(Array.prototype.filter.call(r.clone.childNodes,function(){return!0})),h[h.length-1].push(document.createTextNode("")),p=p.concat(h[h.length-1]),E.tracking(t.conditions,l,n)})),u=l.instance({url:n.url,nodes:p,map:o.collapse(o.map),model:s.model,binds:s.binds,dom:c.collapse(c.dom),hooks_map:i,instance:e.__instance,handle:function(e,t){return d.handle(e,u,t)}}),s.changes.attach(u,h,f),g.apply(u,t.resources,t.component),u},handle:function(e,t,n){function o(e){function t(e){return e instanceof Array||e instanceof _.ExArray?(e.forEach(function(n,o){e[o]=t(n)}),1===e.length?e[0]:e):"object"==typeof e?(_object(e).forEach(function(n,o){-1!==n.indexOf("__")&&(o instanceof Array||o instanceof _.ExArray?(o.forEach(function(o,r){e[n][r]=t(o)}),e[n]=1===o.length?o[0]:o):"object"==typeof o&&(e[n]=t(o)))}),e):void 0}return{model:t(e.model),binds:t(e.binds),map:t(e.map.map),dom:{grouped:t(e.dom.grouped),listed:t(e.dom.listed)},resources:e.resources}}var r=null,l=null;"function"==typeof e&&(l={model:t.model(),binds:t.binds(),map:t.map(),dom:t.dom(),resources:n},r=o(l),e.call(t,r,l))},bind:function(e){return function(){return d.build(e)}}},v={build:d.build,handle:d.handle,controllers:{apply:g.apply},bind:d.bind,clone:y.clone},{build:v.build,handle:v.handle,controllers:{apply:v.controllers.apply},bind:v.bind,clone:v.clone}},instance:function(e){return flex.oop.objects.validate(e,[{name:"url",type:"string"},{name:"pattern",type:"function"}])!==!1?_object({parent:t.classes.INSTANCE,constr:function(){this.url=flex.system.url.restore(e.url)},privates:{pattern:e.pattern},prototype:r.proto}).createInstanceClass():null},storage:{add:function(e,n){var o=flex.overhead.globaly.get(t.storage.VIRTUAL_STORAGE_GROUP,t.storage.PATTERNS,{});void 0===o[e]&&(o[e]=n)},get:function(e){var n=flex.overhead.globaly.get(t.storage.VIRTUAL_STORAGE_GROUP,t.storage.PATTERNS,{});return void 0!==n[e]?n[e]:null}},init:function(e,t){var n=r.storage.get(e);return null===n&&void 0!==t&&(n=r.instance({url:e,pattern:t}),r.storage.add(e,n)),n},nodeList:{NODE_LIST:function(e){this.collections=e instanceof NodeList?[e]:p.isNode(e)?[[e]]:[]},init:function(){r.nodeList.NODE_LIST.prototype={add:function(e){e instanceof NodeList?this.collections.push(e):e instanceof r.nodeList.NODE_LIST?this.collections=this.collections.concat(e.collections):p.isNode(e)&&this.collections.push([e])},css:function(e){var t=this;"object"==typeof e&&null!==e&&_object(e).forEach(function(e,n){t.collections.forEach(function(t){Array.prototype.forEach.call(t,function(t){void 0!==t.style[e]&&(t.style[e]=n)})})})},addClass:function(e){this.collections.forEach(function(t){Array.prototype.forEach.call(t,function(t){var n=t.className.replace(/\s{2,}/gi,"").split(" ");-1===n.indexOf(e)&&(n.push(e),t.className=n.join(" "))})})},removeClass:function(e){this.collections.forEach(function(t){Array.prototype.forEach.call(t,function(t){var n=t.className.replace(/\s{2,}/gi,"").split(" "),o=n.indexOf(e);-1!==o&&(n.splice(o,1),t.className=n.join(" "))})})},show:function(){this.collections.forEach(function(e){Array.prototype.forEach.call(e,function(e){e.style.display=void 0!==e.__display?e.__display:"block"})})},hide:function(){this.collections.forEach(function(e){Array.prototype.forEach.call(e,function(e){e.__display=e.style.display,e.style.display="none"})})},remove:function(){this.collections.forEach(function(e){Array.prototype.forEach.call(e,function(e){void 0!==e.parentNode&&null!==e.parentNode&&e.parentNode.removeChild(e)})}),this.collections=[]},append:function(e){"function"==typeof e.appendChild&&this.collections.forEach(function(t){Array.prototype.forEach.call(t,function(t){e.appendChild(t)})})},insertBefore:function(e,t){"function"==typeof e.insertBefore&&p.isNode(t)&&this.collections.forEach(function(n){Array.prototype.forEach.call(n,function(n){e.insertBefore(n,t)})})},attr:function(e,t){var n=[];return this.collections.forEach(function(o){Array.prototype.forEach.call(o,function(o){void 0!==t?(o.setAttribute(e,t),n.push(!0)):n.push(o.getAttribute(e))})}),1===n.length?n[0]:n},removeAttr:function(e){var t=[];return this.collections.forEach(function(n){Array.prototype.forEach.call(n,function(n){t.push(n.removeAttribute(e))})}),1===t.length?t[0]:t},on:function(e,n){if("function"!=typeof n)throw Error("Defined [handle] is not a function");this.collections.forEach(function(o){Array.prototype.forEach.call(o,function(o){var l=r.nodeList.create(o);l.indexes=o[t.other.INDEXES],flex.events.DOM.add(o,e,n.bind(l))})})},getAsArray:function(){var e=[];this.collections.forEach(function(t){Array.prototype.forEach.call(t,function(t){e.push(t)})})}}},create:function(e){return new r.nodeList.NODE_LIST(e)},addMethod:function(e,t){"string"==typeof e&&"function"==typeof t&&(void 0!==r.nodeList.NODE_LIST.prototype[e]&&flex.logs.log("Method ["+e+"] of NODE_LIST list class was overwritten.",flex.logs.types.NOTIFICATION),r.nodeList.NODE_LIST.prototype[e]=t)}},map:{MAP:function(e){if(void 0===e||void 0===e.nodeType)throw Error("Context [context] should be a node.");this.context=e},init:function(){r.map.MAP.prototype={select:function(e){var t=_nodes(e,!1,this.context);return null!==t.target&&t.target.length>0?t.target.length>1?t.target:t.target[0]:null}}},create:function(e){return new r.map.MAP(e)}}},l={proto:function(e){var t=null,n=null,o=null;return o=function(t){return e.instance.clone(e.hooks_map,t)},t=function(t,n,o,r){null!==t?Array.prototype.forEach.call(t,function(t){e.nodes.forEach(function(e){r?t.parentNode.insertBefore(e,t):t.appendChild(e)}),r&&t.parentNode.removeChild(t)}):null!==n&&void 0!==n.parentNode&&null!==n.parentNode?Array.prototype.forEach.call(n,function(){e.nodes.forEach(function(e){n.parentNode.insertBefore(e,n)})}):null!==o&&void 0!==o.parentNode&&null!==o.parentNode&&Array.prototype.forEach.call(o,function(){var t=void 0!==o.nextSibling?o.nextSibling:null;e.nodes.forEach(null!==t?function(e){t.parentNode.insertBefore(e,t)}:function(e){o.parentNode.appendChild(e)})}),flex.events.core.fire(flex.registry.events.ui.patterns.GROUP,flex.registry.events.ui.patterns.MOUNTED,e.nodes)},n={nodes:function(){return e.nodes},map:function(t){return void 0!==t&&(e.map=t),e.map},model:function(t){return void 0!==t&&(e.model=t),e.model},dom:function(t){return void 0!==t&&(e.dom=t),e.dom},binds:function(t){return void 0!==t&&(e.binds=t),e.binds},handle:function(){return e.handle},hooks_map:function(){return e.hooks_map},instance:function(){return e.instance},clone:o,mount:t},{nodes:n.nodes,mount:n.mount,map:n.map,dom:n.dom,model:n.model,binds:n.binds,hooks_map:n.hooks_map,instance:n.instance,handle:n.handle,clone:n.clone}},instance:function(e){return flex.oop.objects.validate(e,[{name:"url",type:"string"},{name:"nodes",type:"array"},{name:"handle",type:"function"},{name:"hooks_map",type:"object",value:null},{name:"instance",type:"object",value:null},{name:"map",type:["object","array"],value:null},{name:"model",type:["object","array"],value:null},{name:"dom",type:["object","array"],value:null},{name:"binds",type:["object","array"],value:null}])!==!1?_object({parent:t.classes.RESULT,constr:function(){this.url=flex.system.url.restore(e.url)},privates:{nodes:e.nodes,map:e.map,model:e.model,binds:e.binds,dom:e.dom,handle:e.handle,hooks_map:e.hooks_map,instance:e.instance},prototype:l.proto}).createInstanceClass():null}},i={proto:function(o){var l=this,a=null,s=null,u=null,c=null,d=null,p=null;return s={reset:function(){o.patterns={}},find:function(e){e=e instanceof Array?e:[e],null!==e&&e.forEach(function(e){_object(e).forEach(function(e,n){n instanceof t.classes.CALLER&&void 0===o.patterns[n.url]&&(o.patterns[n.url]=n.url,s.find(n.hooks()))})}),void 0===o.patterns[l.url]&&(o.patterns[l.url]=l.url)}},p={getStructure:function(t){function n(e,t){Array.prototype.forEach.call(e,function(e){var o=e.nodeName.toLowerCase(),r={};if(r.url=e.hasAttribute("src")?e.getAttribute("src"):null,null===r.url)throw flex.logs.log(f.SIGNATURE+"If you use inside template other templates, you cannot use nothing else. And src should be defined fro all included templates.",flex.logs.types.CRITICAL),Error(f.caller.PATTERN_WITHOUT_SRC);r.sub={},e.children.length>0&&n(e.children,r.sub),void 0!==t[o]?t[o]instanceof Array?t[o].push(r):t[o]=[t[o],r]:t[o]=r})}function r(e,t,n){function o(e,t,n,o){_object(e).forEach(function(e,n){t[e]=n}),void 0!==n[o].sub&&r(n[o].sub,e,t)}_object(e).forEach(function(r,l){if(l instanceof Array)throw flex.logs.log(f.SIGNATURE+"You cannot use templates in templates in same level. You can only include template into templates. Problematic hook: "+r+".",flex.logs.types.CRITICAL),Error(f.caller.ONLY_ONE_TEMPLATE_ON_SAME_LEVEL);n[r]={url:l.url,hooks:{}},void 0===t[r]||null===t[r]||"object"!=typeof t[r]||t[r]instanceof Array?t[r]instanceof Array&&(n[r].hooks=[],t[r].forEach(function(t){var l={};o(t,l,e,r),n[r].hooks.push(l)})):o(t[r],n[r].hooks,e,r)})}var l=document.createElement("div"),i={},a={},s={};if(l.innerHTML=t,n(l.children,i),void 0!==i[e.values.PATTERN_NODE.toLowerCase()])return s[e.values.PATTERN_NODE.toLowerCase()]=o.hooks,r(i,s,a),a[e.values.PATTERN_NODE.toLowerCase()];throw Error(f.caller.CANNOT_FIND_ROOT_TEMPLATE)},addGetters:function(e){return void 0!==e.hooks&&(e.hooks instanceof Array?e.hooks.forEach(function(t,n){_object(t).forEach(function(t,o){"object"!=typeof o||o instanceof Array||void 0===o.url||(e.hooks[n][t]=i.instance({url:o.url,hooks:p.addGetters(o)}))})}):"object"==typeof e.hooks&&_object(e.hooks).forEach(function(t,n){"object"!=typeof n||n instanceof Array||void 0===n.url||(e.hooks[t]=i.instance({url:n.url,hooks:p.addGetters(n)}))})),e.hooks},process:function(t){var n={};return RegExp("<\\s*"+e.values.PATTERN_NODE+"\\s{1,}src\\s*=").test(t)?(n=p.getStructure(t),_object(o).forEach(function(e,t){-1===["hooks","__instance","pattern"].indexOf(e)&&(n[e]=t)}),n.component=l.url,p.addGetters(n),i.instance(n)):!1}},u={values:{caller:function(e){var t=r.init(e.url),n=e.hooks();if(null===t)throw flex.logs.log(c()+f.caller.CANNOT_GET_CHILD_PATTERN+"("+e.url+")",flex.logs.types.CRITICAL),flex.system.handle(o.callbacks.fail,l.url),f.caller.CANNOT_GET_CHILD_PATTERN;return u.apply(n),t.bind({hooks:n,resources:e.resources(),conditions:e.conditions(),component:e.component(),map:e.map()})}},value:function(e){function n(e){return e instanceof t.classes.CALLER?u.values.caller(e):"function"==typeof e?n(e()):e}return void 0!==e?n(e):""},apply:function(e){var e=void 0!==e?e:o.hooks;return e instanceof Array?e.forEach(function(t,n){e[n]=u.apply(e[n])}):"object"==typeof e&&null!==e&&_object(e).forEach(function(t,n){e[t]=u.value(n)}),e},defaults:function(){function e(t,n){_object(t).forEach(function(t,o){void 0===n[t]?n[t]=o:null!==n[t]&&"object"==typeof n[t]&&e(o,n[t])})}var t=y.storage.get(l.url);return null!==t&&"object"==typeof t&&e(t,o.hooks),!0}},a=function(e){var e="boolean"==typeof e?e:!1;if(e){if(u.apply(),o.pattern=r.init(l.url),null!==o.pattern&&(o.pattern=o.pattern.build({hooks:o.hooks,resources:o.resources,conditions:o.conditions,component:o.component,map:o.map}),o.pattern instanceof t.classes.RESULT))return o.pattern.handle()(o.callbacks.success,o.resources),o.pattern}else s.reset(),s.find(o.hooks),n.init(function(){function e(n){"object"==typeof n&&_object(n).forEach(function(n,o){var r=null;void 0!==o.url&&(r=flex.system.url.restore(o.url),-1===t.indexOf(r)&&t.push(r),void 0!==o.hooks&&e(o.hooks))})}var t=[];return _object(o.patterns).forEach(function(e){t.push(e)}),e(o.map),t}(),function(e){var n=null;if(u.defaults(),n=1===e.length?p.process(e[0].html()):null,null!==n)n.render(!1,l.url);else{if(u.apply(),o.pattern=r.init(l.url),null===o.pattern)throw flex.logs.log(c()+f.caller.CANNOT_GET_PATTERN,flex.logs.types.CRITICAL),flex.system.handle(o.callbacks.fail,l.url),f.caller.CANNOT_GET_PATTERN;o.pattern=o.pattern.build({hooks:o.hooks,resources:o.resources,conditions:o.conditions,component:o.component,map:o.map}),o.pattern instanceof t.classes.RESULT&&(o.pattern.mount(o.node,o.before,o.after,o.replace),null!==o.callbacks.success&&o.pattern.handle()(o.callbacks.success,o.resources))}},function(){throw flex.logs.log(c()+f.caller.CANNOT_INIT_PATTERN,flex.logs.types.CRITICAL),flex.system.handle(o.callbacks.fail,l.url),f.caller.CANNOT_INIT_PATTERN})},c=function(){return f.SIGNATURE+":: caller ("+l.url+")"},d={render:a,hooks:function(){return o.hooks},resources:function(){return o.resources},conditions:function(){return o.conditions},component:function(){return o.component},map:function(){return o.map}},{render:d.render,hooks:d.hooks,conditions:d.conditions,resources:d.resources,component:d.component,map:d.map}},instance:function(e){return flex.oop.objects.validate(e,[{name:"url",type:"string"},{name:"node",type:["node","string","array","NodeList"],value:null},{name:"before",type:["node","string","array","NodeList"],value:null},{name:"after",type:["node","string","array","NodeList"],value:null},{name:"id",type:"string",value:flex.unique()},{name:"replace",type:"boolean",value:!1},{name:"hooks",type:["object","array"],value:null},{name:"conditions",type:"object",value:null},{name:"callbacks",type:"object",value:{}},{name:"map",type:"object",value:{}},{name:"resources",type:"object",value:{}},{name:"remove_missing_hooks",type:"boolean",value:!0},{name:"component",type:"string",value:null}])!==!1?(flex.oop.objects.validate(e.callbacks,[{name:"before",type:"function",value:null},{name:"success",type:"function",value:null},{name:"fail",type:"function",value:null}]),_object({parent:t.classes.CALLER,constr:function(){this.url=flex.system.url.restore(e.url)},privates:{id:e.id,node:null!==e.node?"string"==typeof e.node?_nodes(e.node).target:e.node instanceof Array?e.node:e.node instanceof NodeList?e.node:[e.node]:null,before:null!==e.before?"string"==typeof e.before?_nodes(e.before).target:e.before instanceof Array?e.before:e.before instanceof NodeList?e.before:[e.before]:null,after:null!==e.after?"string"==typeof e.after?_nodes(e.after).target:e.after instanceof Array?e.after:e.after instanceof NodeList?e.after:[e.after]:null,replace:e.replace,hooks:e.hooks,conditions:e.conditions,callbacks:e.callbacks,resources:e.resources,remove_missing_hooks:e.remove_missing_hooks,map:e.map,resources:e.resources,component:e.component,pattern:null},prototype:i.proto}).createInstanceClass()):null}},a={init:function(t){function n(t){var o=t.parentNode.nodeName.toLowerCase();return o!==e.values.PATTERN_NODE?"body"!==o?n(t.parentNode):!0:!1}var o=_nodes(e.values.PATTERN_NODE).target,t="boolean"==typeof t?t:!1;null!==o&&o instanceof NodeList&&o.length>0&&Array.prototype.forEach.call(o,function(e){n(e)&&((e.hasAttribute("success")||e.hasAttribute("error"))&&t||a.caller(e))})},caller:function(e,t){function n(e,t){var n=-1;try{e.forEach(function(e,o){if(void 0===e[t])throw n=o,"found"})}catch(o){}return n}function o(e,t){var n=e.getAttribute(t),o=null;return"string"==typeof n&&""!==n?(o=n.split("."),n=window,o.forEach(function(e){n=null!==n&&void 0!==n[e]?n[e]:null}),n):null}var r=null,t=void 0!==t?t:!1;return r={url:e.hasAttribute("src")?e.getAttribute("src"):null,hooks:{}},Array.prototype.forEach.call(e.children,function(e){var t=0,o=e.nodeName.toLowerCase();void 0===r.hooks[o]||r.hooks instanceof Array||(r.hooks=[r.hooks]),r.hooks instanceof Array?(t=n(r.hooks,o),-1===t&&(r.hooks.push({}),t=r.hooks.length-1),r.hooks[t][o]=0===e.children.length?e.innerHTML:a.caller(e,!0)):r.hooks[o]=0===e.children.length?e.innerHTML:a.caller(e,!0)}),"object"==typeof r.hooks&&0===Object.keys(r.hooks).length&&delete r.hooks,t||null===r.url?null!==r.url?r=i.instance(r):r.hooks:(r.node=e,r.replace=!0,r.callbacks={success:o(e,"success"),error:o(e,"error")},r=i.instance(r).render())},attach:function(){"complete"!==document.readyState?flex.events.DOM.add(window,"load",function(){a.init(!0)}):a.init(!0)}},u={references:{assign:function(e,n){var o=flex.overhead.globaly.get(t.storage.VIRTUAL_STORAGE_GROUP,t.storage.CONTROLLERS_LINKS,{});void 0===o[e]&&(o[e]=n)},getPatternURL:function(e){var n=flex.overhead.globaly.get(t.storage.VIRTUAL_STORAGE_GROUP,t.storage.CONTROLLERS_LINKS,{});return void 0!==n[e]?n[e]:null}},storage:{add:function(e,n){var o=flex.overhead.globaly.get(t.storage.VIRTUAL_STORAGE_GROUP,t.storage.CONTROLLERS_STORAGE,{});void 0===o[e]&&(o[e]=[]),o[e].push(n)},get:function(e){var n=flex.overhead.globaly.get(t.storage.VIRTUAL_STORAGE_GROUP,t.storage.CONTROLLERS_STORAGE,{}),e="string"==typeof e?[e]:e,o=[];return e.forEach(function(e){void 0!==n[e]&&(o=o.concat(n[e]))}),o}},current:{data:null,set:function(e){u.current.data=e},get:function(){return u.current.data},reset:function(){u.current.data=null}},attach:function(e){var t=null,n=null;"function"==typeof e&&(t=null!==u.current.get()?u.current.get():flex.resources.attach.js.getCurrentSRC(),null!==t&&(n=u.references.getPatternURL(t),u.storage.add(n,e)))}},c={virtual:{add:function(e,n){var o=flex.overhead.globaly.get(t.storage.VIRTUAL_STORAGE_GROUP,t.storage.VIRTUAL_STORAGE_ID,{});return null!==o&&void 0===o[e]?(o[e]=n,!0):void 0},get:function(e){var n=flex.overhead.globaly.get(t.storage.VIRTUAL_STORAGE_GROUP,t.storage.VIRTUAL_STORAGE_ID,{});return null!==n&&void 0!==n[e]?n[e]:null}},local:{add:function(e,n){return t.storage.USE_LOCALSTORAGE===!0?flex.localStorage.addJSON(e,{html:n,hash:flex.hashes.get(e)}):!1},get:function(e){var n=null;return t.storage.USE_LOCALSTORAGE===!0&&(flex.hashes.update(e),n=flex.localStorage.getJSON(e),null!==n&&n.hash===flex.hashes.get(e))?n.html:null}},add:function(e,t){c.local.add(e,t),c.virtual.add(e,t)},get:function(e){var t=c.virtual.get(e);return null===t&&(t=c.local.get(e)),t}},d={measure:function(){var e={};return function(n,o){if(t.measuring.MEASURE){var n=void 0===n?flex.unique():n;return void 0===e[n]?e[n]=performance.now():(flex.logs.log(f.SIGNATURE+"Operation ["+o+"] was taken "+(performance.now()-e[n]).toFixed(4)+"ms.",flex.logs.types.NOTIFICATION),delete e[n]),n}}}()},h={storage:{add:function(e,n){var o=flex.overhead.globaly.get(t.storage.VIRTUAL_STORAGE_GROUP,t.storage.CONDITIONS_STORAGE,{});o[e]=n},get:function(e){var n=flex.overhead.globaly.get(t.storage.VIRTUAL_STORAGE_GROUP,t.storage.CONDITIONS_STORAGE,{});return void 0!==n[e]?n[e]:null}},attach:function(e){var t=null,n=null;"object"==typeof e&&null!==e&&(t=null!==u.current.get()?u.current.get():flex.resources.attach.js.getCurrentSRC(),null!==t&&(n=u.references.getPatternURL(t),h.storage.add(n,e)))}},y={storage:{add:function(e,n){var o=flex.overhead.globaly.get(t.storage.VIRTUAL_STORAGE_GROUP,t.storage.HOOKS_STORAGE,{});o[e]=n},get:function(e){var n=flex.overhead.globaly.get(t.storage.VIRTUAL_STORAGE_GROUP,t.storage.HOOKS_STORAGE,{});return void 0!==n[e]?n[e]:null}},attach:function(e){var t=null,n=null;"object"==typeof e&&null!==e&&(t=null!==u.current.get()?u.current.get():flex.resources.attach.js.getCurrentSRC(),null!==t&&(n=u.references.getPatternURL(t),y.storage.add(n,e)))}},p={testReg:function(e,t){return e.lastIndex=0,e.test(t)},binds:{data:{value:[{nodes:["input","textarea"],event:"change",getter:function(){return this.value},setter:function(e){this.value=e}}]},assing:function(e,t,n){var o=e.nodeName.toLowerCase(),r=null;return void 0!==p.binds.data[t]&&(p.binds.data[t].forEach(function(e){-1!==e.nodes.indexOf(o)&&(r=e)}),null!==r&&!function(e,t,n,o,r){_node(t).events().add(e,function(e){r.call(t,e,n,o)})}(r.event,e,r.getter.bind(e),r.setter.bind(e),n)),!1},isPossible:function(e,t){var n=e.nodeName.toLowerCase();if(void 0!==p.binds.data[t])try{p.binds.data[t].forEach(function(e){if(-1!==e.nodes.indexOf(n))throw"found"})}catch(o){return"found"===o}return!1}},isNode:function(e){return void 0!==e&&void 0!==e.nodeName&&void 0!==e.parentNode&&void 0!==e.nodeType},tableFix:function(e){var n=e.match(t.regs.TABLE),o=[];return n instanceof Array&&(n.forEach(function(e){var n=null;e=e.replace(t.regs.TABLE_TAG,"").replace(t.regs.ANY_TAG,""),n=e.match(t.regs.HOOK),n instanceof Array&&(o=o.concat(n))}),o.forEach(function(n){var o=n.replace(t.regs.HOOK_BORDERS,"");e=e.replace(RegExp(t.regs.HOOK_OPEN+o+t.regs.HOOK_CLOSE,"gi"),"<!--"+n+"-->")})),e},getTextNode:function(e,t){var n=null;if(void 0!==e.childNodes)try{Array.prototype.forEach.call(e.childNodes,function(e){if(3===e.nodeType&&e.nodeValue===t)throw n=e,"found"})}catch(o){}return n}},g={init:function(){flex.callers.define.node("ui.patterns.append",function(e){return"object"==typeof e&&this.target&&(e.node=this.target),i.instance(e)}),flex.callers.define.nodes("ui.patterns.append",function(){var e=[];return Array.prototype.forEach.call(this.target,function(){"object"==typeof parameters&&this.target&&(parameters.node=this.target),e.push(i.instance(parameters))}),e})}},r.nodeList.init(),r.map.init(),void 0!==flex.libraries&&void 0!==flex.libraries.events&&void 0!==flex.libraries.binds&&(flex.libraries.events.create(),flex.libraries.binds.create()),s={preload:n.init,get:i.instance,controller:{attach:u.attach},conditions:{attach:h.attach},hooks:{attach:y.attach},classes:{NODE_LIST:{addMethod:r.nodeList.addMethod}},setup:e.setup,debug:e.debug,layout:a.init},g.init(),window._controller=s.controller.attach,window._conditions=s.conditions.attach,window._hooks=s.hooks.attach,a.attach(),{preload:s.preload,get:s.get,classes:{NODE_LIST:{addMethod:s.classes.NODE_LIST.addMethod}},setup:s.setup,debug:s.debug,layout:s.layout}},n.prototype=function(){var e=null,t=null,n=null,o=null;return t=function(){return null===e&&(e=function(){},e.prototype=function(){function e(e){function t(e){return e.element=void 0!==e.element?e.element:null,e.name="string"==typeof e.name?e.name:null,e.handle="function"==typeof e.handle?e.handle:null,e.id="string"==typeof e.id?e.id:flex.unique(),e.once="boolean"==typeof e.once?e.once:!1,e.touch="boolean"==typeof e.touch?e.touch:!0,e.safely="boolean"==typeof e.safely?e.safely:!1,i.has(e.name)===!1&&(e.touch=!1),e}var e=t(e),n=null;return null!==e.element&&null!==e.handle&&null!==e.name&&(n=a.get(e.element,!1),null!==n&&(n=l.buildCommonHandle(e.element,e.name,n,e.touch,e.safely),n instanceof Array))?(n.push(new u(e.id,e.handle,e.once,e.touch)),e.id):null}function t(e,t,n,o,r){var t=void 0!==t?t:l.fixEvent(),i=a.get(this,!0),s=null,u=flex.unique(),c=null,f=this,d=!1,p=t.type!==o?o:t.type,h=null;if(t&&e&&n&&null!==i&&(t=l.unificationEvent(t),i[p]&&(i=i[p],i.element_id===n))){s=i.handles;try{Array.prototype.forEach.call(s,function(e){if(e.interaction!==u){if(e.interaction=u,c=e.launch(f,t),d=d===!0?!0:e.isRemoving()!==!1,c===!1)throw t.flex.stop(),flex.logs.log("Break event in DOM.fire; \n\r >event: "+t.type+"\n\r >handle_id"+e.id+"\n\r >element_id"+n,flex.logs.types.WARNING),"prevent"}else flex.logs.log("Unexpected behavior of handle event in DOM.fire. Attempt to call handle twice. \n\r >event: "+t.type+"\n\r >handle_id"+e.id+"\n\r >element_id"+n,flex.logs.types.LOGICAL)})}catch(g){"prevent"!==g&&(r?flex.logs.log("Unexpected error in DOM.fire; \n\r >event: "+t.type+"\n\r >element_id"+n,flex.logs.types.CRITICAL):h=g)}finally{d!==!1&&(i.handles=s.filter(function(e){return e.isWorking()!==!1||e.isRemoving()===!1}),0===i.handles.length&&(l.destroyCommonHandle(e,p),a.clear(e)))}if(null!==h)throw h;return!0}return!1}function n(e){function t(e){return void 0!==e[s.HANDLE_EVENT_ID_PROPERTY]?e[s.HANDLE_EVENT_ID_PROPERTY]:null}function n(e){return e.element=void 0!==e.element?e.element:null,e.name="string"==typeof e.name?e.name:null,e.handle="function"==typeof e.handle?e.handle:null,e.id="string"==typeof e.id?e.id:t(e.handle),e}var e=n(e),o=null,r=null;if(null!==e.element&&null!==e.name&&(null===e.id&&null!==e.handle&&void 0!==e.handle[s.HANDLE_EVENT_ID_PROPERTY]&&(e.id=e.handle[s.HANDLE_EVENT_ID_PROPERTY]),null!==e.id&&(o=a.get(e.element,!0),"object"==typeof o[e.name]))){o=o[e.name],r=o.handles;try{Array.prototype.forEach.call(r,function(t){if(t.id===e.id)throw t.toRemove(),"handle found"})}catch(i){"handle found"!==i&&flex.logs.log("Unexpected error in DOM.remove; \n\r >event: "+e.name+"\n\r >event_id"+e.id,flex.logs.types.CRITICAL)}finally{r=r.filter(function(e){return e.isWorking()!==!1||e.isRemoving()===!1}),0===r.length&&(l.destroyCommonHandle(e.element,e.name),a.clear(e.element))}}}function o(e,t,n){var o=null,n="boolean"==typeof n?n:!1;if(e&&t){if(o=a.get(e,!0),null!==o&&"object"==typeof o[t]){if(o=o[t],n!==!1)try{Array.prototype.forEach.call(o.handles,function(n){if(flex.logs.log("Event fired in DOM.clear.fire; \n\r>event: "+t+"\n\r>handle_id: "+n.id,flex.logs.types.NOTIFICATION),n.launch(e,null)===!1)throw"prevent"})}catch(r){"prevent"===r?flex.logs.log("Break event in DOM.clear.fire; \n\r >event: "+t,flex.logs.types.WARNING):flex.logs.log("Fatal error event in DOM.clear.fire; \n\r >event: "+t,flex.logs.types.WARNING)}return o.handles=[],l.destroyCommonHandle(e,t),a.clear(e),!0}return!1}return null}function r(e,t){function n(e,t){for(var n in t)e[n]=t[n];return e}var o=null,r=null,l=null,i={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/},a={type:t,canBubble:!0,cancelable:!0,view:e.ownerDocument.defaultView,detail:1,screenX:0,screenY:0,clientX:0,clientY:0,pointerX:0,pointerY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null},s=n(a,arguments[2]||{});for(var t in i)if(i[t].test(t)){r=t;break}if(!r)throw new SyntaxError("Only HTMLEvents and MouseEvents interfaces are supported");return document.createEvent?(o=document.createEvent(r),"HTMLEvents"==r?o.initEvent(t,s.bubbles,s.cancelable):o.initMouseEvent(s.type,s.canBubble,s.cancelable,s.view,s.detail,s.screenX,s.screenY,s.clientX,s.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.button,s.relatedTarget),e.dispatchEvent(o)):(s.clientX=s.pointerX,s.clientY=s.pointerY,l=document.createEventObject(),o=n(l,s),e.fireEvent("on"+t,o)),e}var l=null,i=null,a=null,s={STORAGE_NAME:"FlexEventsStorage",HANDLE_EVENT_ID_PROPERTY:"FlexEventIDProrerty"},u=null,c=null;return u=function(e,t,n,o,r){this.id=e,this.handle=t,this.once=n,this.touch=o,this.safely=r,this.remove=!1,this.interaction=null,this.working=!1,this.device=null},u.prototype={launch:function(e,t){var n=null;if(this.remove===!1&&this.isDouble(t)===!1){try{return this.working=!0,this.remove=this.once,this.handle.call(e,t)}catch(o){if(this.safely)return this.error(t,o),null;n=o}finally{this.working=!1,this.once===!0&&this.remove===!1&&flex.logs.log("Unexpected behavior DOM.fire. Flag [once] is true, but [remove] is false; \n\r >event id"+this.id,flex.logs.types.WARNING)}if(null!==n)throw n}return null},isWorking:function(){return this.working},isRemoving:function(){return this.remove},toRemove:function(){this.remove=!0},error:function(e,t){flex.logs.log("event: "+e.type+"; ID: "+this.id+"; generated error: \r\n"+flex.logs.parseError(t),flex.logs.types.WARNING)},isDouble:function(e){var t="";return t=e.flex.singleTouch?"touch":"mouse",this.device=null===this.device?t:this.device,this.device!==t}},a={get:function(e,t){var t="boolean"==typeof t?t:!0,n=null;return e?(n=flex.overhead.objecty.get(e,s.STORAGE_NAME),null===n&&t===!1&&(n=flex.overhead.objecty.set(e,s.STORAGE_NAME,{})),n):null},clear:function(e){var t=a.get(e,!0);return null!==t&&0===Object.keys(t).length?(flex.overhead.objecty.del(e,s.STORAGE_NAME),!0):!1}},l={buildCommonHandle:function(e,n,o,r,l){var a=flex.unique();if("object"!=typeof o[n]){if(o[n]={globalHandle:function(o){return t.call(e,e,o,a,n,l)},element_id:a,handles:[]},flex.events.DOM.add(e,n,o[n].globalHandle)===!1)return null;r!==!1&&i.has(n)!==!1&&flex.events.DOM.add(e,i.getType(n),o[n].globalHandle)}return o[n].handles},destroyCommonHandle:function(e,t){var n=null;return e&&t&&(n=a.get(e,!0),"object"==typeof n[t])?(flex.events.DOM.remove(e,t,n[t].globalHandle),i.has(t)!==!1&&flex.events.DOM.remove(e,i.getType(t),n[t].globalHandle),n[t]=null,delete n[t],!0):null},fixEvent:function(){return!event&&window.event?window.event:null},unificationEvent:function(e){function t(e){return e.flex={},e}function n(e,t){if(void 0!==t.clientX)if(void 0===t.pageX&&(e.flex.pageX=null,e.flex.pageY=null),null===t.pageX&&null!==t.clientX){var n=document.documentElement,o=document.body;e.flex.pageX=t.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n.clientLeft||0),e.flex.pageY=t.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n.clientTop||0)}else e.flex.pageX=t.pageX,e.flex.pageY=t.pageY;else e.flex.pageX=null,e.flex.pageY=null;return e.flex.clientX=void 0!==t.clientX?t.clientX:null,e.flex.clientY=void 0!==t.clientY?t.clientY:null,e.flex.offsetX=void 0!==t.offsetX?t.offsetX:void 0!==t.layerX?t.layerX:null,e.flex.offsetY=void 0!==t.offsetY?t.offsetY:void 0!==t.layerY?t.layerY:null,e}function o(e){return void 0===e.preventDefault&&(e.preventDefault=function(){try{this.returnValue=!1}catch(e){}}),void 0===e.stopPropagation&&(e.stopPropagation=function(){try{this.cancelBubble=!0;
}catch(e){}}),e.flex.stop=function(){return e.preventDefault(),e.stopPropagation(),!1},e}function r(e){return void 0===e.target&&(e.target=void 0!==e.srcElement?e.srcElement:null),null!==e.target&&void 0===e.relatedTarget&&(void 0!==e.fromElement?e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement:(e.relatedTarget=null,e.fromElement=null)),e.flex.target=e.target,e}function l(e){return n(e,e)}function i(e){return void 0===e.which&&void 0!==e.button&&(e.flex.which=1&e.button?1:2&e.button?3:4&e.button?2:0,e.flex.button=e.button),e}function a(e){return"object"==typeof e.touches&&(1===e.touches.length&&(e=n(e,e.touches[0]),e.flex.target=e.touches[0].target,e.flex.singleTouch=!0),e.flex.touches=e.touches),e}return void 0===e.flex&&(e=t(e),e=o(e),e=r(e),e=l(e),e=i(e),e=a(e)),e}},i={events:{click:{touch:"touchstart"},dblclick:{touch:"touchstart"},mousedown:{touch:"touchstart"},mouseenter:{touch:"touchenter"},mouseleave:{touch:"touchleave"},mousemove:{touch:"touchmove"},mouseover:{touch:""},mouseout:{touch:""},mouseup:{touch:"touchend"}},has:function(e){for(var t in i.events)if(t===e||"on"+t===e)return!0;return!1},getType:function(e){for(var t in i.events)if(t===e||"on"+t===e)return i.events[t].touch;return null},getOriginalType:function(e){e=e.toLowerCase();for(var t in i.events)if(i.events[t].touch===e)return t;return null}},c={_add:e,_remove:n,add:function(t,n,o,r,l,i){return e({element:t,name:n,handle:o,id:r,touch:l,safely:i})},remove:function(e,t,o,r){return n({element:e,name:t,handle:o,id:r})},call:r,clear:o,unify:l.unificationEvent},{add:c.add,remove:c.remove,clear:c.clear,call:c.call,unify:c.unify,extendedAdd:c._add,extendedRemove:c._remove}}(),e=new e),e},n={init:function(){flex.callers.define.node("events.add",function(e,n,o,r){return t().add(this.target,e,n,o,r)}),flex.callers.define.node("events.remove",function(e,n,o){return t().remove(this.target,e,n,o)}),flex.callers.define.node("events.call",function(e){return t().call(this.target,e)}),flex.callers.define.nodes("events.add",function(e,n,o,r){Array.prototype.forEach.call(this.target,function(l){t().add(l,e,n,o,r)})}),flex.callers.define.nodes("events.remove",function(e,n,o){Array.prototype.forEach.call(this.target,function(r){t().remove(r,e,n,o)})}),flex.callers.define.nodes("events.call",function(e){Array.prototype.forEach.call(this.target,function(n){t().call(n,e)})})}},n.init(),o={DOMEvents:t},{DOMEvents:o.DOMEvents}},o.prototype=function(){var e=null,t=null,n=null,o=null,r=null,l=null,i=null,a=null,s=null;return i={objects:{STORAGE_PROPERTY:"flex.object.bind.storage",HANDLE_ID_PROPERTY:"flex.object.bind.handle.id"},attrs:{STORAGE_PROPERTY:"flex.attrs.bind.storage",HANDLE_ID_PROPERTY:"flex.attrs.bind.handle.id"},props:{STORAGE_PROPERTY:"flex.props.bind.storage",HANDLE_ID_PROPERTY:"flex.props.bind.handle.id"}},a={objects:{INCORRECT_ARGUMENTS:"defined incorrect arguments or not defined at all",PROPERTY_IS_CONST:"cannot kill bind with property, because property now is constant"},support:{DEFINE_PROPERTY:"flex.binds: Current browser does not support Object.defineProperty",MUTATION_SCANNING:"flex.attrs: Current browser does not support any avaliable way to scanning mutation of attributes"}},e={storage:{create:function(e){var t=function(e){this.parent=e,this.binds={}};return t.prototype={make:function(e,t){var n=this;return this.binds[e]?!1:(this.binds[e]={current:t,previous:t,setter:function(t){n.binds[e].previous=n.binds[e].current,n.binds[e].current=t;for(var o in n.binds[e].handles)n.binds[e].handles[o].call(n.parent,n.binds[e].current,n.binds[e].previous,o)},getter:function(){return n.binds[e].current},handles:{}},!0)},add:function(e,t){var n=flex.unique();return t[i.objects.HANDLE_ID_PROPERTY]=n,this.binds[e].handles[n]=t,n},remove:function(e,t){return this.binds[e]&&this.binds[e].handles[t]&&(delete this.binds[e].handles[t],0===Object.keys(this.binds[e].handles).length)?delete this.binds[e]:null},kill:function(e){return this.binds[e]?delete this.binds[e]:null},isPropertyReady:function(e){return void 0!==this.binds[e]},destroy:function(){return 0===Object.keys(this.binds).length?delete this.parent[i.objects.STORAGE_PROPERTY]:!1},setter:function(e){return this.binds[e].setter},getter:function(e){return this.binds[e].getter}},new t(e)}},bind:function(t,n,o){var r=i.objects.STORAGE_PROPERTY,l=null;if(Object.defineProperty){if("object"==typeof t&&"string"==typeof n&&"function"==typeof o){if(l=t[n],t[r]||(t[r]=e.storage.create(t)),r=t[r],!r.isPropertyReady(n)){if(!delete t[n])return r.destroy(),!1;r.make(n,l),Object.defineProperty(t,n,{get:r.getter(n),set:r.setter(n),configurable:!0})}return r.add(n,o)}throw"object.bind::"+a.objects.INCORRECT_ARGUMENTS}},unbind:function(e,t,n){var o=i.objects.STORAGE_PROPERTY,r=null;if("object"==typeof e&&"string"==typeof t&&"string"==typeof n){if(e[o]&&(o=e[o],o.isPropertyReady(t)&&(r=e[t],o.remove(t,n),!o.isPropertyReady(t))))try{return delete e[t],e[t]=r,!0}catch(l){throw"object.unbind::"+a.objects.PROPERTY_IS_CONST}return null}throw"object.unbind::"+a.objects.INCORRECT_ARGUMENTS},kill:function(e,t){var n=i.objects.STORAGE_PROPERTY,o=null;if("object"==typeof e&&"string"==typeof t){if(e[n]){o=e[t],n=e[n];try{return n.kill(t)?(delete e[t],e[t]=o,!0):!1}catch(r){throw"object.kill::"+a.objects.PROPERTY_IS_CONST}}return null}throw"object.kill::"+a.objects.INCORRECT_ARGUMENTS}},t={storage:{create:function(e){var t=function(e){this.node=e,this.binds={},this._destroy=null};return t.prototype={init:function(){this._destroy=o.attach(e,this.handle,this,{attributes:!0,childList:!1,subtree:!1,characterData:!0,attributeOldValue:!1,characterDataOldValue:!1})},handle:function(e,t){var n=this,o=null;this.binds[e]&&(o=this.node.getAttribute(e),o!==this.binds[e].current&&(this.binds[e].previous=this.binds[e].current,this.binds[e].current=o,_object(this.binds[e].handles).forEach(function(o,r){r.call(n.node,e,n.binds[e].current,n.binds[e].previous,t,o)})))},make:function(e){this.binds[e]||(this.binds[e]={handles:{},previous:null,current:this.node.getAttribute(e)})},add:function(e,t){var n=flex.unique();return t[i.attrs.HANDLE_ID_PROPERTY]=n,this.binds[e].handles[n]=t,n},remove:function(e,t){var n=null;return this.binds[e]&&this.binds[e].handles[t]&&(delete this.binds[e].handles[t],0===Object.keys(this.binds[e].handles).length)?(n=delete this.binds[e],this.destroy(),n):n},kill:function(e){var t=null;return this.binds[e]?(t=delete this.binds[e],this.destroy(),t):t},isAttrReady:function(e){return void 0!==this.binds[e]},destroy:function(){return 0===Object.keys(this.binds).length?(this._destroy(),delete this.node[i.attrs.STORAGE_PROPERTY]):!1}},new t(e)}},bind:function(e,n,r){var l=i.attrs.STORAGE_PROPERTY;if(null!==o.attach){if(void 0!==e&&"string"==typeof n&&"function"==typeof r&&e.nodeName)return e[l]||(e[l]=t.storage.create(e),e[l].init()),l=e[l],l.isAttrReady(n)||l.make(n),l.add(n,r);throw"attrs.bind::"+a.objects.INCORRECT_ARGUMENTS}},unbind:function(e,t,n){var o=i.attrs.STORAGE_PROPERTY;if("object"==typeof e&&"string"==typeof t&&"string"==typeof n)return e[o]&&(o=e[o],o.isAttrReady(t))?o.remove(t,n):null;throw"attrs.unbind::"+a.objects.INCORRECT_ARGUMENTS},kill:function(e,t){var n=i.attrs.STORAGE_PROPERTY;if("object"==typeof e&&"string"==typeof t)return e[n]&&(n=e[n],n.isAttrReady(t))?n.kill(t):null;throw"attrs.unbind::"+a.objects.INCORRECT_ARGUMENTS}},n={storage:{create:function(e){var t=function(e){this.node=e,this.binds={},this._destroy=null};return t.prototype={init:function(){this._destroy=o.attach(e,this.handle,this,{attributes:!0,childList:!0,subtree:!0,characterData:!0,attributeOldValue:!1,characterDataOldValue:!1})},prop:function(e){var t=null,n=this.node;return e.split(".").forEach(function(e,o,r){void 0!==n[e]&&r.length-1>o?n=n[e]:void 0!==n[e]&&o===r.length-1&&(t={parent:n,name:e})}),t},handle:function(e,t){var n=this;_object(this.binds).forEach(function(e){var o=n.binds[e].parent[e];o!==n.binds[e].current&&(n.binds[e].previous=n.binds[e].current,n.binds[e].current=o,_object(n.binds[e].handles).forEach(function(o,r){r.call(n.binds[e].parent,e,n.binds[e].current,n.binds[e].previous,t,o)}))})},make:function(e){var e=this.prop(e);this.binds[e.name]||(this.binds[e.name]={handles:{},previous:null,current:e.parent[e.name],parent:e.parent})},add:function(e,t){var n=flex.unique(),e=this.prop(e);return t[i.props.HANDLE_ID_PROPERTY]=n,this.binds[e.name].handles[n]=t,n},remove:function(e,t){var n=null,e=this.prop(e);return this.binds[e.name]&&this.binds[e.name].handles[t]&&(delete this.binds[e.name].handles[t],0===Object.keys(this.binds[e.name].handles).length)?(n=delete this.binds[e.name],this.destroy(),n):n},kill:function(e){var t=null,e=this.prop(e);return this.binds[e.name]?(t=delete this.binds[e.name],this.destroy(),t):t},isPropReady:function(e){var e=this.prop(e);return void 0!==this.binds[e.name]},destroy:function(){return 0===Object.keys(this.binds).length?(this._destroy(),delete this.node[i.props.STORAGE_PROPERTY]):!1}},new t(e)}},bind:function(e,t,r){function l(e,t){var n=!1;return t.split(".").forEach(function(t,o,r){void 0!==e[t]&&r.length-1>o?e=e[t]:void 0!==e[t]&&o===r.length-1&&(n=!0)}),n}var s=i.props.STORAGE_PROPERTY;if(null!==o.attach){if(void 0!==e&&"string"==typeof t&&"function"==typeof r&&void 0!==e.nodeName&&l(e,t))return e[s]||(e[s]=n.storage.create(e),e[s].init()),s=e[s],s.isPropReady(t)||s.make(t),s.add(t,r);throw"props.bind::"+a.objects.INCORRECT_ARGUMENTS}},unbind:function(e,t,n){var o=i.props.STORAGE_PROPERTY;if("object"==typeof e&&"string"==typeof t&&"string"==typeof n)return e[o]&&(o=e[o],o.isPropReady(t))?o.remove(t,n):null;throw"props.unbind::"+a.objects.INCORRECT_ARGUMENTS},kill:function(e,t){var n=i.props.STORAGE_PROPERTY;if("object"==typeof e&&"string"==typeof t)return e[n]&&(n=e[n],n.isPropReady(t))?n.kill(t):null;throw"props.unbind::"+a.objects.INCORRECT_ARGUMENTS}},o={init:function(){o.attach=o.attach()},mutationObserver:function(e,t,n,o){var r=window.MutationObserver||window.WebKitMutationObserver,l=null;return l=new r(function(e){e.forEach(function(e){t.call(n,e.attributeName,e)})}),l.observe(e,o),function(){l.disconnect()}},DOMAttrModified:function(e,t,n){return flex.events.DOM.add(e,"DOMAttrModified",function(e){t.call(n,event.attrName,e)}),function(){}},onPropertyChange:function(e,t,n){return flex.events.DOM.add(e,"propertychange",function(e){t.call(n,event.attributeName,e)}),function(){}},attach:function(){function e(){var e=document.createElement("DIV"),t=!1;return flex.events.DOM.add(e,"DOMAttrModified",function(){t=!0}),e.setAttribute("id","test"),t}return window.MutationObserver||window.WebKitMutationObserver?o.mutationObserver:e()?o.DOMAttrModified:"onpropertychange"in document.body?o.onPropertyChange:null}},l={init:function(){flex.callers.define.object("binding.bind",function(t,n){return e.bind(this.target,t,n)}),flex.callers.define.object("binding.unbind",function(t,n){return e.unbind(this.target,t,n)}),flex.callers.define.object("binding.kill",function(t){return e.kill(this.target,t)}),flex.callers.define.node("bindingAttrs.bind",function(e,n){return t.bind(this.target,e,n)}),flex.callers.define.node("bindingAttrs.unbind",function(e,n){return t.unbind(this.target,e,n)}),flex.callers.define.node("bindingAttrs.kill",function(e){return t.kill(this.target,e)}),flex.callers.define.nodes("bindingAttrs.bind",function(e,n){var o=[];return SelectorClass(),Array.prototype.forEach.call(this.target,function(r){o.push(t.bind(r,e,n))}),o}),flex.callers.define.nodes("bindingAttrs.unbind",function(e,n){var o=[];return SelectorClass(),Array.prototype.forEach.call(this.target,function(r){o.push(t.unbind(r,e,n))}),o}),flex.callers.define.nodes("bindingAttrs.kill",function(e){var n=[];return SelectorClass(),Array.prototype.forEach.call(this.target,function(o){n.push(t.kill(o,e))}),n}),flex.callers.define.node("bindingProps.bind",function(e,t){return n.bind(this.target,e,t)}),flex.callers.define.node("bindingProps.unbind",function(e,t){return n.unbind(this.target,e,t)}),flex.callers.define.node("bindingProps.kill",function(e){return n.kill(this.target,e)}),flex.callers.define.nodes("bindingProps.bind",function(e,t){var o=[];return SelectorClass(),Array.prototype.forEach.call(this.target,function(r){o.push(n.bind(r,e,t))}),o}),flex.callers.define.nodes("bindingProps.unbind",function(e,t){var o=[];return SelectorClass(),Array.prototype.forEach.call(this.target,function(r){o.push(n.unbind(r,e,t))}),o}),flex.callers.define.nodes("bindingProps.kill",function(e){var t=[];return SelectorClass(),Array.prototype.forEach.call(this.target,function(o){t.push(n.kill(o,e))}),t})}},s={check:function(){if(!Object.defineProperty)throw a.support.DEFINE_PROPERTY;if(null===o.attach)throw a.support.MUTATION_SCANNING}},o.init(),l.init(),s.check(),r={},{}},l.prototype=function(){function e(e){var e=e||null,t=_nodes("*["+r.CONTAINER+(null!==e?'="'+e+'"':"")+"]:not(["+r.INITED+"])").target;null!==t&&Array.prototype.forEach.call(t,function(e){var t=e.getAttribute(r.CONTAINER);""!==t&&null!==t||e.setAttribute(r.CONTAINER,flex.unique()),e.setAttribute(r.INITED,!0)})}var t=null,n=null,o=null,r=null,l=null;return r={CONTAINER:"data-flex-ui-window-focus",INITED:"data-flex-window-focus-inited",GLOBAL_GROUP:"flex-window-focus-global-group",GLOBAL_EVENT_FLAG:"flex-window-focus-global-event",GLOBAL_CURRENT:"flex-window-focus-global-current",GLOBAL_EVENT_ID:"flex-window-focus-global-event-id",FOCUSED_ZINDEX:1e3},n={attach:function(){var e=flex.overhead.globaly.get(r.GLOBAL_GROUP,r.GLOBAL_EVENT_FLAG);e!==!0&&(flex.overhead.globaly.set(r.GLOBAL_GROUP,r.GLOBAL_EVENT_FLAG,!0),_node(window).events().add("click",function(e){return o.onClick(e),!0},r.GLOBAL_EVENT_ID))}},o={getContainer:function(e){var t=null,n=null;return"function"==typeof e.getAttribute&&(t=e.getAttribute(r.CONTAINER),""!==t&&null!==t)?{container:e,id:t}:(n=_node(e).html().find().parentByAttr({name:r.CONTAINER,value:null}),null!==n?{container:n,id:n.getAttribute(r.CONTAINER)}:null)},history:{is:function(e){return flex.overhead.globaly.get(r.GLOBAL_GROUP,r.GLOBAL_CURRENT)===e},set:function(e){flex.overhead.globaly.set(r.GLOBAL_GROUP,r.GLOBAL_CURRENT,e)},get:function(){return flex.overhead.globaly.get(r.GLOBAL_GROUP,r.GLOBAL_CURRENT)},del:function(){flex.overhead.globaly.del(r.GLOBAL_GROUP,r.GLOBAL_CURRENT)}},onClick:function(e){var t=o.getContainer(e.flex.target),n=o.history.get();null!==n&&o.focus.unset(n),null!==t&&o.history.is(t.id)===!1&&o.focus.set(t.id)},focus:{zIndex:function(e,t){var n=_node("*["+r.CONTAINER+'="'+e+'"]').target;null!==n&&(n.style.zIndex=t)},set:function(e){o.focus.zIndex(e,r.FOCUSED_ZINDEX),o.history.set(e)},unset:function(e){o.focus.zIndex(e,""),o.history.del(e)}}},l={attach:function(){flex.events.core.listen(flex.registry.events.ui.patterns.GROUP,flex.registry.events.ui.patterns.MOUNTED,function(t){var n=void 0!==t.length&&t.length>0?t[0].parentNode:null;null!==n&&null!==_node("*["+r.CONTAINER+"]:not(["+r.INITED+"])",!1,n).target&&e()})}},t={init:e},n.attach(),l.attach(),void 0!==flex.libraries&&void 0!==flex.libraries.events&&void 0!==flex.libraries.html&&(flex.libraries.events.create(),flex.libraries.html.create()),{init:t.init}},s.prototype=function(){function e(e){var e=e||null,t=_nodes("*["+r.CONTAINER+(null!==e?'="'+e+'"':"")+"]:not(["+r.INITED+"])").target;null!==t&&Array.prototype.forEach.call(t,function(e){var t=e.getAttribute(r.CONTAINER),n=null;""!==t&&null!==t&&(n=_nodes("*["+r.HOOK+'="'+t+'"]').target,null!==n&&o.attach(e,n,t)),e.setAttribute(r.INITED,!0),e.setAttribute(r.STATE,"false"),flex.overhead.objecty.set(e,r.STORAGE,{maximazed:!1},!0)})}var t=null,n=null,o=null,r=null;return r={CONTAINER:"data-flex-ui-window-maximize",HOOK:"data-flex-window-maximize-hook",INITED:"data-flex-window-maximize-inited",STATE:"data-flex-window-is-maximized",STORAGE:"flex-window-maximize-storage"},o={attach:function(e,t,n){Array.prototype.forEach.call(t,function(t,r){_node(t).events().add("click",function(t){return o.onClick(t,e,n),!0},n+"_"+r)})},onClick:function(e,t,n){var l=flex.overhead.objecty.get(t,r.STORAGE,!1);null!==l&&(l.maximazed===!1?o.actions.maximaze(t,l,n):o.actions.restore(t,l,n),setTimeout(function(){flex.events.core.fire(flex.registry.events.ui.window.maximize.GROUP,flex.registry.events.ui.window.maximize.CHANGE,{container:t,id:n})},10))},actions:{maximaze:function(e,t,n){t.maximazed=!0,t.size={position:""!==e.style.position?e.style.position:!1,width:""!==e.style.width?e.style.width:!1,height:""!==e.style.height?e.style.height:!1,left:""!==e.style.left?e.style.left:!1,top:""!==e.style.top?e.style.top:!1},e.style.position="fixed",e.style.width="100%",e.style.height="100%",e.style.left="0px",e.style.top="0px",e.setAttribute(r.STATE,"true"),setTimeout(function(){flex.events.core.fire(flex.registry.events.ui.window.maximize.GROUP,flex.registry.events.ui.window.maximize.MAXIMIZED,{container:e,id:n})},10)},restore:function(e,t,n){t.maximazed=!1,e.style.position=t.size.position!==!1?t.size.position:"",e.style.width=t.size.width!==!1?t.size.width:"",e.style.height=t.size.height!==!1?t.size.height:"",e.style.left=t.size.left!==!1?t.size.left:"",e.style.top=t.size.top!==!1?t.size.top:"",e.setAttribute(r.STATE,"false"),setTimeout(function(){flex.events.core.fire(flex.registry.events.ui.window.maximize.GROUP,flex.registry.events.ui.window.maximize.RESTORED,{container:e,id:n})},10)},byID:{findByID:function(e){var e=e||null,t=null,n=[];return null!==e&&(t=_nodes("*["+r.CONTAINER+(null!==e?'="'+e+'"':"")+"]").target,null!==t&&t.length>0)?(Array.prototype.forEach.call(t,function(e){var t=flex.overhead.objecty.get(e,r.STORAGE,!1);null!==t&&n.push({container:e,storage:t})}),n.length>0?n:null):null},maximaze:function(e){var t=o.actions.byID.findByID(e);null!==t&&t.forEach(function(t){o.actions.maximaze(t.container,t.storage,e)})},restore:function(e){var t=o.actions.byID.findByID(e);null!==t&&t.forEach(function(t){o.actions.restore(t.container,t.storage,e)})}}}},n={attach:function(){flex.events.core.listen(flex.registry.events.ui.patterns.GROUP,flex.registry.events.ui.patterns.MOUNTED,function(t){var n=void 0!==t.length&&t.length>0?t[0].parentNode:null;null!==n&&null!==_node("*["+r.CONTAINER+"]:not(["+r.INITED+"])",!1,n).target&&e()})}},void 0!==flex.libraries&&void 0!==flex.libraries.events&&flex.libraries.events.create(),n.attach(),t={init:e,maximaze:o.actions.byID.maximaze,restore:o.actions.byID.restore},{init:t.init,maximaze:t.maximaze,restore:t.restore}},i.prototype=function(){function e(e){var e=e||null,t=_nodes("*["+l.CONTAINER+(null!==e?'="'+e+'"':"")+"]:not(["+l.INITED+"])").target;null!==t&&Array.prototype.forEach.call(t,function(e){var t=e.getAttribute(l.CONTAINER),r=null;""!==t&&null!==t&&(r=_nodes("*["+l.HOOK+'="'+t+'"]').target,null!==r&&(n.attach(e,r,t),o.attach(e,t))),e.setAttribute(l.INITED,!0)})}var t=null,n=null,o=null,r=null,l=null;return l={CONTAINER:"data-flex-ui-window-move-container",HOOK:"data-flex-ui-window-move-hook",INITED:"data-flex-window-move-inited",GLOBAL_GROUP:"flex-window-move",GLOBAL_EVENT_FLAG:"flex-window-move-global-event",GLOBAL_CURRENT:"flex-window-move-global-current",GLOBAL_EVENT_ID:"flex-window-move-global-event-id",STATE_STORAGE:"flex-window-move-instance-state"},n={attach:function(e,t,o){Array.prototype.forEach.call(t,function(t){_node(t).events().add("mousedown",function(r){n.start(r,e,t,o)},o)})},start:function(e,t,n,o){function r(e){return e.currentStyle&&e.currentStyle.position?e.currentStyle.position:window.getComputedStyle?window.getComputedStyle(e).position:null}var i=null,a=null,s=null;return flex.overhead.objecty.get(t,l.STATE_STORAGE,!1,!1)===!1?(i=_node(t).html().position().byPage(),a=_node(t.parentNode).html().scroll().position(),s="fixed"===r(t),flex.overhead.globaly.set(l.GLOBAL_GROUP,l.GLOBAL_CURRENT,{clientX:e.flex.clientX,clientY:e.flex.clientY,offsetX:e.flex.offsetX,offsetY:e.flex.offsetY,pageX:e.flex.pageX,pageY:e.flex.pageY,hook:n,container:t,id:o,oldX:e.flex.pageX,oldY:e.flex.pageY,posX:i.left+(s===!1?a.left():0),posY:i.top+(s===!1?a.top():0)}),e.flex.stop()):!0},move:function(e){var t=flex.overhead.globaly.get(l.GLOBAL_GROUP,l.GLOBAL_CURRENT),n=null;return null!==t&&(n=t.container,t.posX=t.posX-(t.oldX-e.flex.pageX),t.posY=t.posY-(t.oldY-e.flex.pageY),n.style.left=t.posX+"px",n.style.top=t.posY+"px",t.oldX=e.flex.pageX,t.oldY=e.flex.pageY),e.flex.stop()},stop:function(){flex.overhead.globaly.del(l.GLOBAL_GROUP,l.GLOBAL_CURRENT)},global:{attach:function(){var e=flex.overhead.globaly.get(l.GLOBAL_GROUP,l.GLOBAL_EVENT_FLAG);e!==!0&&(flex.overhead.globaly.set(l.GLOBAL_GROUP,l.GLOBAL_EVENT_FLAG,!0),_node(window).events().add("mousemove",function(e){n.move(e)},l.GLOBAL_EVENT_ID),_node(window).events().add("mouseup",function(e){n.stop(e)},l.GLOBAL_EVENT_ID))}}},o={attach:function(e,t){flex.events.core.listen(flex.registry.events.ui.window.maximize.GROUP,flex.registry.events.ui.window.maximize.MAXIMIZED,function(t){return o.onRefreshByParent(t.container,e,flex.registry.events.ui.window.maximize.MAXIMIZED)},l.STATE_STORAGE+t,!1),flex.events.core.listen(flex.registry.events.ui.window.maximize.GROUP,flex.registry.events.ui.window.maximize.RESTORED,function(t){return o.onRefreshByParent(t.container,e,flex.registry.events.ui.window.maximize.RESTORED)},l.STATE_STORAGE+t,!1)},onRefreshByParent:function(e,t,n){if(e===t)switch(n){case flex.registry.events.ui.window.maximize.MAXIMIZED:flex.overhead.objecty.set(t,l.STATE_STORAGE,!0,!0);break;case flex.registry.events.ui.window.maximize.RESTORED:flex.overhead.objecty.set(t,l.STATE_STORAGE,!1,!0)}return!1}},r={attach:function(){flex.events.core.listen(flex.registry.events.ui.patterns.GROUP,flex.registry.events.ui.patterns.MOUNTED,function(t){var n=void 0!==t.length&&t.length>0?t[0].parentNode:null;null!==n&&null!==_node("*["+l.CONTAINER+"]:not(["+l.INITED+"])",!1,n).target&&e()})}},t={init:e},n.global.attach(),r.attach(),void 0!==flex.libraries&&void 0!==flex.libraries.events&&void 0!==flex.libraries.html&&(flex.libraries.events.create(),flex.libraries.html.create()),{init:t.init}},a.prototype=function(){function e(e){var e=e||null,t=_nodes("*["+l.CONTAINER+(null!==e?'="'+e+'"':"")+"]:not(["+l.INITED+"])").target;null!==t&&Array.prototype.forEach.call(t,function(e){var t=e.getAttribute(l.CONTAINER);null!==t&&""!==t&&Array.prototype.forEach.call(l.HOOKS,function(o){var l=n.hooks.get(t,e,o);n.attach(e,l,o,t),r.attach(e,t)}),e.setAttribute(l.INITED,!0)})}var t=null,n=null,o=null,r=null,l=null;return l={CONTAINER:"data-flex-ui-window-resize-container",INITED:"data-flex-window-resize-inited",HOOK:"data-flex-window-resize-hook",HOOKS:["top","left","right","bottom","corner"],HOOKS_STYLE:{top:{node:"div",style:{position:"absolute",zIndex:1,height:"6px",width:"100%",top:"0px",left:"0px",cursor:"n-resize"}},bottom:{node:"div",style:{position:"absolute",zIndex:1,height:"6px",width:"100%",bottom:"0px",left:"0px",cursor:"n-resize"}},left:{node:"div",style:{position:"absolute",zIndex:1,height:"100%",width:"6px",top:"0px",left:"0px",cursor:"e-resize"}},right:{node:"div",style:{position:"absolute",zIndex:1,height:"100%",width:"6px",top:"0px",right:"0px",cursor:"e-resize"}},corner:{node:"div",style:{position:"absolute",zIndex:1,height:"10px",width:"10px",bottom:"0px",right:"0px",cursor:"nw-resize"}}},POSITION_PARENT:"data-flex-ui-window-resize-position-parent",GLOBAL_GROUP:"flex-window-resize",GLOBAL_EVENT_FLAG:"flex-window-resize-global-event",GLOBAL_CURRENT:"flex-window-resize-global-current",GLOBAL_EVENT_ID:"flex-window-resize-global-event-id",STATE_STORAGE:"flex-window-resize-instance-state"},n={position:{getParent:function(e){return _node("*["+l.POSITION_PARENT+'="'+e+'"]').target}},hooks:{make:function(e,t){var n=document.createElement(l.HOOKS_STYLE[t].node);for(var o in l.HOOKS_STYLE[t].style)n.style[o]=l.HOOKS_STYLE[t].style[o];return e.appendChild(n),n},get:function(e,t,o){var r=_nodes("*["+l.CONTAINER+'="'+e+'"]['+l.HOOK+'="'+o+'"]:not(['+l.INITED+"])").target;return 0===r.length&&(r=[],r.push(n.hooks.make(t,o))),r}},attach:function(e,t,o,r){var l=n.position.getParent(r);Array.prototype.forEach.call(t,function(t){_node(t).events().add("mousedown",function(i){n.start(i,e,t,o,l,r)},r)})},start:function(e,t,n,o,r,i){function a(e){return e.currentStyle&&e.currentStyle.position?e.currentStyle.position:window.getComputedStyle?window.getComputedStyle(e).position:null}var s=null,u=null,c=null,f=null;return flex.overhead.objecty.get(t,l.STATE_STORAGE,!1,!1)===!1?(s=_node(t).html().size().get(),u=_node(null!==r?r:t).html().position().byPage(),c=_node(t.parentNode).html().scroll().position(),f="fixed"===a(t),flex.overhead.globaly.set(l.GLOBAL_GROUP,l.GLOBAL_CURRENT,{clientX:e.flex.clientX,clientY:e.flex.clientY,offsetX:e.flex.offsetX,offsetY:e.flex.offsetY,pageX:e.flex.pageX,pageY:e.flex.pageY,hook:n,direction:o,container:t,position_parent:r,id:i,oldX:e.flex.pageX,oldY:e.flex.pageY,posX:u.left+(f===!1?c.left():0),posY:u.top+(f===!1?c.top():0),width:s.width,height:s.height}),e.flex.stop()):!0},move:function(e){var t=flex.overhead.globaly.get(l.GLOBAL_GROUP,l.GLOBAL_CURRENT),n=null,o=null;if(null!==t){switch(n=t.container,o=null!==t.position_parent?t.position_parent:n,t.direction){case"top":t.posY=t.posY-(t.oldY-e.flex.pageY),t.height=t.height+(t.oldY-e.flex.pageY),n.style.height=t.height+"px",o.style.top=t.posY+"px";break;case"left":t.posX=t.posX-(t.oldX-e.flex.pageX),t.width=t.width+(t.oldX-e.flex.pageX),n.style.width=t.width+"px",o.style.left=t.posX+"px";break;case"bottom":t.height=t.height-(t.oldY-e.flex.pageY),n.style.height=t.height+"px";break;case"right":t.width=t.width-(t.oldX-e.flex.pageX),n.style.width=t.width+"px";break;case"corner":t.height=t.height-(t.oldY-e.flex.pageY),n.style.height=t.height+"px",t.width=t.width-(t.oldX-e.flex.pageX),n.style.width=t.width+"px"}t.oldX=e.flex.pageX,t.oldY=e.flex.pageY,setTimeout(function(){flex.events.core.fire(flex.registry.events.ui.window.resize.GROUP,flex.registry.events.ui.window.resize.REFRESH,{container:t.container,id:t.id})},10)}return e.flex.stop()},stop:function(){var e=flex.overhead.globaly.get(l.GLOBAL_GROUP,l.GLOBAL_CURRENT);null!==e&&flex.events.core.fire(flex.registry.events.ui.window.resize.GROUP,flex.registry.events.ui.window.resize.FINISH,{container:e.container,id:e.id}),flex.overhead.globaly.del(l.GLOBAL_GROUP,l.GLOBAL_CURRENT)},global:{attach:function(){var e=flex.overhead.globaly.get(l.GLOBAL_GROUP,l.GLOBAL_EVENT_FLAG);e!==!0&&(flex.overhead.globaly.set(l.GLOBAL_GROUP,l.GLOBAL_EVENT_FLAG,!0),_node(window).events().add("mousemove",function(e){n.move(e)},l.GLOBAL_EVENT_ID),_node(window).events().add("mouseup",function(e){n.stop(e)},l.GLOBAL_EVENT_ID))}}},r={attach:function(e,t){flex.events.core.listen(flex.registry.events.ui.window.maximize.GROUP,flex.registry.events.ui.window.maximize.MAXIMIZED,function(t){return r.onRefreshByParent(t.container,e,flex.registry.events.ui.window.maximize.MAXIMIZED)},l.STATE_STORAGE+t,!1),flex.events.core.listen(flex.registry.events.ui.window.maximize.GROUP,flex.registry.events.ui.window.maximize.RESTORED,function(t){return r.onRefreshByParent(t.container,e,flex.registry.events.ui.window.maximize.RESTORED)},l.STATE_STORAGE+t,!1)},onRefreshByParent:function(e,t,n){if(e===t)switch(n){case flex.registry.events.ui.window.maximize.MAXIMIZED:flex.overhead.objecty.set(t,l.STATE_STORAGE,!0,!0);break;case flex.registry.events.ui.window.maximize.RESTORED:flex.overhead.objecty.set(t,l.STATE_STORAGE,!1,!0)}return!1}},o={attach:function(){flex.events.core.listen(flex.registry.events.ui.patterns.GROUP,flex.registry.events.ui.patterns.MOUNTED,function(t){var n=void 0!==t.length&&t.length>0?t[0].parentNode:null;null!==n&&null!==_node("*["+l.CONTAINER+"]:not(["+l.INITED+"])",!1,n).target&&e()})}},t={init:e},n.global.attach(),o.attach(),void 0!==flex.libraries&&void 0!==flex.libraries.events&&void 0!==flex.libraries.html&&(flex.libraries.events.create(),flex.libraries.html.create()),{init:t.init}},r.prototype=function(){var e=null,t=null,n=null,o=null,r=null,l=null,i=null,a=null,s=null,u=null,c=null,f=null;return f={storage:{GROUP:"flex.html",SCROLL:"scroll",CUSTOM_STYLES:"custom.styles"},classes:{scroll:{MINIMAL_WIDTH:15,MINIMAL_HEIGHT:15}}},e={bySelector:function(){var e=function(){};return e.prototype=function(){function e(e,t){return"string"==typeof e?(t||document).querySelector(e):null}function t(e,t){return"string"==typeof e?(t||document).querySelectorAll(e):null}function n(e,t){var n=null;return"string"==typeof e?(n=r.get(e),null===n&&(n=r.add((t||document).querySelector(e))),n):null}function o(e,t){var n=null;return"string"==typeof e?(n=r.get(e),null===n&&(n=r.add((t||document).querySelectorAll(e))),n):null}var r=null,l=null;return r={data:{},get:function(e){var t=r.data;return void 0!==t[e]?t[e]:null},add:function(e,t){var n=r.data;return n[e]=t,t},remove:function(e){var t=r.data;t[e]=null,delete t[e]},reset:function(){r.data={}}},l={first:e,all:t,cachedFirst:n,cachedAll:o,cacheReset:r.reset,cacheRemove:r.remove},{first:l.first,all:l.all,cachedFirst:l.cachedFirst,cachedAll:l.cachedAll,cacheReset:l.cacheReset,cacheRemove:l.cacheRemove}}(),new e},fromParent:function(){var t=function(){this.selector=e.bySelector()};return t.prototype={selector:null,select:function(e,t,n){var o=flex.unique(),r=null,l="data-"+o;return"string"==typeof e.nodeName&&(e.setAttribute(l,o),r=this.selector[n===!1?"all":"first"](e.nodeName+"["+l+'="'+o+'"] '+t),e.removeAttribute(l)),r},first:function(e,t){return this.select(e,t,!0)},all:function(e,t){return this.select(e,t,!1)}},Object.freeze(new t)}},t=function(){var e=function(){};return e.prototype={childByAttr:function(e,t,n){var o=null,t=t.toLowerCase(),r=this;return void 0!==e.childNodes&&"number"==typeof e.childNodes.length&&Array.prototype.forEach.call(e.childNodes,function(e){if("string"==typeof e.nodeName&&(e.nodeName.toLowerCase()===t||"*"===t)&&"function"==typeof e.getAttribute)if(null!==n.value){if(e.getAttribute(n.name)===n.value)return e}else if(e.hasAttribute(n.name)===!0)return e;return o=r.childByAttr(e,t,n),null!==o?o:void 0}),null},childByType:function(e,t){var n=null,t=t.toLowerCase(),o=this;return void 0!==e.childNodes&&"number"==typeof e.childNodes.length&&(Array.prototype.forEach.call(e.childNodes,function(e){return"string"==typeof e.nodeName&&e.nodeName.toLowerCase()===t?e:void 0}),Array.prototype.forEach.call(e.childNodes,function(e){return n=o.childByType(e,t),null!==n?n:void 0})),null},parentByAttr:function(e,t){return void 0!==e&&void 0!==t&&void 0!==e.parentNode&&null!==e.parentNode&&"function"==typeof e.parentNode.getAttribute?null!==t.value?e.parentNode.getAttribute(t.name)===t.value?e.parentNode:this.parentByAttr(e.parentNode,t):null!==e.parentNode.getAttribute(t.name)?e.parentNode:this.parentByAttr(e.parentNode,t):null}},new e},o=function(){var t=function(){};return t.prototype={nodeByClientRectSize:function(e){var t=0,n=0,o=null;return void 0!==e.getBoundingClientRect&&(o=e.getBoundingClientRect(),t=o.bottom-o.top,n=o.right-o.left),{height:t,width:n}},nodeByOffset:function(e){var t=0,n=0;return void 0!==e.offsetHeight&&(t=e.offsetHeight,n=e.offsetWidth),{height:t,width:n}},nodeWithMargin:function(t){var n,o,r,l,i,a,s,u,c=null,f=this.node(t);return"string"==typeof t&&(c=e.bySelector(),t=c.first(t),c=null),null!==t&&(n=parseInt(document.defaultView.getComputedStyle(t).marginTop,10),o=parseInt(document.defaultView.getComputedStyle(t).marginBottom,10),r=parseInt(document.defaultView.getComputedStyle(t).marginRight,10),l=parseInt(document.defaultView.getComputedStyle(t).marginLeft,10),i=parseInt(document.defaultView.getComputedStyle(t).borderTopWidth,10),a=parseInt(document.defaultView.getComputedStyle(t).borderBottomWidth,10),s=parseInt(document.defaultView.getComputedStyle(t).borderRightWidth,10),u=parseInt(document.defaultView.getComputedStyle(t).borderLeftWidth,10),null!==n&&NaN!==n||(n=0),null!==o&&NaN!==o||(o=0),null!==r&&NaN!==r||(r=0),null!==l&&NaN!==l||(l=0),null!==i&&NaN!==i||(i=0),null!==a&&NaN!==a||(a=0),
null!==s&&NaN!==s||(s=0),null!==u&&NaN!==u||(u=0)),{height:f.height+n+o+i+a,width:f.width+r+l+s+u}},node:function(t){var n=null,o={height:0,width:0};return"string"==typeof t&&(n=e.bySelector(),t=n.first(t),n=null),null!==t&&(o=this.nodeByClientRectSize(t),0===o.height&&0===o.width&&(o=this.nodeByOffset(t))),o},window:function(){return self.innerHeight?{height:self.innerHeight,width:self.innerWidth}:document.documentElement&&document.documentElement.clientHeight?{height:document.documentElement.clientHeight,width:document.documentElement.clientWidth}:document.body?{height:document.body.clientHeight,width:document.body.clientWidth}:null},image:function(e){function t(e){var t=new Image,n=null;return t.src=e.src,n={width:t.width,height:t.height},t=null,n}return void 0!==e?"number"==typeof e.naturalWidth?{width:e.naturalWidth,height:e.naturalHeight}:t(e):null}},new t},r=function(){var e=function(){};return e.prototype={window:function(){var e=document.body,t=document.documentElement;return{top:function(){return Math.max(e.scrollTop||0,t.scrollTop||0,e.pageYOffset||0,t.pageYOffset||0,window.pageYOffset||0)},left:function(){return Math.max(e.scrollLeft||0,t.scrollLeft||0,e.pageXOffset||0,t.pageXOffset||0,window.pageXOffset||0)},height:function(){return Math.max(e.scrollHeight||0,e.offsetHeight||0,t.clientHeight||0,t.scrollHeight||0,t.offsetHeight||0)},width:function(){return Math.max(e.scrollWidth||0,e.offsetWidth||0,t.clientWidth||0,t.scrollWidth||0,t.offsetWidth||0)}}},get:function(e){return e!==document.body&&e!==document.documentElement?{top:function(){return Math.max(e.scrollTop||0,e.pageYOffset||0)},left:function(){return Math.max(e.scrollLeft||0,e.pageXOffset||0)},height:function(){return Math.max(e.scrollHeight||0,e.clientHeight||0,e.offsetHeight||0)},width:function(){return Math.max(e.scrollWidth||0,e.clientWidth||0,e.offsetWidth||0)}}:this.window()},scrollBarSize:function(){function e(){var e=document.createElement("DIV"),t=i(),n=null;return t.apply(e,{position:"absolute",top:"-1000px",left:"-1000px",width:"300px",height:"300px",overflow:"scroll",opacity:"0.01"}),document.body.appendChild(e),n={width:e.offsetWidth-e.clientWidth,height:e.offsetHeight-e.clientHeight},n.probablyMobile=0===n.width,n.width=0===n.width?f.classes.scroll.MINIMAL_WIDTH:n.width,n.height=0===n.height?f.classes.scroll.MINIMAL_HEIGHT:n.height,document.body.removeChild(e),n}var t=flex.overhead.globaly.get(f.storage.GROUP,f.storage.SCROLL,{});return t.value||(t.value=e()),t.value}},new e},l=function(){var e=function(){};return e.prototype={build:function(e){function t(e,t){var n=t[e.settingup.parent]||null;"object"==typeof e.settingup&&null!==t&&null!==n&&Array.prototype.forEach.call(e.settingup.childs,function(o){t[o]&&n.appendChild("object"==typeof e[o].settingup?t[o][e[o].settingup.parent]:t[o])})}function n(e){var t=document.createElement(e.node);return null!==e.html&&(t.innerHTML=e.html),Array.prototype.forEach.call(e.attrs,function(e){flex.oop.objects.validate(e,[{name:"name",type:"string"},{name:"value",type:"string"}])===!0&&t.setAttribute(e.name,e.value)}),t}function o(e){return flex.oop.objects.validate(e,[{name:"node",type:"string"},{name:"attrs",type:"array",value:[]},{name:"html",type:"string",value:null}])}var r={};try{if(o(e)===!0)return n(e);for(var l in e)if(o(e[l])===!0)r[l]=n(e[l]);else if("object"==typeof e[l]&&"settingup"!==l&&(r[l]=this.build(e[l]),null===r[l]))return null;t(e,r)}catch(i){return null}return r}},new e},i=function(){var e=function(){};return e.prototype={apply:function(e,t){if(e&&"object"==typeof t&&e.style){for(var n in t)e.style[n]=t[n];return!0}return!1},redraw:function(e){return e&&void 0!==e.style?(e.style.display="none",e.style.display="",!0):!1},getRuleFromSheet:function(e,t){var n=(document.styleSheets,[]);try{t=t.replace(/['"]/gi,"|"),Array.prototype.forEach.call(e.cssRules||e.rules,function(e,o){e.selectorText?e.selectorText.replace(/['"]/gi,"|")===t&&n.push({rule:e,style:e.style||null,index:o,cssText:e.cssText||""}):"string"==typeof e.cssText&&0===e.cssText.indexOf(t.toLowerCase())&&n.push({rule:e,style:e.style||null,index:o,cssText:e.cssText||""})})}catch(o){}finally{return n.length>0?n:null}},getRule:function(e){var t=(document.styleSheets,[]),n=this;try{e=e.replace(/['"]/gi,"|"),Array.prototype.forEach.call(document.styleSheets,function(o){var r=n.getRuleFromSheet(o,e);null!==r&&(t=t.concat(r))})}catch(o){}finally{return t.length>0?t:null}},setRule:function(e,t){var n=flex.overhead.globaly.get(f.storage.GROUP,f.storage.CUSTOM_STYLES);if("string"==typeof t){if(null===n&&(n=document.createElement("style"),n.type="text/css",document.head.appendChild(n),n=n.styleSheet||n.sheet,flex.overhead.globaly.set(f.storage.GROUP,f.storage.CUSTOM_STYLES,n)),n.insertRule)return n.insertRule(e+" {"+t+"}",n.cssRules.length),{rule:n.cssRules[n.cssRules.length-1],index:n.cssRules.length-1,sheet:n};if(n.addRule)return n.addRule(e+" {"+t+"}",-1),{rule:n.cssRules[n.cssRules.length-1],index:n.cssRules.length-1,sheet:n}}return null},updateRule:function(e,t,n){var o=t.selectorText;return this.deleteRule(e,t),this.setRule(o,n)},deleteRule:function(e,t,n){function o(e,t,n,o){var r=null;if(void 0!==t)if("string"==typeof t){if(r=o===!1&&null!==n?e.getRuleFromSheet(n,t):e.getRule(t),null!==r&&1===r.length)return r[0].index}else{if("number"==typeof t)return t;if("object"==typeof t&&null!==n)return e.getRuleIndex(n,t)}return-1}var e=e||flex.overhead.globaly.get(f.storage.GROUP,f.storage.CUSTOM_STYLES),n="boolean"==typeof n?n:!0,r=o(this,t,e,n);if(-1!==r&&null!==e){if(e.deleteRule)return e.deleteRule(r),!0;if(e.removeRule)return e.removeRule(r),!0}return null},getRuleIndex:function(e,t){var n=-1;try{Array.prototype.forEach.call(e.cssRules,function(e,o){if(e===t)throw n=o,"found"})}catch(o){if("found"===o)return n}return-1},addClass:function(e,t){void 0!==e.className&&-1===e.className.search(t)&&(e.className+=t)},removeClass:function(e,t){void 0!==e.className&&-1!==e.className.search(t)&&(e.className=e.className.replace(t,""))}},new e},a=function(){var e=function(){};return e.prototype=function(){var e=null,t=null,n=null;return a={old:function(e){for(var t=0,n=0;e;)void 0!==e.offsetTop&&void 0!==e.offsetLeft&&(t+=parseFloat(e.offsetTop),n+=parseFloat(e.offsetLeft)),e=e.offsetParent;return{top:t,left:n}},modern:function(e){var t=null,n=null,o=null,r=null,l=null,i=null,a=null;return t=e.getBoundingClientRect(),n=document.body,o=document.documentElement,r=window.pageYOffset||o.scrollTop||n.scrollTop,l=window.pageXOffset||o.scrollLeft||n.scrollLeft,i=o.clientTop||n.clientTop||0,a=o.clientLeft||n.clientLeft||0,{top:t.top+r-i,left:t.left+l-a}}},e=function(e){var t=null,n=null,o=null,r=null,l=null,i=null;try{o=e.getBoundingClientRect(),t=o.top,n=o.left}catch(s){r=a.old(e),l=window.pageYOffset||objDocumentElement.scrollTop||objBody.scrollTop,i=window.pageXOffset||objDocumentElement.scrollLeft||objBody.scrollLeft,t=r.top-l,n=r.left-i}finally{return{top:t,left:n}}},t=function(e){var t=null;try{t=a.modern(e)}catch(n){t=a.old(e)}finally{return t}},n={byPage:e,byWindow:t},{byPage:n.byPage,byWindow:n.byWindow}}(),new e},s=function(){var e=function(){};return e.prototype={em:function(e){return e=e||document.documentElement,e=e.parentNode?e:document.documentElement,parseFloat(getComputedStyle(e).fontSize)},rem:function(){this.em(document.documentElement)}},new e},u={validateNode:function(t){var n=null;return t&&("string"==typeof t&&(n=e.bySelector(),t=n.first(t)),null!==t&&void 0!==t.parentNode)?t:null},appendChilds:function(e,t){for(var n=t.length-1;n>=0;n-=1)e.appendChild(t[0])}},c={init:function(){function n(){null===d&&(d=o())}function l(){null===p&&(p=a())}function s(){null===h&&(h=i())}function u(){null===g&&(g=r())}function c(){null===y&&(y=t())}function f(){null===E&&(E=e.fromParent())}var d=null,p=null,h=null,g=null,y=null,E=null;flex.callers.define.node("html.size.get",function(){return n(),d.node(this.target)}),flex.callers.define.node("html.size.getWithMargin",function(){return n(),d.nodeWithMargin(this.target)}),flex.callers.define.node("html.size.getByClientRectSize",function(){return n(),d.nodeByClientRectSize(this.target)}),flex.callers.define.node("html.size.getByOffset",function(){return n(),d.nodeByOffset(this.target)}),flex.callers.define.node("html.position.byPage",function(){return l(),p.byPage(this.target)}),flex.callers.define.node("html.position.byWindow",function(){return l(),p.byWindow(this.target)}),flex.callers.define.node("html.styles.apply",function(e){return s(),h.apply(this.target,e)}),flex.callers.define.node("html.styles.redraw",function(){return s(),h.redraw(this.target)}),flex.callers.define.node("html.styles.addClass",function(e){return s(),h.addClass(this.target,e)}),flex.callers.define.node("html.styles.removeClass",function(e){return s(),h.removeClass(this.target,e)}),flex.callers.define.node("html.scroll.position",function(){return u(),g.get(this.target)}),flex.callers.define.node("html.find.childByAttr",function(e,t){return c(),y.childByAttr(this.target,e,t)}),flex.callers.define.node("html.find.childByType",function(e){return c(),y.childByType(this.target,e)}),flex.callers.define.node("html.find.parentByAttr",function(e){return c(),y.parentByAttr(this.target,e)}),flex.callers.define.node("html.find.node",function(e){return f(),E.first(this.target,e)}),flex.callers.define.node("html.find.nodes",function(e){return f(),E.all(this.target,e)}),flex.callers.define.nodes("html.size.get",function(){var e=[];return n(),Array.prototype.forEach.call(this.target,function(t){e.push(d.node(t))}),e}),flex.callers.define.nodes("html.size.getWithMargin",function(){var e=[];return n(),Array.prototype.forEach.call(this.target,function(t){e.push(d.nodeWithMargin(t))}),e}),flex.callers.define.nodes("html.size.getByClientRectSize",function(){var e=[];return n(),Array.prototype.forEach.call(this.target,function(t){e.push(d.nodeByClientRectSize(t))}),e}),flex.callers.define.nodes("html.size.getByOffset",function(){var e=[];return n(),Array.prototype.forEach.call(this.target,function(t){e.push(d.nodeByOffset(t))}),e}),flex.callers.define.nodes("html.position.byPage",function(){var e=[];return l(),Array.prototype.forEach.call(this.target,function(t){e.push(p.byPage(t))}),e}),flex.callers.define.nodes("html.position.byWindow",function(){var e=[];return l(),Array.prototype.forEach.call(this.target,function(t){e.push(p.byWindow(t))}),e}),flex.callers.define.nodes("html.styles.apply",function(e){var t=[];return s(),Array.prototype.forEach.call(this.target,function(n){t.push(h.apply(n,e))}),t}),flex.callers.define.nodes("html.styles.redraw",function(){var e=[];return s(),Array.prototype.forEach.call(this.target,function(t){e.push(h.redraw(t))}),e}),flex.callers.define.nodes("html.styles.addClass",function(e){var t=[];return s(),Array.prototype.forEach.call(this.target,function(n){t.push(h.addClass(n,e))}),t}),flex.callers.define.nodes("html.styles.removeClass",function(e){var t=[];return s(),Array.prototype.forEach.call(this.target,function(n){t.push(h.removeClass(n,e))}),t}),flex.callers.define.nodes("html.scroll.position",function(){var e=[];return u(),Array.prototype.forEach.call(this.target,function(t){e.push(g.get(t))}),e}),flex.callers.define.nodes("html.find.childByAttr",function(e,t){var n=[];return c(),Array.prototype.forEach.call(this.target,function(o){n.push(y.childByAttr(o,e,t))}),n}),flex.callers.define.nodes("html.find.childByType",function(e){var t=[];return c(),Array.prototype.forEach.call(this.target,function(n){t.push(y.childByType(n,e))}),t}),flex.callers.define.nodes("html.find.parentByAttr",function(e){var t=[];return c(),Array.prototype.forEach.call(this.target,function(n){t.push(y.parentByAttr(n,e))}),t}),flex.callers.define.nodes("html.find.node",function(e){var t=[];return f(),Array.prototype.forEach.call(this.target,function(n){t.push(e.first(n,e))}),t}),flex.callers.define.nodes("html.find.nodes",function(e){var t=[];return f(),Array.prototype.forEach.call(this.target,function(n){t.push(e.all(n,e))}),t})}},c.init(),n={select:{bySelector:e.bySelector,fromParent:e.fromParent},find:t,size:o,scroll:r,builder:l,styles:i,position:a,units:s,helpers:u},{select:{bySelector:n.select.bySelector,fromParent:n.select.fromParent},find:n.find,size:n.size,scroll:n.scroll,builder:n.builder,styles:i,position:n.position,units:s,helpers:n.helpers}},u.array.prototype=function(){var e=null,t=null;return t=function(e){function t(e){var t=void 0!==i[e]?e:null;if(null===t)for(var n in a)if(-1!==a[n].indexOf(e)){t=n;break}return t}function n(e){_object(i[e.type]).forEach(function(t,n){n.call(r,e)})}function o(e){void 0===r[e]&&Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get:function(){return l[e]},set:function(t){l[e]=t,n({type:"set",index:e,item:t})}})}var r=this,l=[],i={set:{},add:{},remove:{}},a={set:["update"],add:["new","push","unshift"],remove:["del","delete","shift","pop"]},s={WRONG_EVENT_NAME:"0000: WRONG_EVENT_NAME",HANDLE_ISNOT_FUNCTION:"0001: HANDLE_ISNOT_FUNCTION",SAME_ID_OF_HANDLE:"0002: SAME_ID_OF_HANDLE",HANDLE_OR_ID_SHOULD_BE:"0003: HANDLE_OR_ID_SHOULD_BE",INVALID_LENGTH:"0004: INVALID_LENGTH"};Object.defineProperty(r,"bind",{configurable:!1,enumerable:!1,writable:!1,value:function(e,n,o){if(e=t(e),null===e)throw Error(s.WRONG_EVENT_NAME);if("function"!=typeof n)throw Error(s.HANDLE_ISNOT_FUNCTION);if(o="string"==typeof o?o:flex.unique(),void 0!==i[e][o])throw Error(s.SAME_ID_OF_HANDLE);i[e][o]=n}}),Object.defineProperty(r,"unbind",{configurable:!1,enumerable:!1,writable:!1,value:function(e,n){if(e=t(e),null!==e){if("function"==typeof n){for(var o in i[e])if(i[e][o]===n)return delete i[e][o],!0;return!1}if("string"==typeof n)return void 0!==i[e][n]?(delete i[e][n],!0):!1;throw Error(s.HANDLE_OR_ID_SHOULD_BE)}throw Error(s.WRONG_EVENT_NAME)}}),Object.defineProperty(r,"pop",{configurable:!1,enumerable:!1,writable:!1,value:function(){if(l.length>-1){var e=l.pop();return delete r[l.length],n({type:"remove",index:l.length,item:e}),e}}}),Object.defineProperty(r,"push",{configurable:!1,enumerable:!1,writable:!1,value:function(){for(var e=0,t=arguments.length;t>e;e++)l.push(arguments[e]),o(l.length-1),n({type:"add",index:l.length-1,item:arguments[e]});return l.length}}),Object.defineProperty(r,"unshift",{configurable:!1,enumerable:!1,writable:!1,value:function(){for(var e=0,t=arguments.length;t>e;e++)l.splice(e,0,arguments[e]),o(l.length-1),n({type:"add",index:e,item:arguments[e]});for(;l.length>e;e++)n({type:"set",index:e,item:l[e]});return l.length}}),Object.defineProperty(r,"shift",{configurable:!1,enumerable:!1,writable:!1,value:function(){var e=null;return l.length>0?(e=l.shift(),0===l.length&&delete r[0],n({type:"remove",index:0,item:e}),e):void 0}}),Object.defineProperty(r,"splice",{configurable:!1,enumerable:!1,writable:!1,value:function(e,t){var i=[],a=null,s=null;for(e=void 0!==e?e>l.length-1?l.length:e:0,t=void 0!==t?t:l.length-e,s=0>e?l.length+e:e;t--;)a=l.splice(s,1)[0],i.push(a),delete r[l.length],n({type:"remove",index:e+i.length-1,item:a});for(var u=2,c=arguments.length;c>u;u++)l.splice(s,0,arguments[u]),o(l.length-1),n({type:"add",index:s,item:arguments[u]}),s++;return i}}),Object.defineProperty(r,"fill",{configurable:!1,enumerable:!1,writable:!1,value:function(e,t,o){for(var r=Object(l),t=void 0===t?0:t,o=void 0===o?l.length:o,i=r.length>>>0,a=t>>0,s=0>a?Math.max(i+a,0):Math.min(a,i),u=void 0===o?i:o>>0,c=0>u?Math.max(i+u,0):Math.min(u,i);c>s;)r[s]=e,n({type:"set",index:s,item:e}),s++;return r}}),Object.defineProperty(r,"length",{configurable:!1,enumerable:!1,get:function(){return l.length},set:function(e){var t=+e;if(!(t%1===0&&t>=0))throw new RangeError(s.INVALID_LENGTH);return l.length>t?r.splice(t):t>l.length&&r.push.apply(r,Array(t-l.length)),e}}),Object.getOwnPropertyNames(Array.prototype).forEach(function(e){void 0===r[e]&&Object.defineProperty(r,e,{configurable:!1,enumerable:!1,writable:!1,value:Array.prototype[e]})}),e instanceof Array&&r.push.apply(r,e)},e={ExArray:t},{ExArray:e.ExArray}},t.prototype=function(){var e={},t={},n={},o={},r={},l={},i={},a={},s={},u={},c={},f={},d={};return e={settings:{CHECK_PATHS_IN_CSS:!0,SHOWN_LOGS:["CRITICAL","LOGICAL","WARNING"]},get:function(){var t=e.settings;return t},set:function(t){for(var n in t)void 0!==e.settings[n]&&typeof e.settings[n]==typeof t[n]&&(e.settings[n]=t[n])}},t={storage:{GROUP:"flex.core"},resources:{types:{CSS:".css",JS:".js"}},regs:{urls:{PARAMS:/\?.*/gi,EXTENSION:/(\.[\w\n]*)$/gi,JS_URL:/[\w]*:\/\/[\w\n:\/\.]*\.js/gi,NOT_URL_SYMBOLS:/[\s\t\n\r]/gi,JS_EXP_IN_URL:/\.js$/gi,CSS_EXP_IN_URL:/\.css$/gi}},hashes:{LOCAL_STORAGE_NAME:"flex.hash.storage"},files:{CORE:"patterns.min.js",CORE_URL:"",detect:function(){function e(e){return e=u.url.parse(e.toLowerCase()),t.files.CORE=e.target,t.files.CORE_URL=e.url,e=e.path}var n=u.resources.js.getCurrentSRC(),o=null;if(null!==n)return e(n);if(o=document.querySelector('script[src*="'+t.files.CORE+'"]'),null!==o)return e(o.src);throw Error("Cannot detect URL and PATH to core script (default name: flex.core.js)")}},other:{STORAGE_PREFIX:"[FLEX_SYSTEM_RESURCES]"}},n={settings:{DEFAULT_TIMEOUT:15e3,DEFAULT_METHOD:"POST",methods:{POST:"POST",GET:"GET",PUT:"PUT",DELETE:"DELETE",OPTIONS:"OPTIONS"},regs:{URLENCODED:/-urlencoded/gi,JSON:/application\/json/gi},headers:{CONTENT_TYPE:"Content-Type",ACCEPT:"Accept"}},requests:{storage:{},add:function(e){var t=n.requests.storage;return void 0===t[e.settings.id]?(t[e.settings.id]=e,!0):!1},remove:function(e){var t=n.requests.storage;return void 0!==t[e.settings.id]?(t[e.settings.id]=null,delete t[e.settings.id],!0):!1},isConflict:function(e){return void 0!==n.requests.storage[e]}},create:function(e,t,r,l,i){var a=null;return e="string"==typeof e?e:null,t="string"==typeof t&&-1!==[n.settings.methods.POST,n.settings.methods.GET,n.settings.methods.PUT,n.settings.methods.DELETE,n.settings.methods.OPTIONS].indexOf(t.toUpperCase())?t.toUpperCase():n.settings.DEFAULT_METHOD,i=n.parse.settings(i),r=n.parse.parameters(r,i),l=n.parse.callbacks(l),null!==e?(a=function(e,t,n,o,r){this.settings=r,this.url=e,this.method=t,this.parameters=n,this.callbacks=o,this.timerID=null,this.response=null,this.responseHeaders=null,this.httpRequest=null},a.prototype={send:function(){var e=this;try{n.requests.add(e),e.httpRequest=new XMLHttpRequest;for(var t in e.events)!function(e,t){o.DOM.add(t.httpRequest,e,function(n){return t.events[e](n,t)})}(t,e);if(null!==e.httpRequest){switch(e.callback(e.callbacks.before),e.method){case n.settings.methods.POST:e.httpRequest.open(e.method,e.url,!0),e.setHeaders(e),e.httpRequest.send(e.parameters._parameters);break;case n.settings.methods.GET:e.httpRequest.open(e.method,e.url+(""!==e.parameters._parameters?"?":"")+e.parameters._parameters,!0),e.setHeaders(e),e.httpRequest.send();break;default:e.httpRequest.open(e.method,e.url,!0),e.setHeaders(e),e.httpRequest.send(e.parameters._parameters)}return e.timerID=setTimeout(function(){e.events.timeout(null,e)},e.settings.timeout),!0}throw"Fail create XMLHttpRequest"}catch(r){e.callback(e.callbacks.fail,r),e.destroy(e)}},setHeaders:function(e){if(null!==e.settings.headers)for(var t in e.settings.headers)e.httpRequest.setRequestHeader(t,e.settings.headers[t])},events:{readystatechange:function(e,t){if(n.requests.isConflict(t.settings.id)!==!1&&e.target&&e.target.readyState)switch(t.callback(t.callbacks.reaction,e),e.target.readyState){case 2:t.responseHeaders=t.parseHeaders(e.target.getAllResponseHeaders()),t.callback(t.callbacks.headers,e);break;case 4:return 200===e.target.status?(t.response=t.parse(e.target.responseText),t.destroy(t),t.callback(t.callbacks.success,e),!0):(t.destroy(t),t.callback(t.callbacks.fail,e),!1)}},timeout:function(e,t){n.requests.isConflict(t.settings.id)!==!1&&(t.callback(t.callbacks.timeout,e),t.destroy(t))}},parse:function(e){var t={original:e,parsed:null};try{t.parsed=JSON.parse(e)}catch(n){}finally{return t}},parseHeaders:function(e){var t={_headers:e,headers:{}},n=null;return"string"==typeof e&&(n=e.split("\r\n"),n instanceof Array&&n.forEach(function(e){var n=e.split(":");n instanceof Array&&""!==n[0]&&(t.headers[n[0]]=e.replace(n[0]+":",""))})),t},callback:function(e,t){null!==e&&u.handle(e,[this.response,{id:this.id,event:void 0!==t?t:null,headers:this.responseHeaders,response:this.response,parameters:this.parameters,url:this.url,abort:this.abort.bind(this)}],"ajax.callback:: request ID:: "+this.id+" URL:: "+this.url,this)},abort:function(){null!==this.httpRequest&&"function"==typeof this.httpRequest.abort&&this.httpRequest.abort()},destroy:function(e){clearTimeout(e.timerID),n.requests.remove(e)}},new a(e,t,r,l,i)):null},parse:{settings:function(e){var e="object"==typeof e&&null!==e?e:{};return e.id="string"==typeof e.id?e.id:"number"==typeof e.id?e.id:c.id(),e.id=n.requests.isConflict(e.id)===!1?e.id:c.id(),e.timeout="number"==typeof e.timeout?e.timeout:n.settings.DEFAULT_TIMEOUT,e.doNotChangeHeaders="boolean"==typeof e.doNotChangeHeaders?e.doNotChangeHeaders:!1,e.doNotChangeParameters="boolean"==typeof e.doNotChangeParameters?e.doNotChangeParameters:!1,e.doNotEncodeParametersAsURL="boolean"==typeof e.doNotEncodeParametersAsURL?e.doNotEncodeParametersAsURL:!1,e.headers=n.parse.headers(e),e},parameters:function(e,t){var o=e,r={},l="",i=[],a=null;if(t.doNotChangeParameters)l=e;else{if(o instanceof Array)Array.prototype.forEach.call(o,function(e,t){var n=null;o[t]=param.replace(/^\s*\?/gi,""),n=o[t].split("="),n instanceof Array&&2===n.length?r[n[0]]=n[1]:i.push(o[t])});else if("object"==typeof o&&null!==o)for(var s in o){switch(typeof o[s]){case"string":r[s]=o[s];break;case"boolean":r[s]=""+o[s];break;case"number":r[s]=""+o[s];break;case"object":r[s]=JSON.stringify(o[s]);break;default:try{r[s]=JSON.stringify(o[s])}catch(u){}}r[s]=r[s]}if("string"!=typeof e)if(n.settings.regs.JSON.lastIndex=0,n.settings.regs.URLENCODED.lastIndex=0,n.settings.regs.JSON.test(t.headers[n.settings.headers.CONTENT_TYPE]))l=JSON.stringify(r);else{a=n.settings.regs.URLENCODED.test(t.headers[n.settings.headers.CONTENT_TYPE]),a=t.doNotEncodeParametersAsURL?!1:a;for(var s in r)l+="&"+s+"="+a?encodeURIComponent(r[s]):r[s];l=l.replace(/^\s*\&/gi,"")}else l=e}return{original:e,parameters:r,_parameters:l,excluded:i}},callbacks:function(e){var t={before:null,success:null,fail:null,reaction:null,timeout:null};return"object"==typeof e&&null!==e&&(t.before="function"==typeof e.before?e.before:null,t.success="function"==typeof e.success?e.success:null,t.fail="function"==typeof e.fail?e.fail:null,t.reaction="function"==typeof e.reaction?e.reaction:null,t.timeout="function"==typeof e.timeout?e.timeout:null,t.headers="function"==typeof e.headers?e.headers:null),t},headers:function(e){var t={};return e.doNotChangeHeaders?t="object"==typeof e.headers&&null!==e.headers?e.headers:{}:("object"==typeof e.headers&&null!==e.headers&&r.objects.forEach(e.headers,function(e,n){var o=e.split("-");o.forEach(function(e,t){o[t]=e.charAt(0).toUpperCase()+e.slice(1)}),t[o.join("-")]=n}),void 0===t[n.settings.headers.CONTENT_TYPE]&&(t[n.settings.headers.CONTENT_TYPE]="application/x-www-form-urlencoded"),void 0===t[n.settings.headers.ACCEPT]&&(t[n.settings.headers.ACCEPT]="*/*")),e.headers=t}}},r={classes:{of:function(e){return null===e?null:void 0===e?null:Object.prototype.toString.call(e).slice(8,-1)},create:function(e){var t="function"==typeof e.constr?e.constr:null,n="function"==typeof e.parent?e.parent:null,o=void 0!==e.privates?e.privates:{},l=void 0!==e.prototype?e.prototype:{},i=null,a=null;if(this instanceof r.classes.create)throw Error("Method [flex.oop.classes.create] cannot be used with derective NEW");if(null!==n){i=n,i.prototype=n.prototype,a="function"==typeof l?l.call(new t,o):l,t.prototype=new i;for(var s in a)t.prototype[s]=a[s]}else t.prototype="function"==typeof l?l.call(new t,o):l;return o.__instance=new t}},objects:{forEach:function(e,t){if("object"==typeof e){for(var n in e)!function(e,t,n){n(e,t[e])}(n,e,t);"toString"in{toString:null}||Array.prototype.forEach.call(["toString","valueOf","constructor","hasOwnPropery","isPrototypeOf","propertyIsEnumerable","toLocaleString"],function(o){e.hasOwnProperty(prototype)&&t(o,e[n])})}},extend:function(e,t,n){var n="Array"===r.classes.of(n)?n:[],t=null!==t&&void 0!==t&&"object"==typeof t?t:{},e="object"==typeof e?[e]:"Array"===r.classes.of(e)?e:null;return null!==e&&Array.prototype.forEach.call(e,function(e){if("object"==typeof e)for(var o in e)-1===n.indexOf(o)&&(t[o]=e[o])}),t},copy:function(e,t){function n(e){var t=null;return e instanceof Array?(t=[],Array.prototype.forEach.call(e,function(e){t.push(e instanceof Array||"object"==typeof e||"function"==typeof e?n(e):e)})):t="object"==typeof e&&null!==e&&"function"!=typeof e?o(e):e,t}var t=t||{},e="object"==typeof e?e:null,o=r.objects.copy;if(null!==e){for(var l in e)e.hasOwnProperty(l)&&(t[l]=n(e[l]));return t}return null},validate:function(e,t){var e="object"==typeof e?e:null,t=t||null,n=null,o=null;if(null!==e&&null!==t){t=t instanceof Array?t:[t];try{t.forEach(function(t){if(t.name&&t.type)if(e[t.name]||"boolean"==typeof e[t.name]||"number"==typeof e[t.name]){if(t.type="string"==typeof t.type?[t.type]:t.type,t.type instanceof Array){n=!1;try{t.type.forEach(function(o){if("node"===o?e[t.name]&&(n=e[t.name].nodeName?!0:n):n="array"===o?e[t.name]instanceof Array==!0?!0:n:void 0!==window[o]&&-1===["string","number","bool"].indexOf(o)?e[t.name]instanceof window[o]?!0:n:typeof e[t.name]===o?!0:n,n!==!1)throw"found"})}catch(r){"found"!==r&&(n=!1)}finally{if(n===!1){if(void 0===t.value)throw"deny";e[t.name]=t.value}else{if(void 0!==t.values&&t.values instanceof Array){try{o=!1,t.values.forEach(function(n){if(e[t.name]===n)throw o=!0,"found"})}catch(r){}if(o===!1)throw"deny"}if("function"==typeof t.handle)try{e[t.name]=t.handle(e[t.name])}catch(r){if(!t.value)throw"deny";e[t.name]=t.value}}}}}else{if(void 0===t.value)throw"deny";e[t.name]=t.value}})}catch(r){return!1}return!0}return null},isValueIn:function(e,t,n){var n="boolean"==typeof n?n:!1;if(e instanceof Array){try{e.forEach(function(e){if(e===t)throw"found"}),n!==!1&&e.forEach(function(e){if(("object"==typeof e||e instanceof Array)&&r.objects.isValueIn(e,t,n)===!0)throw"found"})}catch(o){return!0}return!1}if("object"==typeof e){try{r.objects.forEach(e,function(e,n){if(n===t)throw"found"}),n!==!1&&r.objects.forEach(e,function(e,o){if(("object"==typeof o||o instanceof Array)&&r.objects.isValueIn(o,t,n)===!0)throw"found"})}catch(o){return!0}return!1}return null},getByPath:function(e,t){var e="object"==typeof e?e:null,t="string"==typeof t?t:t instanceof Array?t:null,n=null,o={NO_BY_PATH:"NO_BY_PATH"},r=e,l=!1;if(null!==e&&null!==t){n=t instanceof Array?t:t.split(".");try{n.forEach(function(e){if(void 0===r[e])throw o.NO_BY_PATH;r=r[e]}),l=!0}catch(i){if(i!==o.NO_BY_PATH)throw i}}return l?r:void 0},findBy:function(e,t,n,o){var e="object"==typeof e?e:null,t="string"==typeof t?t:null,o="boolean"==typeof o?o:!1,l=o?[]:null,i={FOUND:"1"};if(null!==e&&null!==t){t=t.split(".");try{r.objects.forEach(e,function(e,a){var s=r.objects.getByPath(a,t);if(void 0!==s&&s===n){if(!o)throw l=a,i.FOUND;l.push(a)}})}catch(a){if(a!==i.FOUND)throw a}}return l}},wrappers:{objects:function(){f.prototypes.add.object("forEach",function(e){return r.objects.forEach(this.target,e)}),f.prototypes.add.object("extend",function(e,t){return r.objects.extend(this.target,e,t)}),f.prototypes.add.object("copy",function(e){return r.objects.copy(this.target,e)}),f.prototypes.add.object("validate",function(e){return r.objects.validate(this.target,e)}),f.prototypes.add.object("isValueIn",function(e,t){return r.objects.isValueIn(this.target,e,t)}),f.prototypes.add.object("getByPath",function(e){return r.objects.getByPath(this.target,e)}),f.prototypes.add.object("findBy",function(e,t,n){return r.objects.findBy(this.target,e,t,n)}),f.prototypes.add.object("createInstanceClass",function(){return r.classes.create(this.target)})}}},i={storage:{data:{},get:function(){return i.storage.data=u.localStorage.getJSON(t.hashes.LOCAL_STORAGE_NAME,t.other.STORAGE_PREFIX),"object"==typeof i.storage.data&&null!==i.storage.data||i.storage.create(),i.storage.data},create:function(){i.storage.data={},i.storage.update()},update:function(){u.localStorage.setJSON(t.hashes.LOCAL_STORAGE_NAME,i.storage.data,t.other.STORAGE_PREFIX)}},get:function(e){var t=i.storage.get();return"object"==typeof t[e]?t[e].hash:null},set:function(e,t){var n=i.storage.get();return"string"==typeof t?(n[e]={url:e,hash:t},i.storage.update(),!0):!1},update:{add:function(e){i.update.queue.add(e)},queue:{queue:{},journal:{},isLock:!1,unlock:function(){i.update.queue.isLock=!1,i.update.proceed()},add:function(e){"string"==typeof e&&void 0===i.update.queue.journal[e]&&(i.update.queue.journal[e]=!0,i.update.queue.queue[e]={url:e,working:!1}),i.update.queue.isLock||i.update.proceed()},del:function(e){"string"==typeof e&&(i.update.queue.queue[e]=null,delete i.update.queue.queue[e])},work:function(e){"object"==typeof i.update.queue.queue[e]&&(i.update.queue.queue[e].working=!0)},isWorking:function(e){return"object"==typeof i.update.queue.queue[e]?i.update.queue.queue[e].working:void 0}},proceed:function(){r.objects.forEach(i.update.queue.queue,function(e,t){var o=null;i.update.queue.isWorking(e)===!1&&(i.update.queue.work(e),o=n.create(t.url,n.settings.methods.GET,null,{headers:function(n,o){i.update.processing(e,t.url,o)},fail:function(n,o){i.update.fail(e,t.url,o)}}),o.send())})},processing:function(e,t,n){var o="",l=i.get(t);null!==n.headers&&""!==n.headers._headers&&(i.update.queue.del(e),r.objects.forEach(n.headers.headers,function(e,t){"date"!==e.toLowerCase()&&(o+=t)}),i.get(t)!==o&&(null===l?d.log("[HASHES]:: hash for resource ["+t+"] was generated. Next updating of page, resource will be loaded again.",d.types.KERNEL_LOGS):(d.log("[HASHES]:: resource ["+t+"] have to be updated.",d.types.KERNEL_LOGS),i.resources.update(t)),i.set(t,o)),n.abort())},fail:function(e,t,n){null===n.headers&&(d.log("[HASHES]:: fail to load hash for resource ["+t+"].",d.types.KERNEL_LOGS),i.update.queue.del(e))}},resources:{update:function(e){return i.resources.css.update(e)===!0?!0:void d.log("[HASHES]:: resource ["+e+"] cannot be updated in current session. It will be done after page be reloaded.",d.types.KERNEL_LOGS)},css:{update:function(e){var t=document.querySelector("style["+u.resources.css.settings.attr.SRC+'$="'+e+'"]');return null!==t?(u.resources.css.connect(e,function(){t.parentNode.removeChild(t),d.log("[HASHES]:: resource ["+e+"] have been updated in current session.",d.types.KERNEL_LOGS)}),!0):!1}}}},s={js:{stringify:function(e){var t=s.js.tools,n=null,o=null;return"function"==typeof e?(n=""+e,o={params:t.getParams(n),body:t.getBody(n)},null!==o.params&&null!==o.body?o:null):void 0},parse:function(e){var t=s.js.parseFunction(e.constr.params,e.constr.body);return"function"==typeof t&&(t.prototype=s.js.parseFunction(e.proto.params,e.proto.body),"function"==typeof t.prototype)?t:null},parseFunction:function(e,t){return"string"==typeof e&&"string"==typeof t?""===e?Function(t):Function(e,t):null},tools:{regs:{FUNCTION:/^\(?function\s.*?\(.*?\)\s*?\{/gi,ARGUMENTS:/\(.*?\)/gi,ARGUMENTS_BORDERS:/[\(\)]/gi,BODY_END:/\}$/gi,STRICT:/(use strict)/gi},getBody:function(e){return e=e.replace(s.js.tools.regs.FUNCTION,""),e=e.replace(s.js.tools.regs.BODY_END,""),-1===e.search(s.js.tools.regs.STRICT)&&(e='"use strict";'+e),e},getParams:function(e){var t=e.match(s.js.tools.regs.FUNCTION);return null!==t&&1===t.length&&(t=t[0].match(s.js.tools.regs.ARGUMENTS),1===t.length)?t=t[0].replace(s.js.tools.regs.ARGUMENTS_BORDERS,""):null}}},css:{stringify:function(e){function t(e){function t(e){var t="";return e.cssRules&&(t="@keyframes "+e.name+" {\n\r",Array.prototype.forEach.call(e.cssRules,function(e){t+=e.keyText+" { "+e.style.cssText+" }\n\r"}),t+="}"),t}var n="";document;return e.cssRules||e.rules?Array.prototype.forEach.call(e.cssRules||e.rules,function(e){
n+="string"==typeof e.cssText?e.cssText+"\n\r":t(e)+"\n\r"}):"string"==typeof e.cssText&&(n=e.cssText),n}var n=(document.styleSheets,null);try{Array.prototype.forEach.call(document.styleSheets,function(o){if(o.href&&-1!==o.href.indexOf(e))throw n=t(o),"found"})}catch(o){}finally{return n}}}},a={globaly:{storage:{},get:function(e,t,n){var o=a.globaly.storage;return e in o&&t in o[e]?o[e][t]:n?a.globaly.set(e,t,n):null},set:function(e,t,n){var o=a.globaly.storage;return o[e]=e in o?o[e]:{},o[e][t]=n},remove:function(e,t){var n=a.globaly.storage;return e in n&&t in n[e]?(n[e][t]=null,delete n[e][t],0===Object.keys(n[e]).length&&(n[e]=null,delete n[e]),!0):!1}},objecty:{settings:{COMMON_STORAGE_NAME:"FlexObjectStorage"},set:function(e,t,n,o){var o="boolean"==typeof o?o:!0,r=a.objecty.settings;return"object"==typeof e&&"string"==typeof t&&void 0!==n?("object"!=typeof e[r.COMMON_STORAGE_NAME]&&(e[r.COMMON_STORAGE_NAME]={}),o===!1?void 0===e[r.COMMON_STORAGE_NAME][t]&&(e[r.COMMON_STORAGE_NAME][t]=n):e[r.COMMON_STORAGE_NAME][t]=n,n):null},get:function(e,t,n,o){var n="boolean"==typeof n?n:!1,o=void 0!==o?o:null,r=null,l=a.objecty.settings,i=a.objecty.tools;if("object"==typeof e&&"string"==typeof t)if("object"==typeof e[l.COMMON_STORAGE_NAME]){if(void 0!==e[l.COMMON_STORAGE_NAME][t])return r=e[l.COMMON_STORAGE_NAME][t],n===!0&&(e[l.COMMON_STORAGE_NAME][t]=null,i.deleteAttribute(e,t),i.clear(e)),r;if(null!==o)return e[l.COMMON_STORAGE_NAME][t]=o}else if(null!==o)return e[l.COMMON_STORAGE_NAME]={},e[l.COMMON_STORAGE_NAME][t]=o;return null},remove:function(e,t){var n=a.objecty.settings,o=a.objecty.tools;return"object"==typeof e&&"string"==typeof t?"object"==typeof e[n.COMMON_STORAGE_NAME]&&void 0!==e[n.COMMON_STORAGE_NAME][t]?(e[n.COMMON_STORAGE_NAME][t]=null,o.deleteAttribute(e,t),o.clear(e),!0):!1:null},tools:{deleteAttribute:function(e,t){try{delete e[t]}catch(n){e.removeAttribute(t)}},clear:function(e){var t=a.objecty.settings,n=a.objecty.tools;0===Object.keys(e[t.COMMON_STORAGE_NAME]).length&&(e[t.COMMON_STORAGE_NAME]=null,n.deleteAttribute(e,t.COMMON_STORAGE_NAME))}}},register:{settings:{COMMON_STORAGE_NAME:"FlexRegisterStorage"},build:function(e,t){var n=function(e,t){this.name=e,this.onReady=t,this.items={}};return n.prototype={add:function(e){return this.items[e]?!1:(this.items[e]={isDone:!1,key:e},!0)},done:function(e,t){var t="boolean"==typeof t?t:!1;return this.items[e]&&(this.items[e].isDone=!0),t===!1&&this.isReady()!==!1?(null!==this.onReady&&u.handle(this.onReady,null,"Register: "+this.name,this),!0):!1},isReady:function(){for(var e in this.items)if(this.items[e].isDone===!1)return!1;return!0},isIn:function(e){return!!this.items[e]},isDone:function(e){return this.items[e]?this.items[e].isDone:null}},new n(e,t)},open:function(e,n,o){var e="string"==typeof e?e:null,n=n instanceof Array?n:void 0!==n?[n]:null,o="function"==typeof o?o:null,r=null,l=a.globaly.get(t.storage.GROUP,a.register.settings.COMMON_STORAGE_NAME,{});return null===e||l[e]?!1:(r=a.register.build(e,o),n.forEach(function(e){r.add(e)}),l[e]=r,!0)},add:function(e,n){var o=a.globaly.get(t.storage.GROUP,a.register.settings.COMMON_STORAGE_NAME,{});return o[e]?o[e].add(n):!1},done:function(e,n,o){var r=a.globaly.get(t.storage.GROUP,a.register.settings.COMMON_STORAGE_NAME,{}),o="boolean"==typeof o?o:!1;return r[e]&&r[e].done(n,o)!==!1&&(r[e]=null,delete r[e]),!1},isIn:function(e,n){var o=a.globaly.get(t.storage.GROUP,a.register.settings.COMMON_STORAGE_NAME,{});return o[e]?o[e].isIn(n):!1},isDone:function(e,n){var o=a.globaly.get(t.storage.GROUP,a.register.settings.COMMON_STORAGE_NAME,{});return o[e]?o[e].isDone(n):!1},isReady:function(e){var n=a.globaly.get(t.storage.GROUP,a.register.settings.COMMON_STORAGE_NAME,{});return n[e]?n[e].isReady():!0}}},o={DOM:{add:function(){return"function"==typeof window.addEventListener?function(e,t,n){var o=t instanceof Array?t:[t];Array.prototype.forEach.call(o,function(t){e.addEventListener(t,n,!1)})}:"function"==typeof document.attachEvent?function(e,t,n){var o=t instanceof Array?t:[t];Array.prototype.forEach.call(o,function(t){e.attachEvent("on"+t,n)})}:function(e,t,n){var o=t instanceof Array?t:[t];Array.prototype.forEach.call(o,function(t){e["on"+t]=n})}}(),remove:function(){return"function"==typeof window.removeEventListener?function(e,t,n){e.removeEventListener(t,n,!1)}:"function"==typeof document.detachEvent?function(e,t,n){e.detachEvent("on"+t,n)}:function(e,t){e["on"+t]=null}}()},core:{storage:{},listen:function(e,t,n,r,l){var e=e||null,t=t||null,n=n||null,r=r||c.id(),l="boolean"!=typeof l?!1:l,i=null,a=o.core;return null!==e&&null!==t&&null!==n?l!==!1&&null===a.get(e,t)?!1:(i=a.register(e,t),i[r]=n,r):!1},remove:function(e,t,n){var e=e||null,t=t||null,n=n||null,r=null,l=o.core.storage,i=o.core;return null!==e&&null!==t&&null!==n&&(r=i.register(e,t),n in r)?(r[n]=null,delete r[n],0===Object.keys(r).length&&(l[e][t]=null,delete l[e][t],0===Object.keys(l[e]).length&&(l[e]=null,delete l[e])),!0):!1},register:function(e,t){var n=o.core.storage;return e in n||(n[e]={}),t in n[e]||(n[e][t]={}),n[e][t]},get:function(e,t){var n=o.core.storage;return e in n&&t in n[e]?n[e][t]:null},fire:function(e,t,n){var r=o.core.get(e,t);if(null!==r)for(var l in r)try{r[l](n)}catch(i){}}}},u={handle:function(e,t,n,o,r){function l(){return null===t?e.call(o):"number"==typeof t.length&&"object"==typeof t?e.apply(o,t):e.call(o,t)}var e=e||null,t=t||null,n=n||null,o=o||null,r=r||!1;if(null!==e){if(!r)return l();try{return l()}catch(i){return d.log("Initializer runFunction method catch error: \r\n"+d.parseError(i)+"\r\n Call point: "+n,d.types.WARNING),null}}return null},localStorage:{get:function(e,t,n){var o=null,t="boolean"==typeof t?t:!1,n="string"==typeof n?n:"";try{return o=window.localStorage.getItem(n+e),"string"!=typeof o&&(o=null),t!==!1&&(o=u.convertor.BASE64.decode(o),o=u.convertor.UTF8.decode(o)),o}catch(r){return null}},set:function(e,t,n,o){var r=t,n="boolean"==typeof n?n:!1,o="string"==typeof o?o:"";try{return window.localStorage.removeItem(o+e),n!==!1&&(r="string"!=typeof t?JSON.stringify(t):r,r=u.convertor.UTF8.encode(r),r=u.convertor.BASE64.encode(r)),window.localStorage.setItem(o+e,r),!0}catch(l){return d.log("Error during saving data into localStorage. [key]:["+e+"]",d.types.WARNING),!1}},del:function(e,t){var t="string"==typeof t?t:"";try{return window.localStorage.removeItem(t+e),!0}catch(n){return d.log("Error during deleting data from localStorage. [key]:["+e+"]",d.types.WARNING),null}},getJSON:function(e,t){var n=u.localStorage.get(e,!0,t);if(null!==n)try{return n=JSON.parse(n)}catch(o){return null}return null},setJSON:function(e,t,n){return u.localStorage.set(e,JSON.stringify(t),!0,n)},reset:function(e){var e="string"==typeof e?e:"",t=[];try{if(null!==e){for(var n in window.localStorage)0===n.indexOf(e)&&t.push(n);t.forEach(function(e){window.localStorage.removeItem(e)})}else window.localStorage.clear();return!0}catch(o){return!1}},isAvailable:function(){var e=c.id(),t=!1;return u.localStorage.set(e,e),t=u.localStorage.get(e)===e,u.localStorage.del(e),t}},resources:{settings:{RESOURCES_MARK_ATTR:{name:"data-flex-connect-mark",value:"dynamically"},CSS_TIMER_PROPERTY:"flex_css_load_event_timer",CSS_TIMER_DURATION:5e3},css:{settings:{URLS:[{reg:/url\('([^\)'].*?)'\)/gi,left:/url\('/gi,right:/'\)/gi,_left:'url("',_right:'")'},{reg:/url\("([^\)"].*?)"\)/gi,left:/url\("/gi,right:/"\)/gi,_left:'url("',_right:'")'}],attr:{SRC:"data-flex-src"}},connect:function(e,t,n){function r(e){var t=u.resources.settings,n=document.createElement("LINK");return n.type="text/css",n.href=e,n.rel="stylesheet",n.setAttribute(t.RESOURCES_MARK_ATTR.name,t.RESOURCES_MARK_ATTR.value),{link:n,append:function(){document.head.appendChild(n)}}}function l(e,t,n){function r(e){clearTimeout(e[l.CSS_TIMER_PROPERTY]),e[l.CSS_TIMER_PROPERTY]=null,delete e[l.CSS_TIMER_PROPERTY]}var l=u.resources.settings;e[l.CSS_TIMER_PROPERTY]=setTimeout(function(){if(void 0!==e[l.CSS_TIMER_PROPERTY]){var i=document.createElement("IMG");r(e,l),o.DOM.add(i,["load","error"],function(){u.handle(n,t,"system.resources.css.connect",this)}),i.src=t}},l.CSS_TIMER_DURATION),o.DOM.add(e,"load",function(){void 0!==e[l.CSS_TIMER_PROPERTY]&&(r(e,l),u.handle(n,t,"system.resources.css.connect",this))})}function i(e){document.styleSheets;try{Array.prototype.forEach.call(document.styleSheets,function(t){if(-1!==t.href.indexOf(e))throw"found"})}catch(t){if("found"===t)return!0}return!1}var a=null,t=t||null,n=n||null,e=e||null;return null!==e&&i(e)===!1?(a=r(e),o.DOM.add(a.link,"error",function(){d.log("During loading CSS resource ["+e+"] was error",d.types.WARNING)}),null!==n&&o.DOM.add(a.link,"error",n),null!==t?l(a.link,e,t):u.handle(t,null,"system.resources.css.connect",this),a.append(),!0):!1},adoption:function(e,t,n){var t=null!==t&&"object"==typeof t&&void 0!==t.body?t:document,o=t.createElement("style"),n="string"==typeof n?n:null;if("string"==typeof e)try{return null!==n&&(e=u.resources.css.correctPaths(e,n),o.setAttribute(u.resources.css.settings.attr.SRC,n)),o.type="text/css",o.styleSheet?o.styleSheet.cssText=e:o.appendChild(t.createTextNode(e)),t.head.appendChild(o),o}catch(r){return d.log("Error during adoption of CSS resource: url = ["+n+"], cssText starts from ["+e.substr(0,50)+" (...)]",d.types.CRITICAL),null}return null},correctPaths:function(t,n){function o(e,t){var n=null;return 0!==e.trim().toLowerCase().indexOf("data:")?(n=u.url.parse(e,t),null!==n?n.url:e):e}return e.settings.CHECK_PATHS_IN_CSS!==!1&&"string"==typeof n&&""!==n&&u.resources.css.settings.URLS.forEach(function(e){var r=t.match(e.reg);r instanceof Array&&r.forEach(function(r){var l=r;l=l.replace(e.left,""),l=l.replace(e.right,""),l=o(l,n),null!==l&&(t=t.replace(r,e._left+l+e._right))})}),t}},js:{connect:function(e,t,n){function r(e){var t=u.resources.settings,n=document.createElement("SCRIPT");return n.type="application/javascript",n.src=e,n.setAttribute(t.RESOURCES_MARK_ATTR.name,t.RESOURCES_MARK_ATTR.value),{script:n,append:function(){document.head.appendChild(n)}}}var l=null,t=t||null,n=n||null,e=e||null;return null!==e?(l=r(e),null!==t&&o.DOM.add(l.script,"load",t),null!==n&&o.DOM.add(l.script,"error",n),l.append(),l.script):!1},adoption:function(e,t){var n=document.createElement("SCRIPT"),t=t||null,e=e||null;null!==e&&(n.type="application/javascript",n.appendChild(document.createTextNode(e)),document.body.insertBefore(n,document.body.childNodes[0]),null!==t&&u.handle(t,null,"system.resources.js.adoption",this))},getCurrentSRC:function(){var e=null;try{throw Error("Script URL detection")}catch(n){return"string"==typeof n.stack&&(e=n.stack.match(t.regs.urls.JS_URL),e instanceof Array&&e.length>0)&&-1===e[e.length-1].indexOf(t.files.CORE_URL)?e[e.length-1]:null}}}},convertor:{UTF8:{encode:function(e){return unescape(encodeURIComponent(e))},decode:function(e){return decodeURIComponent(escape(e))}},BASE64:{decode:function(e){var t,n,o,r,l,i,a={},s=[],u="",c=String.fromCharCode,f=[[65,91],[97,123],[48,58],[43,44],[47,48]],d=0,p=0,h=0;for(n in f)for(t=f[n][0];f[n][1]>t;t++)s.push(c(t));for(t=0;64>t;t++)a[s[t]]=t;if(100>e.length);for(t=0;e.length>t;t+=72)for(h=e.substring(t,t+72),r=0;h.length>r;r++)for(o=a[h.charAt(r)],d=(d<<6)+o,p+=6;p>=8;)l=c((d>>>(p-=8))%256),i=l.charCodeAt(0),u=0!==i?u+l:u;return u},encode:function(e){var t,n,o,r,l,i,a,s,u,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=0,d=0,p="",h=[];if(!e)return e;do t=e.charCodeAt(f++),n=e.charCodeAt(f++),o=e.charCodeAt(f++),u=t<<16|n<<8|o,r=u>>18&63,l=u>>12&63,i=u>>6&63,a=63&u,h[d++]=c.charAt(r)+c.charAt(l)+c.charAt(i)+c.charAt(a);while(e.length>f);return p=h.join(""),s=e.length%3,(s?p.slice(0,s-3):p)+"===".slice(s||3)}}},url:{settings:{parser:{LAST:/([^\/]*)$/gi,CORRECTION:/[\/\\]$/gi,BAD_SLASH:/\\/gi,PROTOCOL:/:\/\//gi,DOUBLE:/\/{2,}/gi}},getURLInfo:function(e){var t=document.createElement("a"),n=null;return"string"==typeof e&&(t.setAttribute("href",e),n={hostname:t.hostname,host:t.host,port:t.port,protocol:t.protocol,isFull:!1},n.isFull=""!==n.hostname?0===e.indexOf(n.protocol+"//"+n.hostname):!1),n},getCurrentDomain:function(){var e=null;return e=window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.host},getParams:function(e){var t=null,n=null;return e=e.split("?"),t=2===e.length?e[1]:null,e=e[0],null!==t&&(n=t.split("&"),t={},n.forEach(function(e){var n=e.split("=");2===n.length&&(t[n[0]]=n[1])})),{url:e,params:t}},restoreFullURL:function(e){var t=e;return"string"==typeof e?(t=u.url.getURLInfo(t),t.isFull===!1?""===t.hostname?u.url.getCurrentDomain()+(0!==e.indexOf("/")?"/":"")+e:t.protocol+"//"+t.host+(0!==e.indexOf("/")?"/":"")+e:e):null},parse:function(e,t){function n(e){var t=0,n=!0,o=-1,r="";return e.split("/").forEach(function(e,l){".."===e?(t+=1,-1!==o&&o!==l-1&&(n=!1),o=l):r+="/"+e}),n===!0?{count:t,url:r}:!1}function o(e){return e=e.replace(u.url.settings.parser.CORRECTION,""),e=e.replace(u.url.settings.parser.BAD_SLASH,"/")}var r=null,l=null,t="string"==typeof t?t:null,i=0,a=null,s=null;if("string"==typeof e&&(e=o(e),s=u.url.getParams(e),e=s.url,s=s.params,l=u.url.getURLInfo(e),null!==l&&(i=n(e),i!==!1)))if(i.count>0){if(null!==t&&(a=u.url.parse(t),null!==a&&a.parts.length-1>i.count))return a.parts.splice(a.parts.length-i.count,i.count),a.parts=a.parts.map(function(e){return"//"===e?"":e}),e=a.parts.join("/")+i.url,u.url.parse(e)}else if(l.isFull===!1){if(t=null===t?u.url.getCurrentDomain():t,a=u.url.parse(t),null!==a)return 0===e.indexOf("~/")?e=e.replace("~",a.home):(a.parts=a.parts.map(function(e){return"//"===e?"":e}),e=a.parts.join("/")+(0!==e.indexOf("/")?"/":"")+e),u.url.parse(e)}else if(r={target:e.match(u.url.settings.parser.LAST),_path:"",_url:e,_hostname:l.hostname,hostname:""!==l.hostname?l.hostname:window.location.hostname,_host:l.host,host:""!==l.host?l.host:window.location.host,_port:l.port,port:""!==l.port?l.port:window.location.port,_protocol:l.protocol,protocol:":"!==l.protocol?l.protocol:window.location.protocol,home:""===l.hostname?window.location.protocol+"//"+window.location.host:l.protocol+"//"+l.host,_home:""!==l.hostname?l.protocol+"//"+l.host:"",params:s,parts:null},r.target.length>0)return r.target instanceof Array?(r.target=r.target[0],-1===r.target.indexOf(".")&&(r.target="")):r.target="",r._path=e.replace(r.target,""),""===r._home?(r.path=r.home+(0===r._path.indexOf("/")?"":"/")+r._path,r.url=r.home+(0===r._url.indexOf("/")?"":"/")+r._url):(r.path=r._path,r.url=r._url),r.parts=r.url.split("/").map(function(e){return""===e?"//":e}),-1!==r.parts.indexOf(r.target)&&r.parts.splice(r.parts.indexOf(r.target),1),r;return null},sterilize:function(e){var t=c.id();return e.replace(u.url.settings.parser.PROTOCOL,t).replace(u.url.settings.parser.BAD_SLASH,"/").replace(u.url.settings.parser.DOUBLE,"/").replace(t,"://")},getTypeOfResource:function(e){var n=e.replace(t.regs.urls.PARAMS,"");return n=n.match(t.regs.urls.EXTENSION),n instanceof Array&&1===n.length?n[0].toLowerCase():null},is:{clear:function(e){return"string"==typeof e?(e=e.split("?"),e=e[0],e=e.replace(t.regs.urls.NOT_URL_SYMBOLS,"")):null},js:function(e){return e=u.url.is.clear(e),null!==e?(t.regs.urls.JS_EXP_IN_URL.lastIndex=0,t.regs.urls.JS_EXP_IN_URL.test(e)):!1},css:function(e){return e=u.url.is.clear(e),null!==e?(t.regs.urls.CSS_EXP_IN_URL.lastIndex=0,t.regs.urls.CSS_EXP_IN_URL.test(e)):!1}}}},c={id:function(){var e=0;return function(t){return e+=1,(t||"")+(new Date).valueOf()+"_"+e}}()},d={types:{CRITICAL:"CRITICAL",LOGICAL:"LOGICAL",WARNING:"WARNING",NOTIFICATION:"NOTIFICATION",LOGS:"LOG",KERNEL_LOGS:"KERNEL_LOGS"},rendering:{CRITICAL:"color: #FF0000;font-weight:bold;",LOGICAL:"color: #00FFF7;font-weight:bold;",WARNING:"color: #A69600;font-weight:bold;",NOTIFICATION:"color: #988DFF;font-weight:bold;",LOGS:"color: #6C6C6C;",KERNEL_LOGS:"color: #008B0E;font-weight:bold;"},parseError:function(e){var t=e.name+": "+e.message+"\r\n--------------------------------------------";for(var n in e)"name"!==n&&"message"!==n&&(t=t+"\r\n  "+n+"="+e[n]);return t},log:function(t,n){var n=n||"LOGS";console&&d.types[n]&&void 0!==console.log&&-1!==e.settings.SHOWN_LOGS.indexOf(n)&&console.log("%c ["+n+"]%c"+t,d.rendering[n],d.rendering.LOGS)}},f={callers:{node:function(){var e={};return function(t,n,o){var r=null,n="boolean"==typeof n?n:!1;if("string"==typeof t){if(n&&e[t]&&null!==e[t]&&(r=e[t]),r=null!==r?r:(o||document).querySelector(t),n&&!e[t]&&null!==r&&(e[t]=r),null!==r)return new f.constructors.node(r)}else if(void 0!==t&&("string"==typeof t.nodeName||t==window))return new f.constructors.node(t);return null}}(),nodes:function(){var e={};return function(t,n,o){var r=null,n="boolean"==typeof n?n:!1;if("string"==typeof t){if(n&&e[t]&&null!==e[t]&&e[t].length>0&&(r=e[t]),r=null!==r?r:(o||document).querySelectorAll(t),n&&!e[t]&&null!==r&&r.length>0&&(e[t]=r),null!==r)return new f.constructors.nodes(r)}else if(void 0!==t&&"number"==typeof t.length&&t.length>0){if("string"==typeof t[0])return r=[],Array.prototype.forEach.call(t,function(e){var t=(o||document).querySelector(e);null!==t&&r.push(t)}),new f.constructors.nodes(r);if("string"==typeof t[0].nodeName)return new f.constructors.nodes(t)}return null}}(),array:function(e){return e instanceof Array?new f.constructors.array(e):null},string:function(e){return"string"==typeof e?new f.constructors.string(e):null},"boolean":function(e){return"boolean"==typeof e?new f.constructors["boolean"](e):null},object:function(e){return"object"==typeof e?new f.constructors.object(e):null}},prototypes:{node:{},nodes:{},array:{},string:{},"boolean":{},object:{},update:{update:function(e){function t(e){var n=null;for(var o in e)if(e.hasOwnProperty(o)){if("object"==typeof e[o]){n=function(){return n.target=this.target,n};for(var r in e[o])n[r]=e[o][r];e[o]=n}"function"==typeof e[o]&&t(e[o])}}f.prototypes[e]&&t(f.prototypes[e])},node:function(){f.prototypes.update.update("node")},nodes:function(){f.prototypes.update.update("nodes")},array:function(){f.prototypes.update.update("array")},string:function(){f.prototypes.update.update("string")},"boolean":function(){f.prototypes.update.update("boolean")},object:function(){f.prototypes.update.update("object")}},add:{add:function(e,t,n){var o=null,r=null;"string"==typeof e&&"string"==typeof t&&void 0!==n&&f.prototypes[e]&&(o=t.split("."),r=f.prototypes[e],o.forEach(function(e,t){void 0===r[e]?t===o.length-1?r[e]=n:(r[e]={},r=r[e]):"object"==typeof r[e]||"function"==typeof r[e]?r=r[e]:(r[e]={},r=r[e])}),f.prototypes.update[e]())},node:function(e,t){f.prototypes.add.add("node",e,t)},nodes:function(e,t){f.prototypes.add.add("nodes",e,t)},array:function(e,t){f.prototypes.add.add("array",e,t)},string:function(e,t){f.prototypes.add.add("string",e,t)},"boolean":function(e,t){f.prototypes.add.add("boolean",e,t)},object:function(e,t){f.prototypes.add.add("object",e,t)}}},constructors:{node:function(e){this.target=e},nodes:function(e){this.target=e},array:function(e){this.target=e},string:function(e){this.target=e},"boolean":function(e){this.target=e},object:function(e){this.target=e}},build:function(){for(var e in f.constructors)f.constructors[e].prototype=f.prototypes[e];return!0}},l={init:e.init,oop:{objects:{copy:r.objects.copy,extend:r.objects.extend,forEach:r.objects.forEach,validate:r.objects.validate,isValueIn:r.objects.isValueIn},classes:{of:r.classes.of,create:r.classes.create}},unique:c.id,events:{DOM:{add:o.DOM.add,remove:o.DOM.remove},core:{fire:o.core.fire,listen:o.core.listen,register:o.core.register,remove:o.core.remove}},overhead:{globaly:{set:a.globaly.set,get:a.globaly.get,del:a.globaly.remove},objecty:{set:a.objecty.set,get:a.objecty.get,del:a.objecty.remove},register:{open:a.register.open,add:a.register.add,done:a.register.done}},ajax:{send:n.create,methods:{POST:n.settings.methods.POST,GET:n.settings.methods.GET,PUT:n.settings.methods.PUT,DELETE:n.settings.methods.DELETE,OPTIONS:n.settings.methods.OPTIONS}},logs:{parseError:d.parseError,log:d.log,types:d.types},callers:{node:f.callers.node,nodes:f.callers.nodes,array:f.callers.array,object:f.callers.object,string:f.callers.string,"boolean":f.callers["boolean"],define:{node:f.prototypes.add.node,nodes:f.prototypes.add.nodes,array:f.prototypes.add.array,object:f.prototypes.add.object,string:f.prototypes.add.string,"boolean":f.prototypes.add["boolean"]}},resources:{parse:{css:{stringify:s.css.stringify}},attach:{css:{connect:u.resources.css.connect,adoption:u.resources.css.adoption},js:{connect:u.resources.js.connect,adoption:u.resources.js.adoption,getCurrentSRC:u.resources.js.getCurrentSRC}}},system:{handle:u.handle,convertor:{UTF8:{encode:u.convertor.UTF8.encode,decode:u.convertor.UTF8.decode},BASE64:{encode:u.convertor.BASE64.encode,decode:u.convertor.BASE64.decode}},url:{parse:u.url.parse,restore:u.url.restoreFullURL}},localStorage:{add:u.localStorage.set,get:u.localStorage.get,del:u.localStorage.del,addJSON:u.localStorage.setJSON,getJSON:u.localStorage.getJSON},hashes:{get:i.get,update:i.update.add},config:{get:e.get,set:e.set}},t.files.detect(),f.build(),r.wrappers.objects(),{init:l.init,oop:{objects:{copy:l.oop.objects.copy,extend:l.oop.objects.extend,forEach:l.oop.objects.forEach,validate:l.oop.objects.validate,isValueIn:l.oop.objects.isValueIn},classes:{of:l.oop.classes.of,create:l.oop.classes.create}},unique:l.unique,events:{DOM:{add:l.events.DOM.add,remove:l.events.DOM.remove},core:{fire:l.events.core.fire,listen:l.events.core.listen,register:l.events.core.register,remove:l.events.core.remove}},overhead:{globaly:{set:l.overhead.globaly.set,get:l.overhead.globaly.get,del:l.overhead.globaly.del},objecty:{set:l.overhead.objecty.set,get:l.overhead.objecty.get,del:l.overhead.objecty.del},register:{open:l.overhead.register.open,add:l.overhead.register.add,done:l.overhead.register.done}},ajax:{send:l.ajax.send,methods:l.ajax.methods},resources:{parse:{css:{stringify:l.resources.parse.css.stringify}},attach:{css:{connect:l.resources.attach.css.connect,adoption:l.resources.attach.css.adoption},js:{connect:l.resources.attach.js.connect,adoption:l.resources.attach.js.adoption,getCurrentSRC:l.resources.attach.js.getCurrentSRC}}},localStorage:{add:l.localStorage.add,get:l.localStorage.get,del:l.localStorage.del,addJSON:l.localStorage.addJSON,getJSON:l.localStorage.getJSON},system:{handle:l.system.handle,convertor:{UTF8:{encode:l.system.convertor.UTF8.encode,decode:l.system.convertor.UTF8.decode},BASE64:{encode:l.system.convertor.BASE64.encode,decode:l.system.convertor.BASE64.decode}},url:{parse:l.system.url.parse,restore:l.system.url.restore}},logs:{parseError:l.logs.parseError,log:l.logs.log,types:l.logs.types},hashes:{get:l.hashes.get,update:l.hashes.update},callers:{node:l.callers.node,nodes:l.callers.nodes,array:l.callers.array,object:l.callers.object,string:l.callers.string,"boolean":l.callers["boolean"],define:{node:l.callers.define.node,nodes:l.callers.define.nodes,array:l.callers.define.array,object:l.callers.define.object,string:l.callers.define.string,"boolean":l.callers.define["boolean"]}},config:{get:l.config.get,set:l.config.set}}},t.prototype=t.prototype(),window.flex=new t,window._node=flex.callers.node,window._nodes=flex.callers.nodes,window._array=flex.callers.array,window._object=flex.callers.object,window._string=flex.callers.string,window._boolean=flex.callers["boolean"],flex.registry={},flex.registry.events={ui:{window:{resize:{GROUP:"flex.ui.window.resize",REFRESH:"refresh",FINISH:"finish"},maximize:{GROUP:"flex.ui.window.maximize",MAXIMIZED:"maximized",RESTORED:"restored",CHANGE:"change"}},patterns:{GROUP:"flex.ui.patterns",MOUNTED:"mounted"}}},n.prototype=n.prototype(),o.prototype=o.prototype(),e.prototype=e.prototype(),r.prototype=r.prototype(),l.prototype=l.prototype(),i.prototype=i.prototype(),a.prototype=a.prototype(),s.prototype=s.prototype(),u.array.prototype=u.array.prototype(),window.flex.libraries={events:new n,binds:new o,html:new r,ui:{window:{move:new i,resize:new a,maximize:new s,focus:new l},patterns:new e},types:{array:new u.array}},window._patterns=flex.libraries.ui.patterns}();