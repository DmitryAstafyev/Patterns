(function(){"use strict";var n=function(){},t=function(){},i=function(){},r=function(){},u=function(){},f=function(){},e=function(){},o=function(){},s=function(){};n.prototype=function(){var u=null,n=null,l=null,a=null,i=null,p=null,o=null,c=null,s=null,f=null,e=null,t=null,h=null,r=null,v=null,w=null,y=null;return u={values:{USE_STORAGE_CSS:!0,USE_STORAGE_JS:!0,USE_STORAGE_HTML:!0,PATTERN_NODE:"pattern"},validator:{USE_STORAGE_CSS:function(n){return typeof n=="boolean"?!0:!1},USE_STORAGE_JS:function(n){return typeof n=="boolean"?!0:!1},USE_STORAGE_HTML:function(n){return typeof n=="boolean"?!0:!1},PATTERN_NODE:function(n){return typeof n=="string"?n.length>0?n.replace(/\w/gi,"").length===0?!0:!1:!1:!1}},setup:function(n){n!==null&&typeof n=="object"&&_object(n).forEach(function(n,t){u.values[n]!==void 0&&u.validator[n]!==void 0&&(u.values[n]=u.validator[n](t)?t:u.values[n])})},get:function(){return u.values},debug:function(){u.values.USE_STORAGE_CSS=!1;u.values.USE_STORAGE_JS=!1;u.values.USE_STORAGE_HTML=!1;flex.config.set({SHOWN_LOGS:["CRITICAL","LOGICAL","WARNING","NOTIFICATION","LOGS"]})}},n={measuring:{MEASURE:!0},classes:{SOURCE:function(){},PATTERN:function(){},INSTANCE:function(){},RESULT:function(){},CALLER:function(){}},regs:{BODY:/<\s*body[^>]*>(\n|\r|\s|.)*?<\s*\/body\s*>/gi,BODY_TAG:/<\s*body[^>]*>|<\s*\/\s*body\s*>/gi,BODY_CLEAR:/^[\n\r\s]*|[\n\r\s]*$/gi,TABLE:/<\s*table[^>]*>(\n|\r|\s|.)*?<\s*\/table\s*>/gi,TABLE_TAG:/<\s*table[^>]*>|<\s*\/\s*table\s*>/gi,ANY_TAG:/<\s*[\w]{1,}[^>]*>(\n|\r|\s|\t|.)*<\s*\/\s*\w{1,}\s*>/gi,FIRST_TAG:/^\<.*?\>/gi,TAG_BORDERS:/<|>/gi,CSS:/<link\s+.*?\/>|<link\s+.*?\>/gi,CSS_HREF:/href\s*\=\s*"(.*?)"|href\s*\=\s*'(.*?)'/gi,CSS_REL:/rel\s*=\s*"stylesheet"|rel\s*=\s*'stylesheet'/gi,CSS_TYPE:/type\s*=\s*"text\/css"|type\s*=\s*'text\/css'/gi,JS:/<script\s+.*?>/gi,JS_SRC:/src\s*\=\s*"(.*?)"|src\s*\=\s*'(.*?)'/gi,JS_TYPE:/type\s*=\s*"text\/javascript"|type\s*=\s*'text\/javascript'/gi,STRING:/"(.*?)"|'(.*?)'/gi,STRING_BORDERS:/"|'/gi,DOM:/\{\{\$[\w\.\,]*?\}\}/gi,DOM_OPEN:"\\{\\{\\$",DOM_CLOSE:"\\}\\}",HOOK:/\{\{[\w\.]*?\}\}/gi,MODEL:/\{\{\:\:\w*?\}\}/gi,MODEL_BORDERS:/\{\{\:\:|\}\}/gi,MODEL_OPEN:"\\{\\{\\:\\:",MODEL_CLOSE:"\\}\\}",HOOK_OPEN:"\\{\\{",HOOK_CLOSE:"\\}\\}",HOOK_OPEN_COM:"<\\!--\\{\\{",HOOK_CLOSE_COM:"\\}\\}-->",HOOK_BORDERS:/\{\{|\}\}/gi,GROUP_PROPERTY:/__\w*?__/gi,FIRST_WORD:/^\w+/gi,NOT_WORDS_NUMBERS:/[^\w\d]/gi,CONDITION_STRUCTURE:/^\w*=/gi},marks:{DOM:"DOM"},storage:{USE_LOCALSTORAGE:!0,VIRTUAL_STORAGE_GROUP:"FLEX_UI_PATTERNS_GROUP",VIRTUAL_STORAGE_ID:"FLEX_UI_PATTERNS_STORAGE",CSS_ATTACHED_JOURNAL:"FLEX_UI_PATTERNS_CSS_JOURNAL",JS_ATTACHED_JOURNAL:"JS_ATTACHED_JOURNAL",PRELOAD_TRACKER:"FLEX_UI_PATTERNS_PRELOAD_TRACKER",NODE_BINDING_DATA:"FLEX_PATTERNS_BINDINGS_DATA",CONTROLLERS_LINKS:"FLEX_PATTERNS_CONTROLLERS_LINKS",CONTROLLERS_STORAGE:"FLEX_PATTERNS_CONTROLLERS_STORAGE",CONDITIONS_STORAGE:"FLEX_PATTERNS_CONDITIONS_STORAGE",HOOKS_STORAGE:"FLEX_PATTERNS_HOOKS_STORAGE",PATTERN_SOURCES:"FLEX_PATTERNS_PATTERN_SOURCES",PATTERNS:"FLEX_PATTERNS_PATTERNS"},compatibility:{PARENT_TO_CHILD:{table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td",colgroup:"col"},CHILD_TO_PARENT:{tr:"tbody",th:"tbody",td:"tr",col:"colgroup",tbody:"table",thead:"table",tfoot:"table"},BASE:"div"},css:{classes:{HOOK_WRAPPER:"flex_patterns_hook_wrapper"},attrs:{MODEL_DATA:"data-flex-model-data",DOM_MARK:"data-flex-dom-mark"},selectors:{HOOK_WRAPPERS:".flex_patterns_hook_wrapper"}},other:{INDEXES:"__indexes"}},t={SIGNATURE:"[flex.ui.patterns]",source:{TEMPLATE_WAS_LOADED:"0001:TEMPLATE_WAS_LOADED",FAIL_TO_LOAD_TEMPLATE:"0002:FAIL_TO_LOAD_TEMPLATE",FAIL_TO_PARSE_TEMPLATE:"0003:FAIL_TO_PARSE_TEMPLATE",FAIL_TO_LOAD_JS_RESOURCE:"0004:FAIL_TO_LOAD_JS_RESOURCE"},pattern:{CANNOT_FIND_FIRST_TAG:"1000:CANNOT_FIND_FIRST_TAG",CANNOT_CREATE_WRAPPER:"1001:CANNOT_CREATE_WRAPPER",WRONG_PATTERN_WRAPPER:"1002:WRONG_PATTERN_WRAPPER",WRONG_HOOK_VALUE:"1003:WRONG_HOOK_VALUE",WRONG_CONDITION_DEFINITION:"1004:WRONG_CONDITION_DEFINITION",MODEL_HOOK_NEEDS_WRAPPER:"1005:MODEL_HOOK_NEEDS_WRAPPER",CANNOT_FIND_CONDITION_BEGINING:"1006:CANNOT_FIND_CONDITION_BEGINING",CANNOT_FIND_CONDITION_END:"1007:CANNOT_FIND_CONDITION_END",CANNOT_FIND_CONDITION_NODES:"1008:CANNOT_FIND_CONDITION_NODES",CANNOT_FIND_CONDITION_VALUE:"1009:CANNOT_FIND_CONDITION_VALUE",UNEXCEPTED_ERROR_CONDITION_PARSER:"1010:UNEXCEPTED_ERROR_CONDITION_PARSER"},instance:{BAD_HOOK_FOR_CLONE:"2000:BAD_HOOK_FOR_CLONE",NO_URL_FOR_CLONE_HOOK:"2001:NO_URL_FOR_CLONE_HOOK"},caller:{CANNOT_INIT_PATTERN:"3000:CANNOT_INIT_PATTERN",CANNOT_GET_CHILD_PATTERN:"3001:CANNOT_GET_CHILD_PATTERN",CANNOT_GET_PATTERN:"3002:CANNOT_GET_PATTERN",PATTERN_WITHOUT_SRC:"3003:PATTERN_WITHOUT_SRC",CANNOT_FIND_ROOT_TEMPLATE:"3004:CANNOT_FIND_ROOT_TEMPLATE",ONLY_ONE_TEMPLATE_ON_SAME_LEVEL:"3005:ONLY_ONE_TEMPLATE_ON_SAME_LEVEL"},layout:{BAD_ARRAY_OF_HOOKS:"4000:BAD_ARRAY_OF_HOOKS"}},l={proto:function(i){var o=this,p=null,c=null,a=null,v=null,w=null,s=null,l=null,y=null;return p=function(n,r){var f=null,v=null,c=null;return i.html===null?(c=e.get(o.url),c!==null&&u.get().USE_STORAGE_HTML===!0?a(c,n,r):(f=h.measure(),v=flex.ajax.send(o.url,flex.ajax.methods.GET,null,{success:function(t){h.measure(f,"loading sources for ("+o.url+")");e.add(o.url,t);a(t,n,r)},fail:function(){h.measure(f,"loading sources for ("+o.url+")");flex.logs.log(l()+t.source.FAIL_TO_LOAD_TEMPLATE,flex.logs.types.CRITICAL);s(r);throw t.source.FAIL_TO_LOAD_TEMPLATE;}}),v.send())):flex.logs.log(l()+t.source.TEMPLATE_WAS_LOADED,flex.logs.types.NOTIFICATION),!0},c={URLs:function(n){var t=flex.system.url.restore(o.url);return t!==null&&(n=n.map(function(n){var i=flex.system.url.parse(n,t);return i!==null?i.url:!1}),n=n.filter(function(n){return n!==!1?!0:!1})),n},html:function(t){var u=n.regs,f=t.match(u.BODY);return f!==null&&f.length===1?(i.html=f[0].replace(u.BODY_TAG,"").replace(u.BODY_CLEAR,""),i.original=t,i.html=r.tableFix(i.html),!0):(i.html=null,!1)},css:function(){var t=n.regs,r=i.original!==null?i.original.match(t.CSS):null,u=[];r!==null&&Array.prototype.forEach.call(r,function(n){function f(n){var i=n.search(t.CSS_REL),r=n.search(t.CSS_TYPE);return i>0&&r>0?!0:!1}var r=n.match(t.CSS_HREF),i=null;f(n)!==!1&&r!==null&&r.length===1&&(i=r[0].match(t.STRING),i!==null&&i.length===1&&u.push(i[0].replace(t.STRING_BORDERS,"")))});i.css=c.URLs(u)},js:function(){var t=n.regs,r=i.original!==null?i.original.match(t.JS):null,u=[];r!==null&&Array.prototype.forEach.call(r,function(n){function f(n){var i=n.search(t.JS_TYPE);return i>0?!0:!1}var r=n.match(t.JS_SRC),i=null;f(n)!==!1&&r!==null&&r.length===1&&(i=r[0].match(t.STRING),i!==null&&i.length===1&&u.push(i[0].replace(t.STRING_BORDERS,"")))});i.js=c.URLs(u)}},a=function(n,i,r){c.html(n.original)?(c.js(),c.css(),v.css.load(function(){v.js.load(function(){s(i)},function(){s(r)})})):(flex.logs.log(l()+t.source.FAIL_TO_PARSE_TEMPLATE,flex.logs.types.NOTIFICATION),s(r))},v={css:{load:function(t){var f=flex.overhead.globaly.get(n.storage.VIRTUAL_STORAGE_GROUP,n.storage.CSS_ATTACHED_JOURNAL,{}),r=flex.unique();i.css!==null&&i.css.length>0?(flex.overhead.register.open(r,i.css,t),Array.prototype.forEach.call(i.css,function(n){var t=null,i=null;f[n]?flex.overhead.register.done(r,n):(f[n]=!0,t=e.get(n),t===null||u.get().USE_STORAGE_CSS===!1?(i=h.measure(),flex.resources.attach.css.connect(n,function(n){var t=flex.resources.parse.css.stringify(n);t!==null&&e.add(n,t);r!==null&&flex.overhead.register.done(r,n);h.measure(i,"loading resources for ("+o.url+"):: "+n)})):(flex.resources.attach.css.adoption(t,null,n),flex.overhead.register.done(r,n),e.add(n,t)))})):s(t)}},js:{load:function(r,c){var v=flex.overhead.globaly.get(n.storage.VIRTUAL_STORAGE_GROUP,n.storage.JS_ATTACHED_JOURNAL,{}),a=flex.unique();i.js!==null&&i.js.length>0?(flex.overhead.register.open(a,i.js,r),Array.prototype.forEach.call(i.js,function(n){var i=null,r=null;v[n]===void 0?(f.references.assign(n,o.url),v[n]=!0,i=e.get(n),i===null||u.get().USE_STORAGE_JS===!1?(r=h.measure(),flex.resources.attach.js.connect(n,function(){flex.overhead.register.done(a,n);var t=flex.ajax.send(n,flex.ajax.methods.GET,null,{success:function(t){e.add(n,t.original)}});t.send();h.measure(r,"loading resources for ("+o.url+"):: "+n)},function(){flex.logs.log(l()+t.source.FAIL_TO_LOAD_JS_RESOURCE,flex.logs.types.CRITICAL);h.measure(r,"loading resources for ("+o.url+"):: "+n);s(c);throw t.source.FAIL_TO_LOAD_JS_RESOURCE;})):(f.current.set(n),flex.resources.attach.js.adoption(i,function(){flex.overhead.register.done(a,n);f.current.reset(n)}),e.add(n,i))):flex.overhead.register.done(a,n)})):s(r)}}},s=function(n){typeof n=="function"&&n.call(i.__instance,o.url,o.original_url,i.__instance)},w={html:function(){return i.html}},l=function(){return t.SIGNATURE+":: pattern ("+o.url+")"},y={load:p,html:w.html},{load:y.load,html:y.html}},instance:function(t){return flex.oop.objects.validate(t,[{name:"url",type:"string"},{name:"html",type:"string",value:null},{name:"css",type:"array",value:null},{name:"js",type:"array",value:null}])!==!1?_object({parent:n.classes.SOURCE,constr:function(){this.url=flex.system.url.restore(t.url);this.original_url=t.url},privates:{original:null,html:t.html,css:t.css,js:t.js},prototype:l.proto}).createInstanceClass():null},storage:{add:function(t,i){var r=flex.overhead.globaly.get(n.storage.VIRTUAL_STORAGE_GROUP,n.storage.PATTERN_SOURCES,{});r[t]===void 0&&(r[t]=i)},get:function(t){var i=flex.overhead.globaly.get(n.storage.VIRTUAL_STORAGE_GROUP,n.storage.PATTERN_SOURCES,{});return i[t]!==void 0?i[t]:null}},init:function(t,i,r){var e=t instanceof Array?t:[t],s=flex.overhead.globaly.get(n.storage.VIRTUAL_STORAGE_GROUP,n.storage.PRELOAD_TRACKER,{}),u=flex.unique(),f=[],o=!1;flex.overhead.register.open(u,e,function(){typeof i!="function"||o?flex.system.handle(r):i(f)});e.forEach(function(n){var t=l.storage.get(n);t!==null?(f.push(t),flex.overhead.register.done(u,n)):(t=l.instance({url:n}),t.load(function(n,t,i){f.push(i);l.storage.add(t,i);a.init(n,i.html());flex.overhead.register.done(u,t)},function(n,t){o=!0;flex.overhead.register.done(u,t)}))})}},a={proto:function(i){var h=this,u=null,e=null,s=null,o=null,f=null;return u={hooks:{getFromHTML:function(){var t=i.html.match(n.regs.HOOK);return t instanceof Array?(t=function(n){var t={};return n.filter(function(n){return t[n]===void 0?(t[n]=!0,!0):!1})}(t),t.map(function(t){return t.replace(new RegExp(n.regs.HOOK_OPEN,"gi"),"").replace(new RegExp(n.regs.HOOK_CLOSE,"gi"),"")})):[]},wrap:function(t){function i(t){var i=t.nodeValue,f=i.match(n.regs.HOOK),r=null,e=n.compatibility.PARENT_TO_CHILD[t.parentNode.nodeName.toLowerCase()]!==void 0?n.compatibility.PARENT_TO_CHILD[t.parentNode.nodeName.toLowerCase()]:n.compatibility.BASE,u,o;if(f instanceof Array){for(f.forEach(function(t){var r=t.replace(n.regs.HOOK_BORDERS,"");i=i.replace(new RegExp(n.regs.HOOK_OPEN+r+n.regs.HOOK_CLOSE,"gi"),"<"+e+' id="'+r+'" class="'+n.css.classes.HOOK_WRAPPER+'"><!--'+t+"--><\/"+e+">")}),r=document.createElement(t.parentNode.nodeName),r.innerHTML=i,u=0,o=r.childNodes.length;u<o;u+=1)t.parentNode.insertBefore(r.childNodes[0],t);t.parentNode.removeChild(t)}}return t.childNodes!==void 0&&t.childNodes.length>0&&Array.prototype.forEach.call(Array.prototype.filter.call(t.childNodes,function(){return!0}),function(t){typeof t.innerHTML=="string"?r.testReg(n.regs.HOOK,t.innerHTML)&&u.hooks.wrap(t):typeof t.nodeValue=="string"&&r.testReg(n.regs.HOOK,t.nodeValue)&&i(t)}),!0},setters:{inNodes:function(t,i,f,e){var e=e instanceof RegExp?e:new RegExp(n.regs.HOOK_OPEN_COM+i+n.regs.HOOK_CLOSE_COM,"gi"),i=i instanceof RegExp?i:new RegExp(n.regs.HOOK_OPEN+i+n.regs.HOOK_CLOSE,"gi");t.childNodes!==void 0&&t.childNodes.length>0&&Array.prototype.forEach.call(t.childNodes,function(n){typeof n.innerHTML=="string"?r.testReg(e,n.innerHTML)&&u.hooks.setters.inNodes(n,i,f,e):typeof n.nodeValue=="string"&&r.testReg(i,n.nodeValue)&&f.push(u.hooks.setters.nodeSetter(n.parentNode))})},inAttributes:function(t,i,f,e){var e=e instanceof RegExp?e:new RegExp(n.regs.HOOK_OPEN+i+n.regs.HOOK_CLOSE,"gi");t.attributes&&Array.prototype.forEach.call(t.attributes,function(o){typeof o.value=="string"&&o.value!==""&&r.testReg(e,o.value)&&(t.setAttribute(o.nodeName,o.value.replace(e,"{{"+i+"_attr}}")),f.push(u.hooks.setters.attrSetter(new RegExp(n.regs.HOOK_OPEN+i+"_attr"+n.regs.HOOK_CLOSE,"gi"),t,o.nodeName,t.getAttribute(o.nodeName))))});t.childNodes&&Array.prototype.forEach.call(t.childNodes,function(n){u.hooks.setters.inAttributes(n,i,f,e)})},attrSetter:function(n,t,i,r){return function(u){t.setAttribute(i,r.replace(n,u))}},nodeSetter:function(t){function i(t,i){var r=null,u=null;return t.innerHTML!==i&&(u=e.getFirstTagFromHTML(i.replace(n.regs.BODY_CLEAR,"")),n.compatibility.CHILD_TO_PARENT[u]!==void 0&&n.compatibility.CHILD_TO_PARENT[u]!==t.nodeName.toLowerCase()&&(r=document.createElement(n.compatibility.CHILD_TO_PARENT[u]),t.attributes!==void 0&&t.attributes!==null&&t.attributes.length!==void 0&&Array.prototype.forEach.call(t.attributes,function(n){r.setAttribute(n.nodeName,n.value)}),r.innerHTML=i,t.parentNode.insertBefore(r,t),t.parentNode.removeChild(t),t=r)),t}return function(r){if(typeof r.innerHTML=="string")return t.parentNode.insertBefore(r,t),t.parentNode.removeChild(t),!0;if(r instanceof n.classes.RESULT)return r.nodes().forEach(function(n){t.parentNode.insertBefore(n,t)}),t.parentNode.removeChild(t),!0;if(r.toString!==void 0||typeof r=="string"){t.innerHTML=typeof r=="string"?r:r.toString();t=i(t,r);for(var u=t.childNodes.length-1;u>=0;u-=1)t.parentNode.insertBefore(t.childNodes[0],t);return t.parentNode.removeChild(t),!0}}}},process:function(){i.hooks_html=u.hooks.getFromHTML();u.hooks.wrap(i.pattern)}},model:{getFromHTML:function(){var t=i.html.match(n.regs.MODEL);return t instanceof Array?(t=function(n){var t={};return n.filter(function(n){return t[n]===void 0?(t[n]=!0,!0):!1})}(t),t.map(function(t){return t.replace(n.regs.MODEL_BORDERS,"")})):null},setAttrData:function(t,i){var r=t.getAttribute(n.css.attrs.MODEL_DATA);r=typeof r=="string"?r!==""?JSON.parse(r):[]:[];r.push(i);t.setAttribute(n.css.attrs.MODEL_DATA,JSON.stringify(r))},find:{inStyles:function(t,i){var r=i.split(";");r.forEach(function(i){var f=i.split(":"),r=i.match(n.regs.MODEL);f.length>1&&t.style[f[0]]!==void 0&&(r=i.match(n.regs.MODEL),r instanceof Array&&r.length===1&&(r=r[0].replace(n.regs.MODEL_BORDERS,""),u.model.setAttrData(t,{style:f[0],model:r})))})},inAttrs:function(t,i,f){var f=f instanceof RegExp?f:new RegExp(n.regs.MODEL_OPEN+i+n.regs.MODEL_CLOSE,"gi");t.attributes&&Array.prototype.forEach.call(t.attributes,function(n){var e=null;if(typeof n.value=="string"&&n.value!==""&&r.testReg(f,n.value)&&(n.nodeName==="style"?u.model.find.inStyles(t,n.value):u.model.setAttrData(t,{attr:n.nodeName,model:i}),t.removeAttribute(n.nodeName),t[n.nodeName]!==void 0)){try{t[n.nodeName]=null}catch(o){}if(e="default"+n.nodeName[0].toUpperCase()+n.nodeName.substr(1,n.nodeName.length-1),t[e]!==void 0)try{t[e]=""}catch(o){}}});t.childNodes&&Array.prototype.forEach.call(t.childNodes,function(n){u.model.find.inAttrs(n,i,f)})},inHTML:function(i,e,o){function s(i,r){i.childNodes!==null&&i.childNodes.length>0&&Array.prototype.forEach.call(i.childNodes,function(i){if(i.nodeType!==3)if(i.className!==void 0&&i.className.indexOf(n.css.classes.HOOK_WRAPPER)===-1){flex.logs.log(f()+t.pattern.MODEL_HOOK_NEEDS_WRAPPER+"(model hook: "+r+")",flex.logs.types.CRITICAL);throw t.pattern.MODEL_HOOK_NEEDS_WRAPPER;}else if(i.className===void 0){flex.logs.log(f()+t.pattern.MODEL_HOOK_NEEDS_WRAPPER+"(model hook: "+r+")",flex.logs.types.CRITICAL);throw t.pattern.MODEL_HOOK_NEEDS_WRAPPER;}})}var o=o instanceof RegExp?o:new RegExp(n.regs.MODEL_OPEN+e+n.regs.MODEL_CLOSE,"gi");i.childNodes!==void 0&&i.childNodes.length>0&&Array.prototype.forEach.call(i.childNodes,function(n){typeof n.innerHTML=="string"?r.testReg(o,n.innerHTML)&&u.model.find.inHTML(n,e,o):typeof n.nodeValue=="string"&&r.testReg(o,n.nodeValue)&&(s(i,e),n.nodeValue=flex.unique(),u.model.setAttrData(i,{model:e,text:n.nodeValue}))})}},process:function(){var n=u.model.getFromHTML();n!==null&&n.forEach(function(n){u.model.find.inAttrs(i.pattern,n);u.model.find.inHTML(i.pattern,n,null)})}},conditions:{getName:function(n){var i=n.split("=");if(i.length===2)return{name:i[0],value:i[1]};flex.logs.log(f()+t.pattern.WRONG_CONDITION_DEFINITION+" (original comment: "+n+")",flex.logs.types.CRITICAL);throw t.pattern.WRONG_CONDITION_DEFINITION;},getNodes:function(i,e,o){var s=!1,c=[],h=[],l=!1;try{Array.prototype.forEach.call(o.childNodes,function(t){var f=null;if(s)if(t.nodeType===8&&t.nodeValue===i){s=null;throw"closed";}else t.nodeType===8&&r.testReg(n.regs.CONDITION_STRUCTURE,t.nodeValue)?(f=u.conditions.getName(t.nodeValue).name,h.indexOf(f)===-1&&h.push(f),l=!0):t.nodeType===8&&h.indexOf(t.nodeValue)!==-1?l=!1:c.push(t);else t===e&&(s=!0)})}catch(a){if(a!=="closed"){flex.logs.log(f()+t.pattern.UNEXCEPTED_ERROR_CONDITION_PARSER+" (condition name: "+i+")",flex.logs.types.CRITICAL);throw t.pattern.UNEXCEPTED_ERROR_CONDITION_PARSER;}}if(s===!1){flex.logs.log(f()+t.pattern.CANNOT_FIND_CONDITION_BEGINING+" (condition name: "+i+")",flex.logs.types.CRITICAL);throw t.pattern.CANNOT_FIND_CONDITION_BEGINING;}if(s===!0){flex.logs.log(f()+t.pattern.CANNOT_FIND_CONDITION_END+" (condition name: "+i+")",flex.logs.types.CRITICAL);throw t.pattern.CANNOT_FIND_CONDITION_END;}return{nodes:c,included:h}},find:function(t){function f(t,i){t.childNodes!==void 0&&Array.prototype.forEach.call(t.childNodes,function(t){var e=null,o=null;t.nodeType===8?r.testReg(n.regs.CONDITION_STRUCTURE,t.nodeValue)&&(e=u.conditions.getName(t.nodeValue),i[e.name]===void 0&&(i[e.name]=[]),o=u.conditions.getNodes(e.name,t,t.parentNode),i[e.name].push({value:e.value,comment:t,nodes:o.nodes,included:o.included})):t.childNodes!==void 0&&t.childNodes.length>0&&f(t,i)})}function o(n){function i(n){var t=document.createTextNode("");return n.parentNode.insertBefore(t,n),function(n){t.parentNode.insertBefore(n,t)}}var t=[];return _object(n).forEach(function(t,r){r instanceof Array&&r.forEach(function(r,u){n[t][u].append=i(r.comment)})}),t}function s(n,t){_object(n).forEach(function(t,i){i instanceof Array&&i.forEach(function(i,r){i.nodes.forEach(function(n){i.append(n)});n[t][r].comment=null;delete n[t][r].comment})});t.forEach(function(n){n.parentNode!==null&&n.parentNode.removeChild(n)})}var i={},e=null;return f(t,i),e=o(i),s(i,e),i},process:function(n,i){var e=u.conditions.find(n),r={};return _object(i).forEach(function(n,i){var u=!1;e[n]!==void 0?(r[n]={},e[n].forEach(function(t){r[n][t.value]=r[n][t.value]===void 0?[]:r[n][t.value];r[n][t.value]=function(n,t,i){var r={append:function(){var i=[];t.forEach(function(t,r){t.__to_deleted===void 0?n(t):i.push(r)});i.length>0&&(t=t.filter(function(n,t){return i.indexOf(t)!==-1?!1:!0}))},remove:function(){var n=[];t.forEach(function(t,i){if(t.parentNode!==null)return t.parentNode.removeChild(t);t.__to_deleted!==void 0&&n.push(i)});n.length>0&&(t=t.filter(function(t,i){return n.indexOf(i)!==-1?!1:!0}))},del:function(){t.forEach(function(n){n.__to_deleted=!0})},included:i};return r.append.blocked=!1,r.remove.blocked=!1,r}(t.append,t.nodes,t.included);t.nodes.forEach(function(n){t.value!==i?n.parentNode!==null&&n.parentNode.removeChild(n):u=!0})}),r[n].__update=function(n){return function(t){_object(n).forEach(function(n,i){i.append!==void 0&&i.remove!==void 0&&(i.append.blocked||i.remove.blocked||(t===n?i.append():i.remove()))})}}(r[n]),r[n].__block=function(n){return function(){_object(n).forEach(function(n,t){t.append!==void 0&&t.remove!==void 0&&(t.append.blocked=!0,t.remove.blocked=!0)})}}(r[n]),r[n].__unblock=function(n){return function(){_object(n).forEach(function(n,t){t.append!==void 0&&t.remove!==void 0&&(t.append.blocked=!1,t.remove.blocked=!1)})}}(r[n]),r[n].__included=function(n){var t=[];return _object(n).forEach(function(n,i){i.included!==void 0&&(t=t.concat(i.included))}),t}(r[n]),u||flex.logs.log(f()+t.pattern.CANNOT_FIND_CONDITION_VALUE+" (condition name: "+n+' = "'+i+'")',flex.logs.types.NOTIFICATION)):flex.logs.log(f()+t.pattern.CANNOT_FIND_CONDITION_NODES+" (condition name: "+n+")",flex.logs.types.WARNING)}),Object.keys(r).length>0?r:null}},marks:{getFromHTML:function(t){var r=null,u=[];return n.regs[t]!==void 0&&(r=i.html.match(n.regs[t]),r instanceof Array&&(r=function(n){var t={};return n.filter(function(n){return t[n]===void 0?(t[n]=!0,!0):!1})}(r),r.forEach(function(r){var f=r.replace(new RegExp(n.regs[t+"_OPEN"],"gi"),"").replace(new RegExp(n.regs[t+"_CLOSE"],"gi"),"");i.html=i.html.replace(new RegExp(n.regs[t+"_OPEN"]+f.replace(/\./gi,"\\.")+n.regs[t+"_CLOSE"],"gi")," "+n.css.attrs[t+"_MARK"]+'="'+f+'" ');f=f.split(",");f.forEach(function(n){n=n.replace(/\s/gi);u.indexOf(n)===-1&&u.push(n)})}))),u},getFromDOM:function(t,r){var u={};return i[r.toLowerCase()]instanceof Array&&(i[r.toLowerCase()].forEach(function(i){u[i]=_nodes("*["+n.css.attrs[r+"_MARK"]+'*="'+i+'"]',!1,t);u[i].target!==null&&u[i].target.length>0&&(u[i]=u[i].target)}),_object(u).forEach(function(t,i){if(u[t]!==null){switch(r){case n.marks.DOM:u[t]=i}Array.prototype.forEach.call(i,function(t){t.removeAttribute(n.css.attrs[r+"_MARK"])})}})),u},process:function(){[n.marks.DOM].forEach(function(n){i[n.toLowerCase()]=u.marks.getFromHTML(n)})}},process:function(){if(i.pattern=e.getParent(e.getFirstTagFromHTML(i.html)),i.pattern!==null)return u.marks.process(),i.pattern.innerHTML=i.html,u.hooks.process(),u.model.process(),!0;flex.logs.log(f()+t.pattern.CANNOT_CREATE_WRAPPER,flex.logs.types.CRITICAL);throw t.pattern.CANNOT_CREATE_WRAPPER;}},e={getParent:function(t){return typeof t=="string"?n.compatibility.CHILD_TO_PARENT[t]!==void 0?document.createElement(n.compatibility.CHILD_TO_PARENT[t]):document.createElement(n.compatibility.BASE):null},getFirstTagFromHTML:function(i){var r=i.match(n.regs.FIRST_TAG);return r!==null&&r.length===1?r[0].replace(n.regs.TAG_BORDERS,"").match(n.regs.FIRST_WORD)[0].toLowerCase():(flex.logs.log(f()+t.pattern.CANNOT_FIND_FIRST_TAG+"(Probably hook has symbol of caret inside (\\n, \\r))",flex.logs.types.NOTIFICATION),null)}},s=function(t){var f={},r=i.pattern.cloneNode(!0);return i.hooks_html.forEach(function(n){var t=[];u.hooks.setters.inAttributes(r,n,t);u.hooks.setters.inNodes(r,n,t);f[n]=function(n){return function(t){n.forEach(function(n){n(t)})}}(t)}),{clone:r,setters:f,dom:u.marks.getFromDOM(r,n.marks.DOM),applyConditions:function(){var n=null;return t!==void 0&&t!==null&&(n=u.conditions.process(r,t)),n}}},f=function(){return t.SIGNATURE+":: pattern ("+h.url+")"},o={build:u.process,clone:s},{build:o.build,pattern:o.clone}},instance:function(t){return flex.oop.objects.validate(t,[{name:"url",type:"string"},{name:"html",type:"string"}])!==!1?_object({parent:n.classes.PATTERN,constr:function(){this.url=flex.system.url.restore(t.url)},privates:{html:t.html,pattern:null,hooks_html:null,dom:null},prototype:a.proto}).createInstanceClass():null},storage:{add:function(t,i){var r=flex.overhead.globaly.get(n.storage.VIRTUAL_STORAGE_GROUP,n.storage.PATTERNS,{});r[t]===void 0&&(r[t]=i)},get:function(t){var i=flex.overhead.globaly.get(n.storage.VIRTUAL_STORAGE_GROUP,n.storage.PATTERNS,{});return i[t]!==void 0?i[t]:null}},init:function(n,t){var r=a.storage.get(n);return r!==null?r:(r=a.instance({url:n,html:t}),r.build()!==!1)?(i.init(n,r.pattern),a.storage.add(n,r),r):null}},i={proto:function(u){var l=this,u=u,h=null,a=null,e=null,s=null,c=null,k=null,w=null,b=null,y=null;return w={update:function(t,i){var t=t instanceof Array?t[0]:t,r={};return _object(t).forEach(function(t,u){u instanceof n.classes.RESULT?r["__"+t+"__"]=u.url:r[t]=!0;r.__conditions__=i}),r},convertHooks:function(n,i){var r=[],i=i instanceof Array?i:[i];return i.forEach(function(i){var u={};_object(i).forEach(function(i,r){if(n[i]!==void 0)typeof n[i]=="boolean"&&n[i]===!0?u[i]=r:typeof n[i]=="object"&&n["__"+i+"__"]!==void 0&&typeof r=="object"&&r!==null?u[i]=o.instance({url:n["__"+i+"__"],conditions:n[i].__conditions__,hooks:w.convertHooks(n[i],r)}):flex.logs.log(t.instance.NO_URL_FOR_CLONE_HOOK+"("+l.url+")",flex.logs.types.WARNING);else{flex.logs.log(t.instance.BAD_HOOK_FOR_CLONE+"("+l.url+")",flex.logs.types.CRITICAL);throw t.instance.BAD_HOOK_FOR_CLONE;}});r.push(u)}),r},clone:function(t,i){var u=w.convertHooks(t,i),r=null;if(u.length>0)return r=o.instance({url:l.url,hooks:u}).render(!0),r instanceof n.classes.RESULT?r.nodes():null}},a={build:function(n){return n instanceof Array?n.forEach(function(t,i){n[i]=a.build(n[i])}):n!==null&&_object(n).forEach(function(t,i){typeof i=="function"?n[t]=i():typeof i=="object"&&i!==null&&(a.convertObj(i,n,t),delete n[t])}),n},apply:function(t,i,r){t!==null&&_object(i).forEach(function(i,u){t[i]!==void 0?(t[i]instanceof n.classes.RESULT&&(h.current[i]=t[i].map(),e.current.model["__"+i+"__"]=t[i].model(),e.current.binds["__"+i+"__"]=t[i].binds(),s.current["__"+i+"__"]=t[i].dom(),r[i]=t[i].hooks_map()),u(t[i])):u("")})},convertObj:function(n,t,i){_object(n).forEach(function(n,r){var u=i+"."+n;typeof r=="object"&&r!==null?a.convertObj(r,t,u):t[u]=r})}},h={current:{},map:{},update:function(n){var t={__context:n.childNodes.length>0?n.childNodes[0]:null};typeof h.current=="object"&&h.current!==null&&_object(h.current).forEach(function(n,i){t[n]=i});h.map===null?h.map={}:typeof h.map!="object"||h.map instanceof Array||(h.map=[h.map]);h.map instanceof Array?h.map.push(t):h.map=t},reset:function(){h.map=null},iteration:function(){h.current={}},collapse:function(){function n(t){var r=null;return t instanceof Array?(r=[],t.forEach(function(t){r.push(n(t))})):(r={},t.__context!==void 0&&(r.__context=i.map.create(t.__context.parentNode)),_object(t).forEach(function(t,i){t!=="__context"&&(typeof i=="object"||i instanceof Array)&&(r[t]=n(i))})),r}return n(h.map)}},e={current:null,model:null,binds:null,map:function(t,i){var u=_nodes("*["+n.css.attrs.MODEL_DATA+"]",!1,t).target;return u.length>0&&Array.prototype.forEach.call(u,function(t){var u=JSON.parse(t.getAttribute(n.css.attrs.MODEL_DATA));u instanceof Array&&u.forEach(function(n){var u=null;e.current.binds[n.model]===void 0&&(e.current.binds[n.model]=[]);n.text!==void 0?(u=r.getTextNode(t,n.text),u!==null&&(u.nodeValue=i[n.model]!==void 0?i[n.model]:"",e.current.binds[n.model].push({node:u,attr:null,prop:"nodeValue",style:null}))):e.current.binds[n.model].push({node:t,attr:n.attr===void 0?null:n.attr,prop:n.prop===void 0?null:n.prop,style:n.style===void 0?null:n.style})})}),_object(i).forEach(function(n,t){e.current.binds[n]===void 0&&(e.current.binds[n]=t)}),e.current.binds},update:function(t,i){function u(t,i){function f(n){var t="";return n.split("-").forEach(function(n,i){i>0&&(n=String.prototype.toUpperCase.apply(n.charAt(0))+n.substr(1,n.length-1));t+=n}),t}function u(n,t,i,r){var u=i+r;n instanceof Array&&n.forEach(function(n){n.state_code!==u&&(n.state_code=u,n.call(t,i,r))})}function e(n,t,i,e,o){t.attr!==null&&function(n,t,i,r,f){_node(i).bindingAttrs().bind(r,function(i,r){n[t]!==r&&(n[t]=r,u(f,this,i,r))})}(i,n,t.node,t.attr,e);t.style!==null&&function(n,t,i,r,f){_node(i).bindingProps().bind("style."+r,function(i,r){n[t]!==r&&(n[t]=r,u(f,this,i,r))})}(i,n,t.node,f(t.style),e);r.binds.isPossible(t.node,o)?function(n,t,i,f,e){r.binds.assing(i,o,function(i,r){var o=r();n[t]!==o&&(n[t]=o,u(e,this,f,o))})}(i,n,t.node,t.attr,e):t.prop!==null&&function(n,t,i,r,f){_node(i).bindingProps().bind(r,function(i,r){n[t]!==r&&(n[t]=r,u(f,this,i,r))})}(i,n,t.node,t.prop,e)}function o(n,t,i,r,e){t.attr!==null&&function(n,t,i,r,f){n[t]=i.getAttribute(r);_object(n).binding().bind(t,function(n){var t=!1;i.getAttribute(r)!==n&&(i.setAttribute(r,n),t=!0);i[r]!==void 0&&i[r]!==n&&(i[r]=n,t=!0);t&&u(f,i,r,n)})}(i,n,t.node,t.attr,r);t.style!==null&&function(n,t,i,r,f){n[t]=i.style[r];_object(n).binding().bind(t,function(n){i.style[r]!==n&&(i.style[r]=n,u(f,i.style,r,n))})}(i,n,t.node,f(t.style),r);t.prop!==null&&t.node[e]!==void 0&&function(n,t,i,r,f){n[t]=i[r];_object(n).binding().bind(t,function(n){i[r]!==n&&(i[r]=n,u(f,i,r,n))})}(i,n,t.node,e,r)}t!==null&&_object(t).forEach(function(f,s){var h=[];r.testReg(n.regs.GROUP_PROPERTY,f)||(i[f]=null,s instanceof Array?s.forEach(function(t){var r=t.prop!==null?t.prop:t.attr;t.node[n.storage.NODE_BINDING_DATA]={outcome_call:!1};e(f,t,i,h,r);o(f,t,i,h,r)}):function(n,t,i,r){n[t]=i;_object(n).binding().bind(t,function(n){u(r,null,null,n)})}(i,f,s,h),t[f]={addHandle:function(n){return n.state_code=null,n.id=flex.unique(),this.handles.push(n),n.id},removeHandle:function(n){var t=-1;this.handles.forEach(function(i,r){i.id===n&&(t=r)});t!==-1&&this.handles.splice(t,1)},handles:h},t[f].addHandle.bind(t[f]),t[f].removeHandle.bind(t[f]))})}e.map(t,i);u(e.current.binds,e.current.model);e.model===null?e.model={}:typeof e.model!="object"||e.model instanceof Array||(e.model=[e.model]);e.model instanceof Array?e.model.push(e.current.model):e.model=e.current.model;e.binds===null?e.binds={}:typeof e.binds!="object"||e.binds instanceof Array||(e.binds=[e.binds]);e.binds instanceof Array?e.binds.push(e.current.binds):e.binds=e.current.binds},clear:function(t){var i=_nodes("*["+n.css.attrs.MODEL_DATA+"]",!1,t).target;i.length>0&&Array.prototype.forEach.call(i,function(t){t.removeAttribute(n.css.attrs.MODEL_DATA)})},reset:function(){e.model=null;e.binds=null},iteration:function(){e.current={model:{},binds:{}}},getLast:function(){return{model:e.model instanceof Array?e.model[e.model.length-1]:e.model,binds:e.binds instanceof Array?e.binds[e.binds.length-1]:e.binds}},getDefaults:function(n,t){var i={};return _object(n).forEach(function(n,r){t[n]===void 0&&(i[n]=r)}),i}},s={current:null,dom:null,update:function(n){Object.keys(s.current).length>0&&_object(s.current).forEach(function(t,i){n[t]=i});s.dom===null?s.dom={}:typeof s.dom!="object"||s.dom instanceof Array||(s.dom=[s.dom]);s.dom instanceof Array?s.dom.push(n):s.dom=n},reset:function(){s.dom=null},iteration:function(){s.current={}},collapse:function(){function r(t,u,f){function o(t,r){function u(t,i){Array.prototype.forEach.call(t,function(r,u){var f=t.length>1?i.concat([u]):i;(r[n.other.INDEXES]===void 0||r[n.other.INDEXES].length<f.length)&&(r[n.other.INDEXES]=t.length>1?i.concat([u]):i)})}t instanceof NodeList?u(t,r):t instanceof i.nodeList.NODE_LIST&&t.collections.forEach(function(n){u(n,r)})}function e(n,t,r){var f=[],u=[];if(n.length>0&&typeof n[0]=="object"&&n[0]!==null)return _object(n[0]).forEach(function(n){f.push(n)}),f.forEach(function(f){t[f]=[];n.forEach(function(n,s){n[f]instanceof NodeList||n[f]instanceof i.nodeList.NODE_LIST?(t[f].push(n[f]),o(n[f],r.concat([s]))):n[f]instanceof Array?(t[f].push({}),e(n[f],t[f][t[f].length-1],r.concat([s])),u.indexOf(f)===-1&&u.push(f)):typeof n[f]!="object"||n[f]===null||n[f]instanceof i.nodeList.NODE_LIST||(t[f].push(n[f]),u.indexOf(f)===-1&&u.push(f))})}),u.forEach(function(n){var i=t[n];t[n]={};e(i,t[n],r)}),_object(t).forEach(function(n,r){var u=i.nodeList.create();r instanceof Array&&(r.forEach(function(n){u.add(n)}),t[n]=u)}),t[name]}_object(t).forEach(function(n,t){t instanceof Array?(u[n]={},e(t,u[n],f)):t instanceof NodeList?(o(t,f),u[n]=i.nodeList.create(t)):typeof t=="object"&&(u[n]={},r(t,u[n],f))})}function t(n){var r=null;return n instanceof Array?(r=[],n.forEach(function(n){r.push(t(n))})):n instanceof NodeList?r=i.nodeList.create(n):typeof n!="object"||n===null||n instanceof i.nodeList.NODE_LIST||(r={},_object(n).forEach(function(n,i){r[n]=t(i)})),r}var u={};return s.dom!==null&&r(s.dom,u,[]),{listed:t(s.dom),grouped:u}}},b={get:function(n,t){var i={};return t!==null&&_object(t).forEach(function(t,r){i[t]=r(n)}),Object.keys(i).length>0?i:null},setDefault:function(n){var t=v.storage.get(l.url);return typeof t=="object"&&t!==null&&((typeof n!="object"||n===null)&&(n={}),_object(t).forEach(function(t,i){n[t]===void 0&&(n[t]=i)}),n=Object.keys(n).length>0?n:null),n},tracking:function(n,t,i){var r=[];typeof n=="object"&&n!==null&&(_object(n).forEach(function(u,f){if(typeof f=="function")if(f.tracking!==void 0&&t[u]!==void 0)f.tracking=f.tracking instanceof Array?f.tracking:[f.tracking],f.tracking.forEach(function(f){var s={},o=e.getLast(),h=null;o.binds[f]!==void 0&&typeof o.binds[f].addHandle=="function"&&(_object(i).forEach(function(n,t){s[n]=o.model[n]!==void 0?function(){return o.model[n]}:t}),h=function(n,t,i,r){return function(){var f={},u=null;_object(i).forEach(function(n,t){f[n]=typeof t=="function"?t():t});u=n[t](f);r[t].__included.length>0&&r[t].__included.forEach(function(t){typeof n[t]=="function"&&r[t]!==void 0&&n[t].tracking!==void 0&&r[t].__unblock()});r[t].__update(u);r[t][u]!==void 0&&r[t][u].included.length>0&&r[t][u].included.forEach(function(t){var i=null;typeof n[t]=="function"&&r[t]!==void 0&&n[t].tracking!==void 0&&(i=n[t](f),r[t].__update(i))});r[t].__included.length>0&&r[t].__included.forEach(function(t){typeof n[t]=="function"&&r[t]!==void 0&&n[t].tracking!==void 0&&r[t].__block()})}}(n,u,s,t),o.binds[f].addHandle(h),r.push(h))});else{var o=f(i);t[u]!==void 0&&_object(t[u]).forEach(function(n,i){n!==o&&i.del!==void 0&&(i.del(),t[u][n]=null,delete t[u][n])})}}),r.forEach(function(n){n()}))}},k={apply:function(n,t){var i=f.storage.get(l.url);i!==null&&i.forEach(function(i){c.handle(i,n,t)})}},c={build:function(n,t,i){var o=[],r=null,v=null,f=null,i=b.setDefault(i);return n!==null&&(h.reset(),e.reset(),s.reset(),n=a.build(n),v=w.update(n,i),n=n instanceof Array?n:[n],n.forEach(function(n){var t=null;r=u.pattern(b.get(n,i),i);h.iteration();e.iteration();s.iteration();a.apply(n,r.setters,v);h.update(r.clone);e.update(r.clone,e.getDefaults(n,r.setters));e.clear(r.clone);s.update(r.dom);t=r.applyConditions();o=o.concat(Array.prototype.filter.call(r.clone.childNodes,function(){return!0}));b.tracking(i,t,n)})),f=p.instance({url:l.url,nodes:o,map:h.map,model:e.model,binds:e.binds,dom:s.dom,hooks_map:v,instance:u.__instance,handle:function(n,t){return c.handle(n,f,t)}}),k.apply(f,t),f},handle:function(n,t,i){typeof n=="function"&&n.call(t,{model:e.model,binds:e.binds,map:h.collapse(),dom:s.collapse(),resources:i})},bind:function(n,t,i){return function(){return c.build(n,t,i)}}},y={build:c.build,handle:c.handle,controllers:{apply:k.apply},bind:c.bind,clone:w.clone},{build:y.build,handle:y.handle,controllers:{apply:y.controllers.apply},bind:y.bind,clone:y.clone}},instance:function(t){return flex.oop.objects.validate(t,[{name:"url",type:"string"},{name:"pattern",type:"function"}])!==!1?_object({parent:n.classes.INSTANCE,constr:function(){this.url=flex.system.url.restore(t.url)},privates:{pattern:t.pattern},prototype:i.proto}).createInstanceClass():null},storage:{add:function(t,i){var r=flex.overhead.globaly.get(n.storage.VIRTUAL_STORAGE_GROUP,n.storage.PATTERNS,{});r[t]===void 0&&(r[t]=i)},get:function(t){var i=flex.overhead.globaly.get(n.storage.VIRTUAL_STORAGE_GROUP,n.storage.PATTERNS,{});return i[t]!==void 0?i[t]:null}},init:function(n,t){var r=i.storage.get(n);return r===null&&t!==void 0&&(r=i.instance({url:n,pattern:t}),i.storage.add(n,r)),r},nodeList:{NODE_LIST:function(n){this.collections=n instanceof NodeList?[n]:r.isNode(n)?[[n]]:[]},init:function(){i.nodeList.NODE_LIST.prototype={add:function(n){n instanceof NodeList?this.collections.push(n):n instanceof i.nodeList.NODE_LIST?this.collections=this.collections.concat(n.collections):r.isNode(n)&&this.collections.push([n])},css:function(n){var t=this;typeof n=="object"&&n!==null&&_object(n).forEach(function(n,i){t.collections.forEach(function(t){Array.prototype.forEach.call(t,function(t){t.style[n]!==void 0&&(t.style[n]=i)})})})},addClass:function(n){this.collections.forEach(function(t){Array.prototype.forEach.call(t,function(t){var i=t.className.replace(/\s{2,}/gi,"").split(" ");i.indexOf(n)===-1&&(i.push(n),t.className=i.join(" "))})})},removeClass:function(n){this.collections.forEach(function(t){Array.prototype.forEach.call(t,function(t){var i=t.className.replace(/\s{2,}/gi,"").split(" "),r=i.indexOf(n);r!==-1&&(i.splice(r,1),t.className=i.join(" "))})})},show:function(){this.collections.forEach(function(n){Array.prototype.forEach.call(n,function(n){n.style.display=n.__display!==void 0?n.__display:"block"})})},hide:function(){this.collections.forEach(function(n){Array.prototype.forEach.call(n,function(n){n.__display=n.style.display;n.style.display="none"})})},remove:function(){this.collections.forEach(function(n){Array.prototype.forEach.call(n,function(n){n.parentNode!==void 0&&n.parentNode!==null&&n.parentNode.removeChild(n)})});this.collections=[]},append:function(n){typeof n.appendChild=="function"&&this.collections.forEach(function(t){Array.prototype.forEach.call(t,function(t){n.appendChild(t)})})},insertBefore:function(n,t){typeof n.insertBefore=="function"&&r.isNode(t)&&this.collections.forEach(function(i){Array.prototype.forEach.call(i,function(i){n.insertBefore(i,t)})})},attr:function(n,t){var i=[];return this.collections.forEach(function(r){Array.prototype.forEach.call(r,function(r){t!==void 0?(r.setAttribute(n,t),i.push(!0)):i.push(r.getAttribute(n))})}),i.length===1?i[0]:i},removeAttr:function(n){var t=[];return this.collections.forEach(function(i){Array.prototype.forEach.call(i,function(i){t.push(i.removeAttribute(n))})}),t.length===1?t[0]:t},on:function(t,r){if(typeof r=="function")this.collections.forEach(function(u){Array.prototype.forEach.call(u,function(u){var f=i.nodeList.create(u);f.indexes=u[n.other.INDEXES];flex.events.DOM.add(u,t,r.bind(f))})});else throw Error("Defined [handle] is not a function");},getAsArray:function(){var n=[];this.collections.forEach(function(t){Array.prototype.forEach.call(t,function(t){n.push(t)})})}}},create:function(n){return new i.nodeList.NODE_LIST(n)},addMethod:function(n,t){typeof n=="string"&&typeof t=="function"&&(i.nodeList.NODE_LIST.prototype[n]!==void 0&&flex.logs.log("Method ["+n+"] of NODE_LIST list class was overwritten.",flex.logs.types.NOTIFICATION),i.nodeList.NODE_LIST.prototype[n]=t)}},map:{MAP:function(n){if(n!==void 0&&n.nodeType!==void 0)this.context=n;else throw Error("Context [context] should be a node.");},init:function(){i.map.MAP.prototype={select:function(n){var t=_nodes(n,!1,this.context);return t.target!==null&&t.target.length>0?t.target.length>1?t.target:t.target[0]:null}}},create:function(n){return new i.map.MAP(n)}}},p={proto:function(n){var i=null,t=null,r=null;return r=function(t){return n.instance.clone(n.hooks_map,t)},i=function(t,i,r,u){t!==null?Array.prototype.forEach.call(t,function(t){n.nodes.forEach(function(n){u?t.parentNode.insertBefore(n,t):t.appendChild(n)});u&&t.parentNode.removeChild(t)}):i!==null&&i.parentNode!==void 0&&i.parentNode!==null?Array.prototype.forEach.call(i,function(){n.nodes.forEach(function(n){i.parentNode.insertBefore(n,i)})}):r!==null&&r.parentNode!==void 0&&r.parentNode!==null&&Array.prototype.forEach.call(r,function(){var t=r.nextSibling!==void 0?r.nextSibling:null;t!==null?n.nodes.forEach(function(n){t.parentNode.insertBefore(n,t)}):n.nodes.forEach(function(n){r.parentNode.appendChild(n)})});flex.events.core.fire(flex.registry.events.ui.patterns.GROUP,flex.registry.events.ui.patterns.MOUNTED,n.nodes)},t={nodes:function(){return n.nodes},map:function(){return n.map},model:function(){return n.model},dom:function(){return n.dom},binds:function(){return n.binds},handle:function(){return n.handle},hooks_map:function(){return n.hooks_map},instance:function(){return n.instance},clone:r,mount:i},{nodes:t.nodes,mount:t.mount,map:t.map,dom:t.dom,model:t.model,binds:t.binds,hooks_map:t.hooks_map,instance:t.instance,handle:t.handle,clone:t.clone}},instance:function(t){return flex.oop.objects.validate(t,[{name:"url",type:"string"},{name:"nodes",type:"array"},{name:"handle",type:"function"},{name:"hooks_map",type:"object",value:null},{name:"instance",type:"object",value:null},{name:"map",type:["object","array"],value:null},{name:"model",type:["object","array"],value:null},{name:"dom",type:["object","array"],value:null},{name:"binds",type:["object","array"],value:null}])!==!1?_object({parent:n.classes.RESULT,constr:function(){this.url=flex.system.url.restore(t.url)},privates:{nodes:t.nodes,map:t.map,model:t.model,binds:t.binds,dom:t.dom,handle:t.handle,hooks_map:t.hooks_map,instance:t.instance},prototype:p.proto}).createInstanceClass():null}},o={proto:function(r){var f=this,v=null,c=null,e=null,a=null,h=null,s=null;return c={reset:function(){r.patterns={}},find:function(t){t=t instanceof Array?t:[t];t!==null&&t.forEach(function(t){_object(t).forEach(function(t,i){i instanceof n.classes.CALLER&&r.patterns[i.url]===void 0&&(r.patterns[i.url]=i.url,c.find(i.hooks()))})});r.patterns[f.url]===void 0&&(r.patterns[f.url]=f.url)}},s={getStructure:function(n){function f(n,i){Array.prototype.forEach.call(n,function(n){var u=n.nodeName.toLowerCase(),r={};if(r.url=n.hasAttribute("src")?n.getAttribute("src"):null,r.url!==null)r.sub={},n.children.length>0&&f(n.children,r.sub),i[u]!==void 0?i[u]instanceof Array?i[u].push(r):i[u]=[i[u],r]:i[u]=r;else{flex.logs.log(t.SIGNATURE+"If you use inside template other templates, you cannot use nothing else. And src should be defined fro all included templates.",flex.logs.types.CRITICAL);throw Error(t.caller.PATTERN_WITHOUT_SRC);}})}function e(n,i,r){function u(n,t,i,r){_object(n).forEach(function(n,i){typeof i!="object"&&(t[n]=i)});i[r].sub!==void 0&&e(i[r].sub,n,t)}_object(n).forEach(function(f,e){if(e instanceof Array){flex.logs.log(t.SIGNATURE+"You cannot use templates in templates in same level. You can only include template into templates. Problematic hook: "+f+".",flex.logs.types.CRITICAL);throw Error(t.caller.ONLY_ONE_TEMPLATE_ON_SAME_LEVEL);}else r[f]={url:e.url,hooks:{}},i[f]===void 0||i[f]===null||typeof i[f]!="object"||i[f]instanceof Array?i[f]instanceof Array&&(r[f].hooks=[],i[f].forEach(function(t){var i={};u(t,i,n,f);r[f].hooks.push(i)})):u(i[f],r[f].hooks,n,f)})}var o=document.createElement("div"),i={},s={},h={};if(o.innerHTML=n,f(o.children,i),i[u.values.PATTERN_NODE.toLowerCase()]!==void 0)return h[u.values.PATTERN_NODE.toLowerCase()]=r.hooks,e(i,h,s),s[u.values.PATTERN_NODE.toLowerCase()];throw Error(t.caller.CANNOT_FIND_ROOT_TEMPLATE);},addGetters:function(n){return n.hooks!==void 0&&(n.hooks instanceof Array?n.hooks.forEach(function(t,i){_object(t).forEach(function(t,r){typeof r!="object"||r instanceof Array||r.url===void 0||(n.hooks[i][t]=o.instance({url:r.url,hooks:s.addGetters(r)}))})}):typeof n.hooks=="object"&&_object(n.hooks).forEach(function(t,i){typeof i!="object"||i instanceof Array||i.url===void 0||(n.hooks[t]=o.instance({url:i.url,hooks:s.addGetters(i)}))})),n.hooks},process:function(n){var t={};return new RegExp("<\\s*"+u.values.PATTERN_NODE+"\\s{1,}src\\s*=").test(n)?(t=s.getStructure(n),_object(r).forEach(function(n,i){["hooks","__instance","pattern"].indexOf(n)===-1&&(t[n]=i)}),s.addGetters(t),o.instance(t)):!1}},e={values:{caller:function(n){var u=i.init(n.url),o=n.hooks();if(u===null){flex.logs.log(a()+t.caller.CANNOT_GET_CHILD_PATTERN+"("+n.url+")",flex.logs.types.CRITICAL);flex.system.handle(r.callbacks.fail,f.url);throw t.caller.CANNOT_GET_CHILD_PATTERN;}else return e.apply(o),u.bind(o,n.resources(),n.conditions())}},value:function(t){function i(t){return t instanceof n.classes.CALLER?e.values.caller(t):typeof t=="function"?i(t()):t}return t!==void 0?i(t):""},apply:function(n){var n=n!==void 0?n:r.hooks;return n instanceof Array?n.forEach(function(t,i){n[i]=e.apply(n[i])}):typeof n=="object"&&n!==null&&_object(n).forEach(function(t,i){n[t]=e.value(i)}),n},defaults:function(){function t(n,i){_object(n).forEach(function(n,r){i[n]===void 0?i[n]=r:i[n]!==null&&typeof i[n]=="object"&&t(r,i[n])})}var n=y.storage.get(f.url);return n!==null&&typeof n=="object"&&t(n,r.hooks),!0}},v=function(u){var u=typeof u=="boolean"?u:!1;if(u){if(e.apply(),r.pattern=i.init(f.url),r.pattern!==null&&(r.pattern=r.pattern.build(r.hooks,r.resources,r.conditions),r.pattern instanceof n.classes.RESULT))return r.pattern}else c.reset(),c.find(r.hooks),l.init(function(){var n=[];return _object(r.patterns).forEach(function(t){n.push(t)}),n}(),function(u){var o=null;if(e.defaults(),o=u.length===1?s.process(u[0].html()):null,o!==null)o.render();else if(e.apply(),r.pattern=i.init(f.url),r.pattern!==null)r.pattern=r.pattern.build(r.hooks,r.resources,r.conditions),r.pattern instanceof n.classes.RESULT&&(r.pattern.mount(r.node,r.before,r.after,r.replace),r.callbacks.success!==null&&r.pattern.handle()(r.callbacks.success,r.resources));else{flex.logs.log(a()+t.caller.CANNOT_GET_PATTERN,flex.logs.types.CRITICAL);flex.system.handle(r.callbacks.fail,f.url);throw t.caller.CANNOT_GET_PATTERN;}},function(){flex.logs.log(a()+t.caller.CANNOT_INIT_PATTERN,flex.logs.types.CRITICAL);flex.system.handle(r.callbacks.fail,f.url);throw t.caller.CANNOT_INIT_PATTERN;})},a=function(){return t.SIGNATURE+":: caller ("+f.url+")"},h={render:v,hooks:function(){return r.hooks},resources:function(){return r.resources},conditions:function(){return r.conditions}},{render:h.render,hooks:h.hooks,conditions:h.conditions,resources:h.resources}},instance:function(t){return flex.oop.objects.validate(t,[{name:"url",type:"string"},{name:"node",type:["node","string","array","NodeList"],value:null},{name:"before",type:["node","string","array","NodeList"],value:null},{name:"after",type:["node","string","array","NodeList"],value:null},{name:"id",type:"string",value:flex.unique()},{name:"replace",type:"boolean",value:!1},{name:"hooks",type:["object","array"],value:null},{name:"data",type:"array",value:null},{name:"conditions",type:"object",value:null},{name:"callbacks",type:"object",value:{}},{name:"resources",type:"object",value:{}},{name:"remove_missing_hooks",type:"boolean",value:!0}])!==!1?(flex.oop.objects.validate(t.callbacks,[{name:"before",type:"function",value:null},{name:"success",type:"function",value:null},{name:"fail",type:"function",value:null}]),_object({parent:n.classes.CALLER,constr:function(){this.url=flex.system.url.restore(t.url)},privates:{id:t.id,node:t.node!==null?typeof t.node=="string"?_nodes(t.node).target:t.node instanceof Array?t.node:t.node instanceof NodeList?t.node:[t.node]:null,before:t.before!==null?typeof t.before=="string"?_nodes(t.before).target:t.before instanceof Array?t.before:t.before instanceof NodeList?t.before:[t.before]:null,after:t.after!==null?typeof t.after=="string"?_nodes(t.after).target:t.after instanceof Array?t.after:t.after instanceof NodeList?t.after:[t.after]:null,replace:t.replace,hooks:t.hooks,data:t.data,conditions:t.conditions,callbacks:t.callbacks,remove_missing_hooks:t.remove_missing_hooks,resources:t.resources,pattern:null},prototype:o.proto}).createInstanceClass()):null}},c={init:function(n){function i(n){var t=n.parentNode.nodeName.toLowerCase();return t!==u.values.PATTERN_NODE?t!=="body"?i(n.parentNode):!0:!1}var t=_nodes(u.values.PATTERN_NODE).target,n=typeof n=="boolean"?n:!1;t!==null&&t instanceof NodeList&&t.length>0&&Array.prototype.forEach.call(t,function(t){i(t)&&((t.hasAttribute("success")||t.hasAttribute("error"))&&n||c.caller(t))})},caller:function(n,t){function u(n,t){var i=-1;try{n.forEach(function(n,r){if(n[t]===void 0){i=r;throw"found";}})}catch(r){}return i}function r(n,t){var i=n.getAttribute(t),r=null;return typeof i=="string"&&i!==""?(r=i.split("."),i=window,r.forEach(function(n){i=i!==null&&i[n]!==void 0?i[n]:null}),i):null}var i=null,t=t!==void 0?t:!1;if(i={url:n.hasAttribute("src")?n.getAttribute("src"):null,hooks:{}},Array.prototype.forEach.call(n.children,function(n){var t=0,r=n.nodeName.toLowerCase();i.hooks[r]===void 0||i.hooks instanceof Array||(i.hooks=[i.hooks]);i.hooks instanceof Array?(t=u(i.hooks,r),t===-1&&(i.hooks.push({}),t=i.hooks.length-1),i.hooks[t][r]=n.children.length===0?n.innerHTML:c.caller(n,!0)):i.hooks[r]=n.children.length===0?n.innerHTML:c.caller(n,!0)}),typeof i.hooks=="object"&&Object.keys(i.hooks).length===0&&delete i.hooks,t||i.url===null){if(i.url!==null)return i=o.instance(i)}else return i.node=n,i.replace=!0,i.callbacks={success:r(n,"success"),error:r(n,"error")},i=o.instance(i).render();return i.hooks},attach:function(){document.readyState!=="complete"?flex.events.DOM.add(window,"load",function(){c.init(!0)}):c.init(!0)}},f={references:{assign:function(t,i){var r=flex.overhead.globaly.get(n.storage.VIRTUAL_STORAGE_GROUP,n.storage.CONTROLLERS_LINKS,{});r[t]===void 0&&(r[t]=i)},getPatternURL:function(t){var i=flex.overhead.globaly.get(n.storage.VIRTUAL_STORAGE_GROUP,n.storage.CONTROLLERS_LINKS,{});return i[t]!==void 0?i[t]:null}},storage:{add:function(t,i){var r=flex.overhead.globaly.get(n.storage.VIRTUAL_STORAGE_GROUP,n.storage.CONTROLLERS_STORAGE,{});r[t]===void 0&&(r[t]=[]);r[t].push(i)},get:function(t){var i=flex.overhead.globaly.get(n.storage.VIRTUAL_STORAGE_GROUP,n.storage.CONTROLLERS_STORAGE,{});return i[t]!==void 0?i[t]:null}},current:{data:null,set:function(n){f.current.data=n},get:function(){return f.current.data},reset:function(){f.current.data=null}},attach:function(n){var t=null,i=null;typeof n=="function"&&(t=f.current.get()!==null?f.current.get():flex.resources.attach.js.getCurrentSRC(),t!==null&&(i=f.references.getPatternURL(t),f.storage.add(i,n)))}},e={virtual:{add:function(t,i){var r=flex.overhead.globaly.get(n.storage.VIRTUAL_STORAGE_GROUP,n.storage.VIRTUAL_STORAGE_ID,{});if(r!==null&&r[t]===void 0)return r[t]=i,!0},get:function(t){var i=flex.overhead.globaly.get(n.storage.VIRTUAL_STORAGE_GROUP,n.storage.VIRTUAL_STORAGE_ID,{});return i!==null?i[t]!==void 0?i[t]:null:null}},local:{add:function(t,i){return n.storage.USE_LOCALSTORAGE===!0?flex.localStorage.addJSON(t,{html:i,hash:flex.hashes.get(t)}):!1},get:function(t){var i=null;return n.storage.USE_LOCALSTORAGE===!0&&(flex.hashes.update(t),i=flex.localStorage.getJSON(t),i!==null&&i.hash===flex.hashes.get(t))?i.html:null}},add:function(n,t){e.local.add(n,t);e.virtual.add(n,t)},get:function(n){var t=e.virtual.get(n);return t===null&&(t=e.local.get(n)),t}},h={measure:function(){var i={};return function(r,u){if(n.measuring.MEASURE){var r=r===void 0?flex.unique():r;return i[r]===void 0?i[r]=performance.now():(flex.logs.log(t.SIGNATURE+"Operation ["+u+"] was taken "+(performance.now()-i[r]).toFixed(4)+"ms.",flex.logs.types.NOTIFICATION),delete i[r]),r}}}()},v={storage:{add:function(t,i){var r=flex.overhead.globaly.get(n.storage.VIRTUAL_STORAGE_GROUP,n.storage.CONDITIONS_STORAGE,{});r[t]=i},get:function(t){var i=flex.overhead.globaly.get(n.storage.VIRTUAL_STORAGE_GROUP,n.storage.CONDITIONS_STORAGE,{});return i[t]!==void 0?i[t]:null}},attach:function(n){var t=null,i=null;typeof n=="object"&&n!==null&&(t=f.current.get()!==null?f.current.get():flex.resources.attach.js.getCurrentSRC(),t!==null&&(i=f.references.getPatternURL(t),v.storage.add(i,n)))}},y={storage:{add:function(t,i){var r=flex.overhead.globaly.get(n.storage.VIRTUAL_STORAGE_GROUP,n.storage.HOOKS_STORAGE,{});r[t]=i},get:function(t){var i=flex.overhead.globaly.get(n.storage.VIRTUAL_STORAGE_GROUP,n.storage.HOOKS_STORAGE,{});return i[t]!==void 0?i[t]:null}},attach:function(n){var t=null,i=null;typeof n=="object"&&n!==null&&(t=f.current.get()!==null?f.current.get():flex.resources.attach.js.getCurrentSRC(),t!==null&&(i=f.references.getPatternURL(t),y.storage.add(i,n)))}},r={testReg:function(n,t){return n.lastIndex=0,n.test(t)},binds:{data:{value:[{nodes:["input","textarea"],event:"change",getter:function(){return this.value},setter:function(n){this.value=n}}]},assing:function(n,t,i){var f=n.nodeName.toLowerCase(),u=null;return r.binds.data[t]!==void 0&&(r.binds.data[t].forEach(function(n){n.nodes.indexOf(f)!==-1&&(u=n)}),u!==null&&function(n,t,i,r,u){_node(t).events().add(n,function(n){u.call(t,n,i,r)})}(u.event,n,u.getter.bind(n),u.setter.bind(n),i)),!1},isPossible:function(n,t){var i=n.nodeName.toLowerCase();if(r.binds.data[t]!==void 0)try{r.binds.data[t].forEach(function(n){if(n.nodes.indexOf(i)!==-1)throw"found";})}catch(u){return u==="found"?!0:!1}return!1}},isNode:function(n){return n!==void 0&&n.nodeName!==void 0&&n.parentNode!==void 0&&n.nodeType!==void 0?!0:!1},tableFix:function(t){var r=t.match(n.regs.TABLE),i=[];return r instanceof Array&&(r.forEach(function(t){var r=null;t=t.replace(n.regs.TABLE_TAG,"").replace(n.regs.ANY_TAG,"");r=t.match(n.regs.HOOK);r instanceof Array&&(i=i.concat(r))}),i.forEach(function(i){var r=i.replace(n.regs.HOOK_BORDERS,"");t=t.replace(new RegExp(n.regs.HOOK_OPEN+r+n.regs.HOOK_CLOSE,"gi"),"<!--"+i+"-->")})),t},getTextNode:function(n,t){var i=null;if(n.childNodes!==void 0)try{Array.prototype.forEach.call(n.childNodes,function(n){if(n.nodeType===3&&n.nodeValue===t){i=n;throw"found";}})}catch(r){}return i}},w={init:function(){flex.callers.define.node("ui.patterns.append",function(n){return typeof n=="object"&&this.target&&(n.node=this.target),o.instance(n)});flex.callers.define.nodes("ui.patterns.append",function(){var n=[];return Array.prototype.forEach.call(this.target,function(){typeof parameters=="object"&&this.target&&(parameters.node=this.target);n.push(o.instance(parameters))}),n})}},i.nodeList.init(),i.map.init(),flex.libraries!==void 0&&flex.libraries.events!==void 0&&flex.libraries.binds!==void 0&&(flex.libraries.events.create(),flex.libraries.binds.create()),s={preload:l.init,get:o.instance,controller:{attach:f.attach},conditions:{attach:v.attach},hooks:{attach:y.attach},classes:{NODE_LIST:{addMethod:i.nodeList.addMethod}},setup:u.setup,debug:u.debug,layout:c.init},w.init(),window._controller=s.controller.attach,window._conditions=s.conditions.attach,window._hooks=s.hooks.attach,c.attach(),{preload:s.preload,get:s.get,classes:{NODE_LIST:{addMethod:s.classes.NODE_LIST.addMethod}},setup:s.setup,debug:s.debug,layout:s.layout}};i.prototype=function(){var t=null,n=null,i=null,r=null;return n=function(){return t===null&&(t=function(){},t.prototype=function(){function e(r){function e(t){return t.element=t.element!==void 0?t.element:null,t.name=typeof t.name=="string"?t.name:null,t.handle=typeof t.handle=="function"?t.handle:null,t.id=typeof t.id=="string"?t.id:flex.unique(),t.once=typeof t.once=="boolean"?t.once:!1,t.touch=typeof t.touch=="boolean"?t.touch:!0,n.has(t.name)===!1&&(t.touch=!1),t}var r=e(r),u=null;return r.element!==null&&r.handle!==null&&r.name!==null&&(u=t.get(r.element,!1),u!==null&&(u=i.buildCommonHandle(r.element,r.name,u,r.touch),u instanceof Array))?(u.push(new f(r.id,r.handle,r.once,r.touch)),r.id):null}function s(n,r,u,f){var r=r!==void 0?r:i.fixEvent(),e=t.get(this,!0),o=null,c=flex.unique(),l=null,a=this,s=!1,h=r.type!==f?f:r.type;if(r&&n&&u&&e!==null&&(r=i.unificationEvent(r),e[h]&&(e=e[h],e.element_id===u))){o=e.handles;try{Array.prototype.forEach.call(o,function(n){if(n.interaction!==c){if(n.interaction=c,l=n.launch(a,r),s=s===!0?!0:n.isRemoving()===!1?!1:!0,l===!1){r.flex.stop();flex.logs.log("Break event in DOM.fire; \n\r >event: "+r.type+"\n\r >handle_id"+n.id+"\n\r >element_id"+u,flex.logs.types.WARNING);throw"prevent";}}else flex.logs.log("Unexpected behavior of handle event in DOM.fire. Attempt to call handle twice. \n\r >event: "+r.type+"\n\r >handle_id"+n.id+"\n\r >element_id"+u,flex.logs.types.LOGICAL)})}catch(v){v!=="prevent"&&flex.logs.log("Unexpected error in DOM.fire; \n\r >event: "+r.type+"\n\r >element_id"+u,flex.logs.types.CRITICAL)}finally{return s!==!1&&(e.handles=o.filter(function(n){return n.isWorking()===!1&&n.isRemoving()!==!1?!1:!0}),e.handles.length===0&&(i.destroyCommonHandle(n,h),t.clear(n))),!0}}return!1}function o(n){function e(n){return n[u.HANDLE_EVENT_ID_PROPERTY]!==void 0?n[u.HANDLE_EVENT_ID_PROPERTY]:null}function o(n){return n.element=n.element!==void 0?n.element:null,n.name=typeof n.name=="string"?n.name:null,n.handle=typeof n.handle=="function"?n.handle:null,n.id=typeof n.id=="string"?n.id:e(n.handle),n}var n=o(n),r=null,f=null;if(n.element!==null&&n.name!==null&&(n.id===null&&n.handle!==null&&n.handle[u.HANDLE_EVENT_ID_PROPERTY]!==void 0&&(n.id=n.handle[u.HANDLE_EVENT_ID_PROPERTY]),n.id!==null&&(r=t.get(n.element,!0),typeof r[n.name]=="object"))){r=r[n.name];f=r.handles;try{Array.prototype.forEach.call(f,function(t){if(t.id===n.id){t.toRemove();throw"handle found";}})}catch(s){s!=="handle found"&&flex.logs.log("Unexpected error in DOM.remove; \n\r >event: "+n.name+"\n\r >event_id"+n.id,flex.logs.types.CRITICAL)}finally{f=f.filter(function(n){return n.isWorking()===!1&&n.isRemoving()!==!1?!1:!0});f.length===0&&(i.destroyCommonHandle(n.element,n.name),t.clear(n.element))}}}function h(n,r,u){var f=null,u=typeof u=="boolean"?u:!1;if(n&&r){if(f=t.get(n,!0),f!==null&&typeof f[r]=="object"){if(f=f[r],u!==!1)try{Array.prototype.forEach.call(f.handles,function(t){if(flex.logs.log("Event fired in DOM.clear.fire; \n\r>event: "+r+"\n\r>handle_id: "+t.id,flex.logs.types.NOTIFICATION),t.launch(n,null)===!1)throw"prevent";})}catch(e){e==="prevent"?flex.logs.log("Break event in DOM.clear.fire; \n\r >event: "+r,flex.logs.types.WARNING):flex.logs.log("Fatal error event in DOM.clear.fire; \n\r >event: "+r,flex.logs.types.WARNING)}return f.handles=[],i.destroyCommonHandle(n,r),t.clear(n),!0}return!1}return null}function c(n,t){function f(n,t){for(var i in t)n[i]=t[i];return n}var r=null,u=null,e=null,o={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/},s={type:t,canBubble:!0,cancelable:!0,view:n.ownerDocument.defaultView,detail:1,screenX:0,screenY:0,clientX:0,clientY:0,pointerX:0,pointerY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null},i=f(s,arguments[2]||{});for(var t in o)if(o[t].test(t)){u=t;break}if(!u)throw new SyntaxError("Only HTMLEvents and MouseEvents interfaces are supported");return document.createEvent?(r=document.createEvent(u),u=="HTMLEvents"?r.initEvent(t,i.bubbles,i.cancelable):r.initMouseEvent(i.type,i.canBubble,i.cancelable,i.view,i.detail,i.screenX,i.screenY,i.clientX,i.clientY,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.button,i.relatedTarget),n.dispatchEvent(r)):(i.clientX=i.pointerX,i.clientY=i.pointerY,e=document.createEventObject(),r=f(e,i),n.fireEvent("on"+t,r)),n}var i=null,n=null,t=null,u={STORAGE_NAME:"FlexEventsStorage",HANDLE_EVENT_ID_PROPERTY:"FlexEventIDProrerty"},f=null,r=null;return f=function(n,t,i,r){this.id=n;this.handle=t;this.once=i;this.touch=r;this.remove=!1;this.interaction=null;this.working=!1;this.device=null},f.prototype={id:null,once:null,touch:null,remove:null,handle:null,interaction:null,working:null,device:null,launch:function(n,t){if(this.remove===!1&&this.isDouble(t)===!1)try{return this.working=!0,this.remove=this.once,this.handle.call(n,t)}catch(i){return this.error(t,i),null}finally{this.working=!1;this.once===!0&&this.remove===!1&&flex.logs.log("Unexpected behavior DOM.fire. Flag [once] is true, but [remove] is false; \n\r >event id"+this.id,flex.logs.types.WARNING)}return null},isWorking:function(){return this.working},isRemoving:function(){return this.remove},toRemove:function(){this.remove=!0},error:function(n,t){flex.logs.log("event: "+n.type+"; ID: "+this.id+"; generated error: \r\n"+flex.logs.parseError(t),flex.logs.types.WARNING)},isDouble:function(n){var t="";return t=n.flex.singleTouch?"touch":"mouse",this.device=this.device===null?t:this.device,this.device===t?!1:!0}},t={get:function(n,t){var t=typeof t=="boolean"?t:!0,i=null;return n?(i=flex.overhead.objecty.get(n,u.STORAGE_NAME),i===null&&t===!1&&(i=flex.overhead.objecty.set(n,u.STORAGE_NAME,{})),i):null},clear:function(n){var i=t.get(n,!0);return i!==null?Object.keys(i).length===0?(flex.overhead.objecty.del(n,u.STORAGE_NAME),!0):!1:!1}},i={buildCommonHandle:function(t,i,r,u){var f=flex.unique();if(typeof r[i]!="object"){if(r[i]={globalHandle:function(n){return s.call(t,t,n,f,i)},element_id:f,handles:[]},flex.events.DOM.add(t,i,r[i].globalHandle)===!1)return null;u!==!1&&n.has(i)!==!1&&flex.events.DOM.add(t,n.getType(i),r[i].globalHandle)}return r[i].handles},destroyCommonHandle:function(i,r){var u=null;return i&&r&&(u=t.get(i,!0),typeof u[r]=="object")?(flex.events.DOM.remove(i,r,u[r].globalHandle),n.has(r)!==!1&&flex.events.DOM.remove(i,n.getType(r),u[r].globalHandle),u[r]=null,delete u[r],!0):null},fixEvent:function(){return!event&&window.event?window.event:null},unificationEvent:function(n){function i(n){return n.flex={},n}function t(n,t){if(t.clientX!==void 0)if(t.pageX===void 0&&(n.flex.pageX=null,n.flex.pageY=null),t.pageX===null&&t.clientX!==null){var i=document.documentElement,r=document.body;n.flex.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i.clientLeft||0);n.flex.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i.clientTop||0)}else n.flex.pageX=t.pageX,n.flex.pageY=t.pageY;else n.flex.pageX=null,n.flex.pageY=null;return n.flex.clientX=t.clientX!==void 0?t.clientX:null,n.flex.clientY=t.clientY!==void 0?t.clientY:null,n.flex.offsetX=t.offsetX!==void 0?t.offsetX:t.layerX!==void 0?t.layerX:null,n.flex.offsetY=t.offsetY!==void 0?t.offsetY:t.layerY!==void 0?t.layerY:null,n}function r(n){return n.preventDefault===void 0&&(n.preventDefault=function(){try{this.returnValue=!1}catch(n){}}),n.stopPropagation===void 0&&(n.stopPropagation=function(){try{this.cancelBubble=!0}catch(n){}}),n.flex.stop=function(){return n.preventDefault(),n.stopPropagation(),!1},n}function u(n){return n.target===void 0&&(n.target=n.srcElement!==void 0?n.srcElement:null),n.target!==null&&n.relatedTarget===void 0&&(n.fromElement!==void 0?n.relatedTarget=n.fromElement===n.target?n.toElement:n.fromElement:(n.relatedTarget=null,n.fromElement=null)),n.flex.target=n.target,n}function f(n){return t(n,n)}function e(n){return n.which===void 0&&n.button!==void 0&&(n.flex.which=n.button&1?1:n.button&2?3:n.button&4?2:0,n.flex.button=n.button),n}function o(n){return typeof n.touches=="object"&&(n.touches.length===1&&(n=t(n,n.touches[0]),n.flex.target=n.touches[0].target,n.flex.singleTouch=!0),n.flex.touches=n.touches),n}return n.flex===void 0&&(n=i(n),n=r(n),n=u(n),n=f(n),n=e(n),n=o(n)),n}},n={events:{click:{touch:"touchstart"},dblclick:{touch:"touchstart"},mousedown:{touch:"touchstart"},mouseenter:{touch:"touchenter"},mouseleave:{touch:"touchleave"},mousemove:{touch:"touchmove"},mouseover:{touch:""},mouseout:{touch:""},mouseup:{touch:"touchend"}},has:function(t){for(var i in n.events)if(i===t||"on"+i===t)return!0;return!1},getType:function(t){for(var i in n.events)if(i===t||"on"+i===t)return n.events[i].touch;return null},getOriginalType:function(t){t=t.toLowerCase();for(var i in n.events)if(n.events[i].touch===t)return i;return null}},r={_add:e,_remove:o,add:function(n,t,i,r,u){return e({element:n,name:t,handle:i,id:r,touch:u})},remove:function(n,t,i,r){return o({element:n,name:t,handle:i,id:r})},call:c,clear:h,unify:i.unificationEvent},{add:r.add,remove:r.remove,clear:r.clear,call:r.call,unify:r.unify,extendedAdd:r._add,extendedRemove:r._remove}}(),t=new t),t},i={init:function(){flex.callers.define.node("events.add",function(t,i,r,u){return n().add(this.target,t,i,r,u)});flex.callers.define.node("events.remove",function(t,i,r){return n().remove(this.target,t,i,r)});flex.callers.define.node("events.call",function(t){return n().call(this.target,t)});flex.callers.define.nodes("events.add",function(t,i,r,u){Array.prototype.forEach.call(this.target,function(f){n().add(f,t,i,r,u)})});flex.callers.define.nodes("events.remove",function(t,i,r){Array.prototype.forEach.call(this.target,function(u){n().remove(u,t,i,r)})});flex.callers.define.nodes("events.call",function(t){Array.prototype.forEach.call(this.target,function(i){n().call(i,t)})})}},i.init(),r={DOMEvents:n},{DOMEvents:r.DOMEvents}};r.prototype=function(){var f=null,r=null,u=null,i=null,s=null,e=null,n=null,t=null,o=null;return n={objects:{STORAGE_PROPERTY:"flex.object.bind.storage",HANDLE_ID_PROPERTY:"flex.object.bind.handle.id"},attrs:{STORAGE_PROPERTY:"flex.attrs.bind.storage",HANDLE_ID_PROPERTY:"flex.attrs.bind.handle.id"},props:{STORAGE_PROPERTY:"flex.props.bind.storage",HANDLE_ID_PROPERTY:"flex.props.bind.handle.id"}},t={objects:{INCORRECT_ARGUMENTS:"defined incorrect arguments or not defined at all",PROPERTY_IS_CONST:"cannot kill bind with property, because property now is constant"},support:{DEFINE_PROPERTY:"flex.binds: Current browser does not support Object.defineProperty",MUTATION_SCANNING:"flex.attrs: Current browser does not support any avaliable way to scanning mutation of attributes"}},f={storage:{create:function(t){var i=function(n){this.parent=n;this.binds={}};return i.prototype={make:function(n,t){var i=this;return this.binds[n]?!1:(this.binds[n]={current:t,previous:t,setter:function(t){i.binds[n].previous=i.binds[n].current;i.binds[n].current=t;for(var r in i.binds[n].handles)i.binds[n].handles[r].call(i.parent,i.binds[n].current,i.binds[n].previous,r)},getter:function(){return i.binds[n].current},handles:{}},!0)},add:function(t,i){var r=flex.unique();return i[n.objects.HANDLE_ID_PROPERTY]=r,this.binds[t].handles[r]=i,r},remove:function(n,t){return this.binds[n]&&this.binds[n].handles[t]&&(delete this.binds[n].handles[t],Object.keys(this.binds[n].handles).length===0)?delete this.binds[n]:null},kill:function(n){return this.binds[n]?delete this.binds[n]:null},isPropertyReady:function(n){return this.binds[n]!==void 0?!0:!1},destroy:function(){return Object.keys(this.binds).length===0?delete this.parent[n.objects.STORAGE_PROPERTY]:!1},setter:function(n){return this.binds[n].setter},getter:function(n){return this.binds[n].getter}},new i(t)}},bind:function(i,r,u){var e=n.objects.STORAGE_PROPERTY,o=null;if(Object.defineProperty){if(typeof i=="object"&&typeof r=="string"&&typeof u=="function"){if(o=i[r],i[e]||(i[e]=f.storage.create(i)),e=i[e],!e.isPropertyReady(r))if(delete i[r])e.make(r,o),Object.defineProperty(i,r,{get:e.getter(r),set:e.setter(r),configurable:!0});else return e.destroy(),!1;return e.add(r,u)}throw"object.bind::"+t.objects.INCORRECT_ARGUMENTS;}},unbind:function(i,r,u){var f=n.objects.STORAGE_PROPERTY,e=null;if(typeof i=="object"&&typeof r=="string"&&typeof u=="string"){if(i[f]&&(f=i[f],f.isPropertyReady(r)&&(e=i[r],f.remove(r,u),!f.isPropertyReady(r))))try{return delete i[r],i[r]=e,!0}catch(o){throw"object.unbind::"+t.objects.PROPERTY_IS_CONST;}return null}throw"object.unbind::"+t.objects.INCORRECT_ARGUMENTS;},kill:function(i,r){var u=n.objects.STORAGE_PROPERTY,f=null;if(typeof i=="object"&&typeof r=="string"){if(i[u]){f=i[r];u=i[u];try{return u.kill(r)?(delete i[r],i[r]=f,!0):!1}catch(e){throw"object.kill::"+t.objects.PROPERTY_IS_CONST;}}return null}throw"object.kill::"+t.objects.INCORRECT_ARGUMENTS;}},r={storage:{create:function(t){var r=function(n){this.node=n;this.binds={};this._destroy=null};return r.prototype={init:function(){this._destroy=i.attach(t,this.handle,this,{attributes:!0,childList:!1,subtree:!1,characterData:!0,attributeOldValue:!1,characterDataOldValue:!1})},handle:function(n,t){var i=this,r=null;this.binds[n]&&(r=this.node.getAttribute(n),r!==this.binds[n].current&&(this.binds[n].previous=this.binds[n].current,this.binds[n].current=r,_object(this.binds[n].handles).forEach(function(r,u){u.call(i.node,n,i.binds[n].current,i.binds[n].previous,t,r)})))},make:function(n){this.binds[n]||(this.binds[n]={handles:{},previous:null,current:this.node.getAttribute(n)})},add:function(t,i){var r=flex.unique();return i[n.attrs.HANDLE_ID_PROPERTY]=r,this.binds[t].handles[r]=i,r},remove:function(n,t){var i=null;return this.binds[n]&&this.binds[n].handles[t]&&(delete this.binds[n].handles[t],Object.keys(this.binds[n].handles).length===0)?(i=delete this.binds[n],this.destroy(),i):i},kill:function(n){var t=null;return this.binds[n]?(t=delete this.binds[n],this.destroy(),t):t},isAttrReady:function(n){return this.binds[n]!==void 0?!0:!1},destroy:function(){return Object.keys(this.binds).length===0?(this._destroy(),delete this.node[n.attrs.STORAGE_PROPERTY]):!1}},new r(t)}},bind:function(u,f,e){var o=n.attrs.STORAGE_PROPERTY;if(i.attach!==null){if(u!==void 0&&typeof f=="string"&&typeof e=="function"&&u.nodeName)return u[o]||(u[o]=r.storage.create(u),u[o].init()),o=u[o],o.isAttrReady(f)||o.make(f),o.add(f,e);throw"attrs.bind::"+t.objects.INCORRECT_ARGUMENTS;}},unbind:function(i,r,u){var f=n.attrs.STORAGE_PROPERTY;if(typeof i=="object"&&typeof r=="string"&&typeof u=="string")return i[f]&&(f=i[f],f.isAttrReady(r))?f.remove(r,u):null;throw"attrs.unbind::"+t.objects.INCORRECT_ARGUMENTS;},kill:function(i,r){var u=n.attrs.STORAGE_PROPERTY;if(typeof i=="object"&&typeof r=="string")return i[u]&&(u=i[u],u.isAttrReady(r))?u.kill(r):null;throw"attrs.unbind::"+t.objects.INCORRECT_ARGUMENTS;}},u={storage:{create:function(t){var r=function(n){this.node=n;this.binds={};this._destroy=null};return r.prototype={init:function(){this._destroy=i.attach(t,this.handle,this,{attributes:!0,childList:!0,subtree:!0,characterData:!0,attributeOldValue:!1,characterDataOldValue:!1})},prop:function(n){var i=null,t=this.node;return n.split(".").forEach(function(n,r,u){t[n]!==void 0&&r<u.length-1?t=t[n]:t[n]!==void 0&&r===u.length-1&&(i={parent:t,name:n})}),i},handle:function(n,t){var i=this;_object(this.binds).forEach(function(n){var r=i.binds[n].parent[n];r!==i.binds[n].current&&(i.binds[n].previous=i.binds[n].current,i.binds[n].current=r,_object(i.binds[n].handles).forEach(function(r,u){u.call(i.binds[n].parent,n,i.binds[n].current,i.binds[n].previous,t,r)}))})},make:function(n){var n=this.prop(n);this.binds[n.name]||(this.binds[n.name]={handles:{},previous:null,current:n.parent[n.name],parent:n.parent})},add:function(t,i){var r=flex.unique(),t=this.prop(t);return i[n.props.HANDLE_ID_PROPERTY]=r,this.binds[t.name].handles[r]=i,r},remove:function(n,t){var i=null,n=this.prop(n);return this.binds[n.name]&&this.binds[n.name].handles[t]&&(delete this.binds[n.name].handles[t],Object.keys(this.binds[n.name].handles).length===0)?(i=delete this.binds[n.name],this.destroy(),i):i},kill:function(n){var t=null,n=this.prop(n);return this.binds[n.name]?(t=delete this.binds[n.name],this.destroy(),t):t},isPropReady:function(n){var n=this.prop(n);return this.binds[n.name]!==void 0?!0:!1},destroy:function(){return Object.keys(this.binds).length===0?(this._destroy(),delete this.node[n.props.STORAGE_PROPERTY]):!1}},new r(t)}},bind:function(r,f,e){function s(n,t){var i=!1;return t.split(".").forEach(function(t,r,u){n[t]!==void 0&&r<u.length-1?n=n[t]:n[t]!==void 0&&r===u.length-1&&(i=!0)}),i}var o=n.props.STORAGE_PROPERTY;if(i.attach!==null){if(r!==void 0&&typeof f=="string"&&typeof e=="function"&&r.nodeName!==void 0&&s(r,f))return r[o]||(r[o]=u.storage.create(r),r[o].init()),o=r[o],o.isPropReady(f)||o.make(f),o.add(f,e);throw"props.bind::"+t.objects.INCORRECT_ARGUMENTS;}},unbind:function(i,r,u){var f=n.props.STORAGE_PROPERTY;if(typeof i=="object"&&typeof r=="string"&&typeof u=="string")return i[f]&&(f=i[f],f.isPropReady(r))?f.remove(r,u):null;throw"props.unbind::"+t.objects.INCORRECT_ARGUMENTS;},kill:function(i,r){var u=n.props.STORAGE_PROPERTY;if(typeof i=="object"&&typeof r=="string")return i[u]&&(u=i[u],u.isPropReady(r))?u.kill(r):null;throw"props.unbind::"+t.objects.INCORRECT_ARGUMENTS;}},i={init:function(){i.attach=i.attach()},mutationObserver:function(n,t,i,r){var f=window.MutationObserver||window.WebKitMutationObserver,u=null;return u=new f(function(n){n.forEach(function(n){t.call(i,n.attributeName,n)})}),u.observe(n,r),function(){u.disconnect()}},DOMAttrModified:function(n,t,i){return flex.events.DOM.add(n,"DOMAttrModified",function(n){t.call(i,event.attrName,n)}),function(){}},onPropertyChange:function(n,t,i){return flex.events.DOM.add(n,"propertychange",function(n){t.call(i,event.attributeName,n)}),function(){}},attach:function(){function n(){var n=document.createElement("DIV"),t=!1;return flex.events.DOM.add(n,"DOMAttrModified",function(){t=!0}),n.setAttribute("id","test"),t}return window.MutationObserver||window.WebKitMutationObserver?i.mutationObserver:n()?i.DOMAttrModified:"onpropertychange"in document.body?i.onPropertyChange:null}},e={init:function(){flex.callers.define.object("binding.bind",function(n,t){return f.bind(this.target,n,t)});flex.callers.define.object("binding.unbind",function(n,t){return f.unbind(this.target,n,t)});flex.callers.define.object("binding.kill",function(n){return f.kill(this.target,n)});flex.callers.define.node("bindingAttrs.bind",function(n,t){return r.bind(this.target,n,t)});flex.callers.define.node("bindingAttrs.unbind",function(n,t){return r.unbind(this.target,n,t)});flex.callers.define.node("bindingAttrs.kill",function(n){return r.kill(this.target,n)});flex.callers.define.nodes("bindingAttrs.bind",function(n,t){var i=[];return SelectorClass(),Array.prototype.forEach.call(this.target,function(u){i.push(r.bind(u,n,t))}),i});flex.callers.define.nodes("bindingAttrs.unbind",function(n,t){var i=[];return SelectorClass(),Array.prototype.forEach.call(this.target,function(u){i.push(r.unbind(u,n,t))}),i});flex.callers.define.nodes("bindingAttrs.kill",function(n){var t=[];return SelectorClass(),Array.prototype.forEach.call(this.target,function(i){t.push(r.kill(i,n))}),t});flex.callers.define.node("bindingProps.bind",function(n,t){return u.bind(this.target,n,t)});flex.callers.define.node("bindingProps.unbind",function(n,t){return u.unbind(this.target,n,t)});flex.callers.define.node("bindingProps.kill",function(n){return u.kill(this.target,n)});flex.callers.define.nodes("bindingProps.bind",function(n,t){var i=[];return SelectorClass(),Array.prototype.forEach.call(this.target,function(r){i.push(u.bind(r,n,t))}),i});flex.callers.define.nodes("bindingProps.unbind",function(n,t){var i=[];return SelectorClass(),Array.prototype.forEach.call(this.target,function(r){i.push(u.unbind(r,n,t))}),i});flex.callers.define.nodes("bindingProps.kill",function(n){var t=[];return SelectorClass(),Array.prototype.forEach.call(this.target,function(i){t.push(u.kill(i,n))}),t})}},o={check:function(){if(!Object.defineProperty)throw t.support.DEFINE_PROPERTY;if(i.attach===null)throw t.support.MUTATION_SCANNING;}},i.init(),e.init(),o.check(),s={},{}};f.prototype=function(){function f(t){var t=t||null,i=_nodes("*["+n.CONTAINER+(t!==null?'="'+t+'"':"")+"]:not(["+n.INITED+"])").target;i!==null&&Array.prototype.forEach.call(i,function(t){var i=t.getAttribute(n.CONTAINER);(i===""||i===null)&&t.setAttribute(n.CONTAINER,flex.unique());t.setAttribute(n.INITED,!0)})}var i=null,r=null,t=null,n=null,u=null;return n={CONTAINER:"data-flex-ui-window-focus",INITED:"data-flex-window-focus-inited",GLOBAL_GROUP:"flex-window-focus-global-group",GLOBAL_EVENT_FLAG:"flex-window-focus-global-event",GLOBAL_CURRENT:"flex-window-focus-global-current",GLOBAL_EVENT_ID:"flex-window-focus-global-event-id",FOCUSED_ZINDEX:1e3},r={attach:function(){var i=flex.overhead.globaly.get(n.GLOBAL_GROUP,n.GLOBAL_EVENT_FLAG);i!==!0&&(flex.overhead.globaly.set(n.GLOBAL_GROUP,n.GLOBAL_EVENT_FLAG,!0),_node(window).events().add("click",function(n){t.onClick(n);return!0},n.GLOBAL_EVENT_ID))}},t={getContainer:function(t){var i=null,r=null;return typeof t.getAttribute=="function"&&(i=t.getAttribute(n.CONTAINER),i!==""&&i!==null)?{container:t,id:i}:(r=_node(t).html().find().parentByAttr({name:n.CONTAINER,value:null}),r!==null)?{container:r,id:r.getAttribute(n.CONTAINER)}:null},history:{is:function(t){return flex.overhead.globaly.get(n.GLOBAL_GROUP,n.GLOBAL_CURRENT)!==t?!1:!0},set:function(t){flex.overhead.globaly.set(n.GLOBAL_GROUP,n.GLOBAL_CURRENT,t)},get:function(){return flex.overhead.globaly.get(n.GLOBAL_GROUP,n.GLOBAL_CURRENT)},del:function(){flex.overhead.globaly.del(n.GLOBAL_GROUP,n.GLOBAL_CURRENT)}},onClick:function(n){var i=t.getContainer(n.flex.target),r=t.history.get();r!==null&&t.focus.unset(r);i!==null&&t.history.is(i.id)===!1&&t.focus.set(i.id)},focus:{zIndex:function(t,i){var r=_node("*["+n.CONTAINER+'="'+t+'"]').target;r!==null&&(r.style.zIndex=i)},set:function(i){t.focus.zIndex(i,n.FOCUSED_ZINDEX);t.history.set(i)},unset:function(n){t.focus.zIndex(n,"");t.history.del(n)}}},u={attach:function(){flex.events.core.listen(flex.registry.events.ui.patterns.GROUP,flex.registry.events.ui.patterns.MOUNTED,function(t){var i=t.length!==void 0?t.length>0?t[0].parentNode:null:null;i!==null&&_node("*["+n.CONTAINER+"]:not(["+n.INITED+"])",!1,i).target!==null&&f()})}},i={init:f},r.attach(),u.attach(),flex.libraries!==void 0&&flex.libraries.events!==void 0&&flex.libraries.html!==void 0&&(flex.libraries.events.create(),flex.libraries.html.create()),{init:i.init}};s.prototype=function(){function u(i){var i=i||null,r=_nodes("*["+n.CONTAINER+(i!==null?'="'+i+'"':"")+"]:not(["+n.INITED+"])").target;r!==null&&Array.prototype.forEach.call(r,function(i){var r=i.getAttribute(n.CONTAINER),u=null;r!==""&&r!==null&&(u=_nodes("*["+n.HOOK+'="'+r+'"]').target,u!==null&&t.attach(i,u,r));i.setAttribute(n.INITED,!0);i.setAttribute(n.STATE,"false");flex.overhead.objecty.set(i,n.STORAGE,{maximazed:!1},!0)})}var i=null,r=null,t=null,n=null;return n={CONTAINER:"data-flex-ui-window-maximize",HOOK:"data-flex-window-maximize-hook",INITED:"data-flex-window-maximize-inited",STATE:"data-flex-window-is-maximized",STORAGE:"flex-window-maximize-storage"},t={attach:function(n,i,r){Array.prototype.forEach.call(i,function(i,u){_node(i).events().add("click",function(i){t.onClick(i,n,r);return!0},r+"_"+u)})},onClick:function(i,r,u){var f=flex.overhead.objecty.get(r,n.STORAGE,!1);f!==null&&(f.maximazed===!1?t.actions.maximaze(r,f,u):t.actions.restore(r,f,u),setTimeout(function(){flex.events.core.fire(flex.registry.events.ui.window.maximize.GROUP,flex.registry.events.ui.window.maximize.CHANGE,{container:r,id:u})},10))},actions:{maximaze:function(t,i,r){i.maximazed=!0;i.size={position:t.style.position!==""?t.style.position:!1,width:t.style.width!==""?t.style.width:!1,height:t.style.height!==""?t.style.height:!1,left:t.style.left!==""?t.style.left:!1,top:t.style.top!==""?t.style.top:!1};t.style.position="fixed";t.style.width="100%";t.style.height="100%";t.style.left="0px";t.style.top="0px";t.setAttribute(n.STATE,"true");setTimeout(function(){flex.events.core.fire(flex.registry.events.ui.window.maximize.GROUP,flex.registry.events.ui.window.maximize.MAXIMIZED,{container:t,id:r})},10)},restore:function(t,i,r){i.maximazed=!1;t.style.position=i.size.position!==!1?i.size.position:"";t.style.width=i.size.width!==!1?i.size.width:"";t.style.height=i.size.height!==!1?i.size.height:"";t.style.left=i.size.left!==!1?i.size.left:"";t.style.top=i.size.top!==!1?i.size.top:"";t.setAttribute(n.STATE,"false");setTimeout(function(){flex.events.core.fire(flex.registry.events.ui.window.maximize.GROUP,flex.registry.events.ui.window.maximize.RESTORED,{container:t,id:r})},10)},byID:{findByID:function(t){var t=t||null,i=null,r=[];return t!==null&&(i=_nodes("*["+n.CONTAINER+(t!==null?'="'+t+'"':"")+"]").target,i!==null&&i.length>0)?(Array.prototype.forEach.call(i,function(t){var i=flex.overhead.objecty.get(t,n.STORAGE,!1);i!==null&&r.push({container:t,storage:i})}),r.length>0?r:null):null},maximaze:function(n){var i=t.actions.byID.findByID(n);i!==null&&i.forEach(function(i){t.actions.maximaze(i.container,i.storage,n)})},restore:function(n){var i=t.actions.byID.findByID(n);i!==null&&i.forEach(function(i){t.actions.restore(i.container,i.storage,n)})}}}},r={attach:function(){flex.events.core.listen(flex.registry.events.ui.patterns.GROUP,flex.registry.events.ui.patterns.MOUNTED,function(t){var i=t.length!==void 0?t.length>0?t[0].parentNode:null:null;i!==null&&_node("*["+n.CONTAINER+"]:not(["+n.INITED+"])",!1,i).target!==null&&u()})}},flex.libraries!==void 0&&flex.libraries.events!==void 0&&flex.libraries.events.create(),r.attach(),i={init:u,maximaze:t.actions.byID.maximaze,restore:t.actions.byID.restore},{init:i.init,maximaze:i.maximaze,restore:i.restore}};e.prototype=function(){function f(r){var r=r||null,u=_nodes("*["+n.CONTAINER+(r!==null?'="'+r+'"':"")+"]:not(["+n.INITED+"])").target;u!==null&&Array.prototype.forEach.call(u,function(r){var u=r.getAttribute(n.CONTAINER),f=null;u!==""&&u!==null&&(f=_nodes("*["+n.HOOK+'="'+u+'"]').target,f!==null&&(t.attach(r,f,u),i.attach(r,u)));r.setAttribute(n.INITED,!0)})}var r=null,t=null,i=null,u=null,n=null;return n={CONTAINER:"data-flex-ui-window-move-container",HOOK:"data-flex-ui-window-move-hook",INITED:"data-flex-window-move-inited",GLOBAL_GROUP:"flex-window-move",GLOBAL_EVENT_FLAG:"flex-window-move-global-event",GLOBAL_CURRENT:"flex-window-move-global-current",GLOBAL_EVENT_ID:"flex-window-move-global-event-id",STATE_STORAGE:"flex-window-move-instance-state"},t={attach:function(n,i,r){Array.prototype.forEach.call(i,function(i){_node(i).events().add("mousedown",function(u){t.start(u,n,i,r)},r)})},start:function(t,i,r,u){function s(n){return n.currentStyle&&n.currentStyle.position?n.currentStyle.position:window.getComputedStyle?window.getComputedStyle(n).position:null}var f=null,e=null,o=null;return flex.overhead.objecty.get(i,n.STATE_STORAGE,!1,!1)===!1?(f=_node(i).html().position().byPage(),e=_node(i.parentNode).html().scroll().position(),o=s(i)!=="fixed"?!1:!0,flex.overhead.globaly.set(n.GLOBAL_GROUP,n.GLOBAL_CURRENT,{clientX:t.flex.clientX,clientY:t.flex.clientY,offsetX:t.flex.offsetX,offsetY:t.flex.offsetY,pageX:t.flex.pageX,pageY:t.flex.pageY,hook:r,container:i,id:u,oldX:t.flex.pageX,oldY:t.flex.pageY,posX:f.left+(o===!1?e.left():0),posY:f.top+(o===!1?e.top():0)}),t.flex.stop()):!0},move:function(t){var i=flex.overhead.globaly.get(n.GLOBAL_GROUP,n.GLOBAL_CURRENT),r=null;return i!==null&&(r=i.container,i.posX=i.posX-(i.oldX-t.flex.pageX),i.posY=i.posY-(i.oldY-t.flex.pageY),r.style.left=i.posX+"px",r.style.top=i.posY+"px",i.oldX=t.flex.pageX,i.oldY=t.flex.pageY),t.flex.stop()},stop:function(){flex.overhead.globaly.del(n.GLOBAL_GROUP,n.GLOBAL_CURRENT)},global:{attach:function(){var i=flex.overhead.globaly.get(n.GLOBAL_GROUP,n.GLOBAL_EVENT_FLAG);i!==!0&&(flex.overhead.globaly.set(n.GLOBAL_GROUP,n.GLOBAL_EVENT_FLAG,!0),_node(window).events().add("mousemove",function(n){t.move(n)},n.GLOBAL_EVENT_ID),_node(window).events().add("mouseup",function(n){t.stop(n)},n.GLOBAL_EVENT_ID))}}},i={attach:function(t,r){flex.events.core.listen(flex.registry.events.ui.window.maximize.GROUP,flex.registry.events.ui.window.maximize.MAXIMIZED,function(n){return i.onRefreshByParent(n.container,t,flex.registry.events.ui.window.maximize.MAXIMIZED)},n.STATE_STORAGE+r,!1);flex.events.core.listen(flex.registry.events.ui.window.maximize.GROUP,flex.registry.events.ui.window.maximize.RESTORED,function(n){return i.onRefreshByParent(n.container,t,flex.registry.events.ui.window.maximize.RESTORED)},n.STATE_STORAGE+r,!1)},onRefreshByParent:function(t,i,r){if(t===i)switch(r){case flex.registry.events.ui.window.maximize.MAXIMIZED:flex.overhead.objecty.set(i,n.STATE_STORAGE,!0,!0);break;case flex.registry.events.ui.window.maximize.RESTORED:flex.overhead.objecty.set(i,n.STATE_STORAGE,!1,!0)}return!1}},u={attach:function(){flex.events.core.listen(flex.registry.events.ui.patterns.GROUP,flex.registry.events.ui.patterns.MOUNTED,function(t){var i=t.length!==void 0?t.length>0?t[0].parentNode:null:null;i!==null&&_node("*["+n.CONTAINER+"]:not(["+n.INITED+"])",!1,i).target!==null&&f()})}},r={init:f},t.global.attach(),u.attach(),flex.libraries!==void 0&&flex.libraries.events!==void 0&&flex.libraries.html!==void 0&&(flex.libraries.events.create(),flex.libraries.html.create()),{init:r.init}};o.prototype=function(){function f(r){var r=r||null,u=_nodes("*["+n.CONTAINER+(r!==null?'="'+r+'"':"")+"]:not(["+n.INITED+"])").target;u!==null&&Array.prototype.forEach.call(u,function(r){var u=r.getAttribute(n.CONTAINER);u!==null&&u!==""&&Array.prototype.forEach.call(n.HOOKS,function(n){var f=t.hooks.get(u,r,n);t.attach(r,f,n,u);i.attach(r,u)});r.setAttribute(n.INITED,!0)})}var r=null,t=null,u=null,i=null,n=null;return n={CONTAINER:"data-flex-ui-window-resize-container",INITED:"data-flex-window-resize-inited",HOOK:"data-flex-window-resize-hook",HOOKS:["top","left","right","bottom","corner"],HOOKS_STYLE:{top:{node:"div",style:{position:"absolute",zIndex:1,height:"6px",width:"100%",top:"0px",left:"0px",cursor:"n-resize"}},bottom:{node:"div",style:{position:"absolute",zIndex:1,height:"6px",width:"100%",bottom:"0px",left:"0px",cursor:"n-resize"}},left:{node:"div",style:{position:"absolute",zIndex:1,height:"100%",width:"6px",top:"0px",left:"0px",cursor:"e-resize"}},right:{node:"div",style:{position:"absolute",zIndex:1,height:"100%",width:"6px",top:"0px",right:"0px",cursor:"e-resize"}},corner:{node:"div",style:{position:"absolute",zIndex:1,height:"10px",width:"10px",bottom:"0px",right:"0px",cursor:"nw-resize"}}},POSITION_PARENT:"data-flex-ui-window-resize-position-parent",GLOBAL_GROUP:"flex-window-resize",GLOBAL_EVENT_FLAG:"flex-window-resize-global-event",GLOBAL_CURRENT:"flex-window-resize-global-current",GLOBAL_EVENT_ID:"flex-window-resize-global-event-id",STATE_STORAGE:"flex-window-resize-instance-state"},t={position:{getParent:function(t){return _node("*["+n.POSITION_PARENT+'="'+t+'"]').target}},hooks:{make:function(t,i){var r=document.createElement(n.HOOKS_STYLE[i].node);for(var u in n.HOOKS_STYLE[i].style)r.style[u]=n.HOOKS_STYLE[i].style[u];return t.appendChild(r),r},get:function(i,r,u){var f=_nodes("*["+n.CONTAINER+'="'+i+'"]['+n.HOOK+'="'+u+'"]:not(['+n.INITED+"])").target;return f.length===0&&(f=[],f.push(t.hooks.make(r,u))),f}},attach:function(n,i,r,u){var f=t.position.getParent(u);Array.prototype.forEach.call(i,function(i){_node(i).events().add("mousedown",function(e){t.start(e,n,i,r,f,u)},u)})},start:function(t,i,r,u,f,e){function l(n){return n.currentStyle&&n.currentStyle.position?n.currentStyle.position:window.getComputedStyle?window.getComputedStyle(n).position:null}var o=null,s=null,h=null,c=null;return flex.overhead.objecty.get(i,n.STATE_STORAGE,!1,!1)===!1?(o=_node(i).html().size().get(),s=_node(f!==null?f:i).html().position().byPage(),h=_node(i.parentNode).html().scroll().position(),c=l(i)!=="fixed"?!1:!0,flex.overhead.globaly.set(n.GLOBAL_GROUP,n.GLOBAL_CURRENT,{clientX:t.flex.clientX,clientY:t.flex.clientY,offsetX:t.flex.offsetX,offsetY:t.flex.offsetY,pageX:t.flex.pageX,pageY:t.flex.pageY,hook:r,direction:u,container:i,position_parent:f,id:e,oldX:t.flex.pageX,oldY:t.flex.pageY,posX:s.left+(c===!1?h.left():0),posY:s.top+(c===!1?h.top():0),width:o.width,height:o.height}),t.flex.stop()):!0},move:function(t){var i=flex.overhead.globaly.get(n.GLOBAL_GROUP,n.GLOBAL_CURRENT),r=null,u=null;if(i!==null){r=i.container;u=i.position_parent!==null?i.position_parent:r;switch(i.direction){case"top":i.posY=i.posY-(i.oldY-t.flex.pageY);i.height=i.height+(i.oldY-t.flex.pageY);r.style.height=i.height+"px";u.style.top=i.posY+"px";break;case"left":i.posX=i.posX-(i.oldX-t.flex.pageX);i.width=i.width+(i.oldX-t.flex.pageX);r.style.width=i.width+"px";u.style.left=i.posX+"px";break;case"bottom":i.height=i.height-(i.oldY-t.flex.pageY);r.style.height=i.height+"px";break;case"right":i.width=i.width-(i.oldX-t.flex.pageX);r.style.width=i.width+"px";break;case"corner":i.height=i.height-(i.oldY-t.flex.pageY);r.style.height=i.height+"px";i.width=i.width-(i.oldX-t.flex.pageX);r.style.width=i.width+"px"}i.oldX=t.flex.pageX;i.oldY=t.flex.pageY;setTimeout(function(){flex.events.core.fire(flex.registry.events.ui.window.resize.GROUP,flex.registry.events.ui.window.resize.REFRESH,{container:i.container,id:i.id})},10)}return t.flex.stop()},stop:function(){var t=flex.overhead.globaly.get(n.GLOBAL_GROUP,n.GLOBAL_CURRENT);t!==null&&flex.events.core.fire(flex.registry.events.ui.window.resize.GROUP,flex.registry.events.ui.window.resize.FINISH,{container:t.container,id:t.id});flex.overhead.globaly.del(n.GLOBAL_GROUP,n.GLOBAL_CURRENT)},global:{attach:function(){var i=flex.overhead.globaly.get(n.GLOBAL_GROUP,n.GLOBAL_EVENT_FLAG);i!==!0&&(flex.overhead.globaly.set(n.GLOBAL_GROUP,n.GLOBAL_EVENT_FLAG,!0),_node(window).events().add("mousemove",function(n){t.move(n)},n.GLOBAL_EVENT_ID),_node(window).events().add("mouseup",function(n){t.stop(n)},n.GLOBAL_EVENT_ID))}}},i={attach:function(t,r){flex.events.core.listen(flex.registry.events.ui.window.maximize.GROUP,flex.registry.events.ui.window.maximize.MAXIMIZED,function(n){return i.onRefreshByParent(n.container,t,flex.registry.events.ui.window.maximize.MAXIMIZED)},n.STATE_STORAGE+r,!1);flex.events.core.listen(flex.registry.events.ui.window.maximize.GROUP,flex.registry.events.ui.window.maximize.RESTORED,function(n){return i.onRefreshByParent(n.container,t,flex.registry.events.ui.window.maximize.RESTORED)},n.STATE_STORAGE+r,!1)},onRefreshByParent:function(t,i,r){if(t===i)switch(r){case flex.registry.events.ui.window.maximize.MAXIMIZED:flex.overhead.objecty.set(i,n.STATE_STORAGE,!0,!0);break;case flex.registry.events.ui.window.maximize.RESTORED:flex.overhead.objecty.set(i,n.STATE_STORAGE,!1,!0)}return!1}},u={attach:function(){flex.events.core.listen(flex.registry.events.ui.patterns.GROUP,flex.registry.events.ui.patterns.MOUNTED,function(t){var i=t.length!==void 0?t.length>0?t[0].parentNode:null:null;i!==null&&_node("*["+n.CONTAINER+"]:not(["+n.INITED+"])",!1,i).target!==null&&f()})}},r={init:f},t.global.attach(),u.attach(),flex.libraries!==void 0&&flex.libraries.events!==void 0&&flex.libraries.html!==void 0&&(flex.libraries.events.create(),flex.libraries.html.create()),{init:r.init}};u.prototype=function(){var i=null,f=null,t=null,e=null,o=null,h=null,u=null,r=null,s=null,c=null,l=null,n=null;return n={storage:{GROUP:"flex.html",SCROLL:"scroll",CUSTOM_STYLES:"custom.styles"},classes:{scroll:{MINIMAL_WIDTH:15,MINIMAL_HEIGHT:15}}},i={bySelector:function(){var n=function(){};return n.prototype=function(){function i(n,t){return typeof n=="string"?(t||document).querySelector(n):null}function r(n,t){return typeof n=="string"?(t||document).querySelectorAll(n):null}function u(t,i){var r=null;return typeof t=="string"?(r=n.get(t),r===null&&(r=n.add((i||document).querySelector(t))),r):null}function f(t,i){var r=null;return typeof t=="string"?(r=n.get(t),r===null&&(r=n.add((i||document).querySelectorAll(t))),r):null}var n=null,t=null;return n={data:{},get:function(t){var i=n.data;return i[t]!==void 0?i[t]:null},add:function(t,i){var r=n.data;return r[t]=i,i},remove:function(t){var i=n.data;i[t]=null;delete i[t]},reset:function(){n.data={}}},t={first:i,all:r,cachedFirst:u,cachedAll:f,cacheReset:n.reset,cacheRemove:n.remove},{first:t.first,all:t.all,cachedFirst:t.cachedFirst,cachedAll:t.cachedAll,cacheReset:t.cacheReset,cacheRemove:t.cacheRemove}}(),new n},fromParent:function(){var n=function(){this.selector=i.bySelector()};return n.prototype={selector:null,select:function(n,t,i){var r=flex.unique(),f=null,u="data-"+r;return typeof n.nodeName=="string"&&(n.setAttribute(u,r),f=this.selector[i===!1?"all":"first"](n.nodeName+"["+u+'="'+r+'"] '+t),n.removeAttribute(u)),f},first:function(n,t){return this.select(n,t,!0)},all:function(n,t){return this.select(n,t,!1)}},Object.freeze(new n)}},f=function(){var n=function(){};return n.prototype={childByAttr:function(n,t,i){var r=null,t=t.toLowerCase(),u=this;return n.childNodes!==void 0&&typeof n.childNodes.length=="number"&&Array.prototype.forEach.call(n.childNodes,function(n){if(typeof n.nodeName=="string"&&(n.nodeName.toLowerCase()===t||t==="*")&&typeof n.getAttribute=="function")if(i.value!==null){if(n.getAttribute(i.name)===i.value)return n}else if(n.hasAttribute(i.name)===!0)return n;return r=u.childByAttr(n,t,i),r!==null?r:void 0}),null},childByType:function(n,t){var i=null,t=t.toLowerCase(),r=this;return n.childNodes!==void 0&&typeof n.childNodes.length=="number"&&(Array.prototype.forEach.call(n.childNodes,function(n){if(typeof n.nodeName=="string"&&n.nodeName.toLowerCase()===t)return n}),Array.prototype.forEach.call(n.childNodes,function(n){return i=r.childByType(n,t),i!==null?i:void 0})),null},parentByAttr:function(n,t){return n!==void 0&&t!==void 0&&n.parentNode!==void 0&&n.parentNode!==null&&typeof n.parentNode.getAttribute=="function"?t.value!==null?n.parentNode.getAttribute(t.name)===t.value?n.parentNode:this.parentByAttr(n.parentNode,t):n.parentNode.getAttribute(t.name)!==null?n.parentNode:this.parentByAttr(n.parentNode,t):null}},new n},e=function(){var n=function(){};return n.prototype={nodeByClientRectSize:function(n){var i=0,r=0,t=null;return n.getBoundingClientRect!==void 0&&(t=n.getBoundingClientRect(),i=t.bottom-t.top,r=t.right-t.left),{height:i,width:r}},nodeByOffset:function(n){var t=0,i=0;return n.offsetHeight!==void 0&&(t=n.offsetHeight,i=n.offsetWidth),{height:t,width:i}},nodeWithMargin:function(n){var c=null,l=this.node(n),t,r,u,f,e,o,s,h;return typeof n=="string"&&(c=i.bySelector(),n=c.first(n),c=null),n!==null&&(t=parseInt(document.defaultView.getComputedStyle(n).marginTop,10),r=parseInt(document.defaultView.getComputedStyle(n).marginBottom,10),u=parseInt(document.defaultView.getComputedStyle(n).marginRight,10),f=parseInt(document.defaultView.getComputedStyle(n).marginLeft,10),e=parseInt(document.defaultView.getComputedStyle(n).borderTopWidth,10),o=parseInt(document.defaultView.getComputedStyle(n).borderBottomWidth,10),s=parseInt(document.defaultView.getComputedStyle(n).borderRightWidth,10),h=parseInt(document.defaultView.getComputedStyle(n).borderLeftWidth,10),(t===null||t===NaN)&&(t=0),(r===null||r===NaN)&&(r=0),(u===null||u===NaN)&&(u=0),(f===null||f===NaN)&&(f=0),(e===null||e===NaN)&&(e=0),(o===null||o===NaN)&&(o=0),(s===null||s===NaN)&&(s=0),(h===null||h===NaN)&&(h=0)),{height:l.height+t+r+e+o,width:l.width+u+f+s+h}},node:function(n){var r=null,t={height:0,width:0};return typeof n=="string"&&(r=i.bySelector(),n=r.first(n),r=null),n!==null&&(t=this.nodeByClientRectSize(n),t.height===0&&t.width===0&&(t=this.nodeByOffset(n))),t},window:function(){return self.innerHeight?{height:self.innerHeight,width:self.innerWidth}:document.documentElement&&document.documentElement.clientHeight?{height:document.documentElement.clientHeight,width:document.documentElement.clientWidth}:document.body?{height:document.body.clientHeight,width:document.body.clientWidth}:null},image:function(n){function t(n){var t=new Image,i=null;return t.src=n.src,i={width:t.width,height:t.height},t=null,i}return n!==void 0?typeof n.naturalWidth=="number"?{width:n.naturalWidth,height:n.naturalHeight}:t(n):null}},new n},o=function(){var t=function(){};return t.prototype={window:function(){var t=document.body,n=document.documentElement;return{top:function(){return Math.max(t.scrollTop||0,n.scrollTop||0,t.pageYOffset||0,n.pageYOffset||0,window.pageYOffset||0)},left:function(){return Math.max(t.scrollLeft||0,n.scrollLeft||0,t.pageXOffset||0,n.pageXOffset||0,window.pageXOffset||0)},height:function(){return Math.max(t.scrollHeight||0,t.offsetHeight||0,n.clientHeight||0,n.scrollHeight||0,n.offsetHeight||0)},width:function(){return Math.max(t.scrollWidth||0,t.offsetWidth||0,n.clientWidth||0,n.scrollWidth||0,n.offsetWidth||0)}}},get:function(n){return n!==document.body&&n!==document.documentElement?{top:function(){return Math.max(n.scrollTop||0,n.pageYOffset||0)},left:function(){return Math.max(n.scrollLeft||0,n.pageXOffset||0)},height:function(){return Math.max(n.scrollHeight||0,n.clientHeight||0,n.offsetHeight||0)},width:function(){return Math.max(n.scrollWidth||0,n.clientWidth||0,n.offsetWidth||0)}}:this.window()},scrollBarSize:function(){function i(){var i=document.createElement("DIV"),r=u(),t=null;return r.apply(i,{position:"absolute",top:"-1000px",left:"-1000px",width:"300px",height:"300px",overflow:"scroll",opacity:"0.01"}),document.body.appendChild(i),t={width:i.offsetWidth-i.clientWidth,height:i.offsetHeight-i.clientHeight},t.probablyMobile=t.width===0?!0:!1,t.width=t.width===0?n.classes.scroll.MINIMAL_WIDTH:t.width,t.height=t.height===0?n.classes.scroll.MINIMAL_HEIGHT:t.height,document.body.removeChild(i),t}var t=flex.overhead.globaly.get(n.storage.GROUP,n.storage.SCROLL,{});return t.value||(t.value=i()),t.value}},new t},h=function(){var n=function(){};return n.prototype={build:function(n){function f(n,t){var i=t[n.settingup.parent]||null;typeof n.settingup=="object"&&t!==null&&i!==null&&Array.prototype.forEach.call(n.settingup.childs,function(r){t[r]&&(typeof n[r].settingup=="object"?i.appendChild(t[r][n[r].settingup.parent]):i.appendChild(t[r]))})}function r(n){var t=document.createElement(n.node);return n.html!==null&&(t.innerHTML=n.html),Array.prototype.forEach.call(n.attrs,function(n){flex.oop.objects.validate(n,[{name:"name",type:"string"},{name:"value",type:"string"}])===!0&&t.setAttribute(n.name,n.value)}),t}function u(n){return flex.oop.objects.validate(n,[{name:"node",type:"string"},{name:"attrs",type:"array",value:[]},{name:"html",type:"string",value:null}])}var i={},t;try{if(u(n)===!0)return r(n);for(t in n)if(u(n[t])===!0)i[t]=r(n[t]);else if(typeof n[t]=="object"&&t!=="settingup"&&(i[t]=this.build(n[t]),i[t]===null))return null;f(n,i)}catch(e){return null}return i}},new n},u=function(){var t=function(){};return t.prototype={apply:function(n,t){if(n&&typeof t=="object"&&n.style){for(var i in t)n.style[i]=t[i];return!0}return!1},redraw:function(n){return n&&n.style!==void 0?(n.style.display="none",n.style.display="",!0):!1},getRuleFromSheet:function(n,t){var r=document.styleSheets,i=[];try{t=t.replace(/['"]/gi,"|");Array.prototype.forEach.call(n.cssRules||n.rules,function(n,r){n.selectorText?n.selectorText.replace(/['"]/gi,"|")===t&&i.push({rule:n,style:n.style||null,index:r,cssText:n.cssText||""}):typeof n.cssText=="string"&&n.cssText.indexOf(t.toLowerCase())===0&&i.push({rule:n,style:n.style||null,index:r,cssText:n.cssText||""})})}catch(u){}finally{return i.length>0?i:null}},getRule:function(n){var r=document.styleSheets,t=[],i=this;try{n=n.replace(/['"]/gi,"|");Array.prototype.forEach.call(document.styleSheets,function(r){var u=i.getRuleFromSheet(r,n);u!==null&&(t=t.concat(u))})}catch(u){}finally{return t.length>0?t:null}},setRule:function(t,i){var r=flex.overhead.globaly.get(n.storage.GROUP,n.storage.CUSTOM_STYLES);if(typeof i=="string"){if(r===null&&(r=document.createElement("style"),r.type="text/css",document.head.appendChild(r),r=r.styleSheet||r.sheet,flex.overhead.globaly.set(n.storage.GROUP,n.storage.CUSTOM_STYLES,r)),r.insertRule)return r.insertRule(t+" {"+i+"}",r.cssRules.length),{rule:r.cssRules[r.cssRules.length-1],index:r.cssRules.length-1,sheet:r};if(r.addRule)return r.addRule(t+" {"+i+"}",-1),{rule:r.cssRules[r.cssRules.length-1],index:r.cssRules.length-1,sheet:r}}return null},updateRule:function(n,t,i){var r=t.selectorText;return this.deleteRule(n,t),this.setRule(r,i)},deleteRule:function(t,i,r){function f(n,t,i,r){var u=null;if(t!==void 0)if(typeof t=="string"){if(u=r===!1&&i!==null?n.getRuleFromSheet(i,t):n.getRule(t),u!==null&&u.length===1)return u[0].index}else{if(typeof t=="number")return t;if(typeof t=="object"&&i!==null)return n.getRuleIndex(i,t)}return-1}var t=t||flex.overhead.globaly.get(n.storage.GROUP,n.storage.CUSTOM_STYLES),r=typeof r=="boolean"?r:!0,u=f(this,i,t,r);if(u!==-1&&t!==null){if(t.deleteRule)return t.deleteRule(u),!0;if(t.removeRule)return t.removeRule(u),!0}return null},getRuleIndex:function(n,t){var i=-1;try{Array.prototype.forEach.call(n.cssRules,function(n,r){if(n===t){i=r;throw"found";}})}catch(r){if(r==="found")return i}return-1},addClass:function(n,t){n.className!==void 0&&n.className.search(t)===-1&&(n.className+=t)},removeClass:function(n,t){n.className!==void 0&&n.className.search(t)!==-1&&(n.className=n.className.replace(t,""))}},new t},r=function(){var n=function(){};return n.prototype=function(){var t=null,i=null,n=null;return r={old:function(n){for(var t=0,i=0;n;)n.offsetTop!==void 0&&n.offsetLeft!==void 0&&(t+=parseFloat(n.offsetTop),i+=parseFloat(n.offsetLeft)),n=n.offsetParent;return{top:t,left:i}},modern:function(n){var r=null,t=null,i=null,u=null,f=null,e=null,o=null;return r=n.getBoundingClientRect(),t=document.body,i=document.documentElement,u=window.pageYOffset||i.scrollTop||t.scrollTop,f=window.pageXOffset||i.scrollLeft||t.scrollLeft,e=i.clientTop||t.clientTop||0,o=i.clientLeft||t.clientLeft||0,{top:r.top+u-e,left:r.left+f-o}}},t=function(n){var t=null,i=null,u=null,f=null,e=null,o=null;try{u=n.getBoundingClientRect();t=u.top;i=u.left}catch(s){f=r.old(n);e=window.pageYOffset||objDocumentElement.scrollTop||objBody.scrollTop;o=window.pageXOffset||objDocumentElement.scrollLeft||objBody.scrollLeft;t=f.top-e;i=f.left-o}finally{return{top:t,left:i}}},i=function(n){var t=null;try{t=r.modern(n)}catch(i){t=r.old(n)}finally{return t}},n={byPage:t,byWindow:i},{byPage:n.byPage,byWindow:n.byWindow}}(),new n},s=function(){var n=function(){};return n.prototype={em:function(n){return n=n||document.documentElement,n=n.parentNode?n:document.documentElement,parseFloat(getComputedStyle(n).fontSize)},rem:function(){this.em(document.documentElement)}},new n},c={validateNode:function(n){var t=null;return n&&(typeof n=="string"&&(t=i.bySelector(),n=t.first(n)),n!==null&&n.parentNode!==void 0)?n:null},appendChilds:function(n,t){for(var i=t.length-1;i>=0;i-=1)n.appendChild(t[0])}},l={init:function(){function s(){n===null&&(n=e())}function v(){a===null&&(a=r())}function h(){t===null&&(t=u())}function b(){p===null&&(p=o())}function l(){c===null&&(c=f())}function y(){w===null&&(w=i.fromParent())}var n=null,a=null,t=null,p=null,c=null,w=null;flex.callers.define.node("html.size.get",function(){return s(),n.node(this.target)});flex.callers.define.node("html.size.getWithMargin",function(){return s(),n.nodeWithMargin(this.target)});flex.callers.define.node("html.size.getByClientRectSize",function(){return s(),n.nodeByClientRectSize(this.target)});flex.callers.define.node("html.size.getByOffset",function(){return s(),n.nodeByOffset(this.target)});flex.callers.define.node("html.position.byPage",function(){return v(),a.byPage(this.target)});flex.callers.define.node("html.position.byWindow",function(){return v(),a.byWindow(this.target)});flex.callers.define.node("html.styles.apply",function(n){return h(),t.apply(this.target,n)});flex.callers.define.node("html.styles.redraw",function(){return h(),t.redraw(this.target)});flex.callers.define.node("html.styles.addClass",function(n){return h(),t.addClass(this.target,n)});flex.callers.define.node("html.styles.removeClass",function(n){return h(),t.removeClass(this.target,n)});flex.callers.define.node("html.scroll.position",function(){return b(),p.get(this.target)});flex.callers.define.node("html.find.childByAttr",function(n,t){return l(),c.childByAttr(this.target,n,t)});flex.callers.define.node("html.find.childByType",function(n){return l(),c.childByType(this.target,n)});flex.callers.define.node("html.find.parentByAttr",function(n){return l(),c.parentByAttr(this.target,n)});flex.callers.define.node("html.find.node",function(n){return y(),w.first(this.target,n)});flex.callers.define.node("html.find.nodes",function(n){return y(),w.all(this.target,n)});flex.callers.define.nodes("html.size.get",function(){var t=[];return s(),Array.prototype.forEach.call(this.target,function(i){t.push(n.node(i))}),t});flex.callers.define.nodes("html.size.getWithMargin",function(){var t=[];return s(),Array.prototype.forEach.call(this.target,function(i){t.push(n.nodeWithMargin(i))}),t});flex.callers.define.nodes("html.size.getByClientRectSize",function(){var t=[];return s(),Array.prototype.forEach.call(this.target,function(i){t.push(n.nodeByClientRectSize(i))}),t});flex.callers.define.nodes("html.size.getByOffset",function(){var t=[];return s(),Array.prototype.forEach.call(this.target,function(i){t.push(n.nodeByOffset(i))}),t});flex.callers.define.nodes("html.position.byPage",function(){var n=[];return v(),Array.prototype.forEach.call(this.target,function(t){n.push(a.byPage(t))}),n});flex.callers.define.nodes("html.position.byWindow",function(){var n=[];return v(),Array.prototype.forEach.call(this.target,function(t){n.push(a.byWindow(t))}),n});flex.callers.define.nodes("html.styles.apply",function(n){var i=[];return h(),Array.prototype.forEach.call(this.target,function(r){i.push(t.apply(r,n))}),i});flex.callers.define.nodes("html.styles.redraw",function(){var n=[];return h(),Array.prototype.forEach.call(this.target,function(i){n.push(t.redraw(i))}),n});flex.callers.define.nodes("html.styles.addClass",function(n){var i=[];return h(),Array.prototype.forEach.call(this.target,function(r){i.push(t.addClass(r,n))}),i});flex.callers.define.nodes("html.styles.removeClass",function(n){var i=[];return h(),Array.prototype.forEach.call(this.target,function(r){i.push(t.removeClass(r,n))}),i});flex.callers.define.nodes("html.scroll.position",function(){var n=[];return b(),Array.prototype.forEach.call(this.target,function(t){n.push(p.get(t))}),n});flex.callers.define.nodes("html.find.childByAttr",function(n,t){var i=[];return l(),Array.prototype.forEach.call(this.target,function(r){i.push(c.childByAttr(r,n,t))}),i});flex.callers.define.nodes("html.find.childByType",function(n){var t=[];return l(),Array.prototype.forEach.call(this.target,function(i){t.push(c.childByType(i,n))}),t});flex.callers.define.nodes("html.find.parentByAttr",function(n){var t=[];return l(),Array.prototype.forEach.call(this.target,function(i){t.push(c.parentByAttr(i,n))}),t});flex.callers.define.nodes("html.find.node",function(n){var t=[];return y(),Array.prototype.forEach.call(this.target,function(i){t.push(n.first(i,n))}),t});flex.callers.define.nodes("html.find.nodes",function(n){var t=[];return y(),Array.prototype.forEach.call(this.target,function(i){t.push(n.all(i,n))}),t})}},l.init(),t={select:{bySelector:i.bySelector,fromParent:i.fromParent},find:f,size:e,scroll:o,builder:h,styles:u,position:r,units:s,helpers:c},{select:{bySelector:t.select.bySelector,fromParent:t.select.fromParent},find:t.find,size:t.size,scroll:t.scroll,builder:t.builder,styles:u,position:t.position,units:s,helpers:t.helpers}};t.prototype=function(){var l={},s={},r={},h={},e={},n={},u={},f={},c={},t={},a={},i={},o={};return l={settings:{CHECK_PATHS_IN_CSS:!0,SHOWN_LOGS:["CRITICAL","LOGICAL","WARNING"]},get:function(){return l.settings},set:function(n){for(var t in n)l.settings[t]!==void 0&&typeof l.settings[t]==typeof n[t]&&(l.settings[t]=n[t])}},s={storage:{GROUP:"flex.core"},resources:{types:{CSS:".css",JS:".js"}},regs:{urls:{PARAMS:/\?.*/gi,EXTENSION:/(\.[\w\n]*)$/gi,JS_URL:/[\w]*:\/\/[\w\n:\/\.]*\.js/gi,NOT_URL_SYMBOLS:/[\s\t\n\r]/gi,JS_EXP_IN_URL:/\.js$/gi,CSS_EXP_IN_URL:/\.css$/gi}},hashes:{LOCAL_STORAGE_NAME:"flex.hash.storage"},files:{CORE:"patterns.min.js",CORE_URL:"",detect:function(){function i(n){return n=t.url.parse(n.toLowerCase()),s.files.CORE=n.target,s.files.CORE_URL=n.url,n.path}var r=t.resources.js.getCurrentSRC(),n=null;if(r!==null)return i(r);if(n=document.querySelector('script[src*="'+s.files.CORE+'"]'),n!==null)return i(n.src);throw new Error("Cannot detect URL and PATH to core script (default name: flex.core.js)");}},other:{STORAGE_PREFIX:"[FLEX_SYSTEM_RESURCES]"}},r={settings:{DEFAULT_TIMEOUT:15e3,DEFAULT_METHOD:"POST",methods:{POST:"POST",GET:"GET",PUT:"PUT",DELETE:"DELETE",OPTIONS:"OPTIONS"},regs:{URLENCODED:/-urlencoded/gi,JSON:/application\/json/gi},headers:{CONTENT_TYPE:"Content-Type",ACCEPT:"Accept"}},requests:{storage:{},add:function(n){var t=r.requests.storage;return t[n.settings.id]===void 0?(t[n.settings.id]=n,!0):!1},remove:function(n){var t=r.requests.storage;return t[n.settings.id]!==void 0?(t[n.settings.id]=null,delete t[n.settings.id],!0):!1},isConflict:function(n){return r.requests.storage[n]===void 0?!1:!0}},create:function(n,i,u,f,e){var o=null;return(n=typeof n=="string"?n:null,i=typeof i=="string"?[r.settings.methods.POST,r.settings.methods.GET,r.settings.methods.PUT,r.settings.methods.DELETE,r.settings.methods.OPTIONS].indexOf(i.toUpperCase())!==-1?i.toUpperCase():r.settings.DEFAULT_METHOD:r.settings.DEFAULT_METHOD,e=r.parse.settings(e),u=r.parse.parameters(u,e),f=r.parse.callbacks(f),n!==null)?(o=function(n,t,i,r,u){this.settings=u;this.url=n;this.method=t;this.parameters=i;this.callbacks=r;this.timerID=null;this.response=null;this.responseHeaders=null;this.httpRequest=null},o.prototype={send:function(){var n=this,t;try{r.requests.add(n);n.httpRequest=new XMLHttpRequest;for(t in n.events)(function(n,t){h.DOM.add(t.httpRequest,n,function(i){return t.events[n](i,t)})})(t,n);if(n.httpRequest!==null){n.callback(n.callbacks.before);switch(n.method){case r.settings.methods.POST:n.httpRequest.open(n.method,n.url,!0);n.setHeaders(n);n.httpRequest.send(n.parameters._parameters);break;case r.settings.methods.GET:n.httpRequest.open(n.method,n.url+(n.parameters._parameters!==""?"?":"")+n.parameters._parameters,!0);n.setHeaders(n);n.httpRequest.send();break;default:n.httpRequest.open(n.method,n.url,!0);n.setHeaders(n);n.httpRequest.send(n.parameters._parameters)}return n.timerID=setTimeout(function(){n.events.timeout(null,n)},n.settings.timeout),!0}throw"Fail create XMLHttpRequest";}catch(i){n.callback(n.callbacks.fail,i);n.destroy(n)}},setHeaders:function(n){if(n.settings.headers!==null)for(var t in n.settings.headers)n.httpRequest.setRequestHeader(t,n.settings.headers[t])},events:{readystatechange:function(n,t){if(r.requests.isConflict(t.settings.id)!==!1&&n.target&&n.target.readyState){t.callback(t.callbacks.reaction,n);switch(n.target.readyState){case 2:t.responseHeaders=t.parseHeaders(n.target.getAllResponseHeaders());t.callback(t.callbacks.headers,n);break;case 4:return n.target.status===200?(t.response=t.parse(n.target.responseText),t.destroy(t),t.callback(t.callbacks.success,n),!0):(t.destroy(t),t.callback(t.callbacks.fail,n),!1)}}},timeout:function(n,t){r.requests.isConflict(t.settings.id)!==!1&&(t.callback(t.callbacks.timeout,n),t.destroy(t))}},parse:function(n){var t={original:n,parsed:null};try{t.parsed=JSON.parse(n)}catch(i){}finally{return t}},parseHeaders:function(n){var i={_headers:n,headers:{}},t=null;return typeof n=="string"&&(t=n.split("\r\n"),t instanceof Array&&t.forEach(function(n){var t=n.split(":");t instanceof Array&&t[0]!==""&&(i.headers[t[0]]=n.replace(t[0]+":",""))})),i},callback:function(n,i){n!==null&&t.handle(n,[this.response,{id:this.id,event:i!==void 0?i:null,headers:this.responseHeaders,response:this.response,parameters:this.parameters,url:this.url,abort:this.abort.bind(this)}],"ajax.callback:: request ID:: "+this.id+" URL:: "+this.url,this)},abort:function(){this.httpRequest!==null&&typeof this.httpRequest.abort=="function"&&this.httpRequest.abort()},destroy:function(n){clearTimeout(n.timerID);r.requests.remove(n)}},new o(n,i,u,f,e)):null},parse:{settings:function(n){var n=typeof n=="object"?n!==null?n:{}:{};return n.id=typeof n.id=="string"?n.id:typeof n.id=="number"?n.id:a.id(),n.id=r.requests.isConflict(n.id)===!1?n.id:a.id(),n.timeout=typeof n.timeout=="number"?n.timeout:r.settings.DEFAULT_TIMEOUT,n.doNotChangeHeaders=typeof n.doNotChangeHeaders=="boolean"?n.doNotChangeHeaders:!1,n.doNotChangeParameters=typeof n.doNotChangeParameters=="boolean"?n.doNotChangeParameters:!1,n.doNotEncodeParametersAsURL=typeof n.doNotEncodeParametersAsURL=="boolean"?n.doNotEncodeParametersAsURL:!1,n.headers=r.parse.headers(n),n},parameters:function(n,t){var u=n,f={},e="",s=[],o=null,i;if(t.doNotChangeParameters)e=n;else{if(u instanceof Array)Array.prototype.forEach.call(u,function(n,t){var i=null;u[t]=param.replace(/^\s*\?/gi,"");i=u[t].split("=");i instanceof Array?i.length===2?f[i[0]]=i[1]:s.push(u[t]):s.push(u[t])});else if(typeof u=="object"&&u!==null)for(i in u){switch(typeof u[i]){case"string":f[i]=u[i];break;case"boolean":f[i]=u[i].toString();break;case"number":f[i]=u[i].toString();break;case"object":f[i]=JSON.stringify(u[i]);break;default:try{f[i]=JSON.stringify(u[i])}catch(h){}}f[i]=f[i]}if(typeof n!="string")if(r.settings.regs.JSON.lastIndex=0,r.settings.regs.URLENCODED.lastIndex=0,r.settings.regs.JSON.test(t.headers[r.settings.headers.CONTENT_TYPE]))e=JSON.stringify(f);else{o=r.settings.regs.URLENCODED.test(t.headers[r.settings.headers.CONTENT_TYPE]);o=t.doNotEncodeParametersAsURL?!1:o;for(i in f)e+="&"+i+"="+o?encodeURIComponent(f[i]):f[i];e=e.replace(/^\s*\&/gi,"")}else e=n}return{original:n,parameters:f,_parameters:e,excluded:s}},callbacks:function(n){var t={before:null,success:null,fail:null,reaction:null,timeout:null};return typeof n=="object"&&n!==null&&(t.before=typeof n.before=="function"?n.before:null,t.success=typeof n.success=="function"?n.success:null,t.fail=typeof n.fail=="function"?n.fail:null,t.reaction=typeof n.reaction=="function"?n.reaction:null,t.timeout=typeof n.timeout=="function"?n.timeout:null,t.headers=typeof n.headers=="function"?n.headers:null),t},headers:function(n){var t={};return n.doNotChangeHeaders?t=typeof n.headers=="object"?n.headers!==null?n.headers:{}:{}:(typeof n.headers=="object"&&n.headers!==null&&e.objects.forEach(n.headers,function(n,i){var r=n.split("-");r.forEach(function(n,t){r[t]=n.charAt(0).toUpperCase()+n.slice(1)});t[r.join("-")]=i}),t[r.settings.headers.CONTENT_TYPE]===void 0&&(t[r.settings.headers.CONTENT_TYPE]="application/x-www-form-urlencoded"),t[r.settings.headers.ACCEPT]===void 0&&(t[r.settings.headers.ACCEPT]="*/*")),n.headers=t,n.headers}}},e={classes:{of:function(n){return n===null?null:n===void 0?null:Object.prototype.toString.call(n).slice(8,-1)},create:function(n){var t=typeof n.constr=="function"?n.constr:null,u=typeof n.parent=="function"?n.parent:null,r=n.privates!==void 0?n.privates:{},i=n.prototype!==void 0?n.prototype:{},f=null,o=null,s;if(this instanceof e.classes.create)throw Error("Method [flex.oop.classes.create] cannot be used with derective NEW");else{if(u!==null){f=u;f.prototype=u.prototype;o=typeof i=="function"?i.call(new t,r):i;t.prototype=new f;for(s in o)t.prototype[s]=o[s]}else t.prototype=typeof i=="function"?i.call(new t,r):i;return r.__instance=new t,r.__instance}}},objects:{forEach:function(n,t){if(typeof n=="object"){for(var i in n)(function(n,t,i){i(n,t[n])})(i,n,t);"toString"in{toString:null}||Array.prototype.forEach.call(["toString","valueOf","constructor","hasOwnPropery","isPrototypeOf","propertyIsEnumerable","toLocaleString"],function(r){n.hasOwnProperty(prototype)&&t(r,n[i])})}},extend:function(n,t,i){var i=e.classes.of(i)==="Array"?i:[],t=t!==null?t!==void 0?typeof t=="object"?t:{}:{}:{},n=typeof n=="object"?[n]:e.classes.of(n)==="Array"?n:null;return n!==null&&Array.prototype.forEach.call(n,function(n){if(typeof n=="object")for(var r in n)i.indexOf(r)===-1&&(t[r]=n[r])}),t},copy:function(n,t){function r(n){var t=null;return n instanceof Array?(t=[],Array.prototype.forEach.call(n,function(n){n instanceof Array||typeof n=="object"||typeof n=="function"?t.push(r(n)):t.push(n)})):t=typeof n=="object"&&n!==null&&typeof n!="function"?u(n):n,t}var t=t||{},n=typeof n=="object"?n:null,u=e.objects.copy,i;if(n!==null){for(i in n)n.hasOwnProperty(i)&&(t[i]=r(n[i]));return t}return null},validate:function(n,t){var n=typeof n=="object"?n:null,t=t||null,i=null,r=null;if(n!==null&&t!==null){t=t instanceof Array?t:[t];try{t.forEach(function(t){if(t.name&&t.type)if(n[t.name]||typeof n[t.name]=="boolean"||typeof n[t.name]=="number"){if(t.type=typeof t.type=="string"?[t.type]:t.type,t.type instanceof Array){i=!1;try{t.type.forEach(function(r){if(r==="node"?n[t.name]&&(i=n[t.name].nodeName?!0:i):i=r==="array"?n[t.name]instanceof Array==!0?!0:i:window[r]!==void 0&&["string","number","bool"].indexOf(r)===-1?n[t.name]instanceof window[r]?!0:i:typeof n[t.name]===r?!0:i,i!==!1)throw"found";})}catch(u){u!=="found"&&(i=!1)}finally{if(i===!1)if(t.value!==void 0)n[t.name]=t.value;else throw"deny";else{if(t.values!==void 0&&t.values instanceof Array){try{r=!1;t.values.forEach(function(i){if(n[t.name]===i){r=!0;throw"found";}})}catch(u){}if(r===!1)throw"deny";}if(typeof t.handle=="function")try{n[t.name]=t.handle(n[t.name])}catch(u){if(t.value)n[t.name]=t.value;else throw"deny";}}}}}else if(t.value!==void 0)n[t.name]=t.value;else throw"deny";})}catch(u){return!1}return!0}return null},isValueIn:function(n,t,i){var i=typeof i=="boolean"?i:!1;if(n instanceof Array){try{n.forEach(function(n){if(n===t)throw"found";});i!==!1&&n.forEach(function(n){if((typeof n=="object"||n instanceof Array)&&e.objects.isValueIn(n,t,i)===!0)throw"found";})}catch(r){return!0}return!1}if(typeof n=="object"){try{e.objects.forEach(n,function(n,i){if(i===t)throw"found";});i!==!1&&e.objects.forEach(n,function(n,r){if((typeof r=="object"||r instanceof Array)&&e.objects.isValueIn(r,t,i)===!0)throw"found";})}catch(r){return!0}return!1}return null},getByPath:function(n,t){var n=typeof n=="object"?n:null,t=typeof t=="string"?t:t instanceof Array?t:null,r=null,u={NO_BY_PATH:"NO_BY_PATH"},i=n,f=!1;if(n!==null&&t!==null){r=t instanceof Array?t:t.split(".");try{r.forEach(function(n){if(i[n]!==void 0)i=i[n];else throw u.NO_BY_PATH;});f=!0}catch(e){if(e!==u.NO_BY_PATH)throw e;}}if(f)return i},findBy:function(n,t,i,r){var n=typeof n=="object"?n:null,t=typeof t=="string"?t:null,r=typeof r=="boolean"?r:!1,u=r?[]:null,f={FOUND:"1"};if(n!==null&&t!==null){t=t.split(".");try{e.objects.forEach(n,function(n,o){var s=e.objects.getByPath(o,t);if(s!==void 0&&s===i)if(r)u.push(o);else{u=o;throw f.FOUND;}})}catch(o){if(o!==f.FOUND)throw o;}}return u}},wrappers:{objects:function(){i.prototypes.add.object("forEach",function(n){return e.objects.forEach(this.target,n)});i.prototypes.add.object("extend",function(n,t){return e.objects.extend(this.target,n,t)});i.prototypes.add.object("copy",function(n){return e.objects.copy(this.target,n)});i.prototypes.add.object("validate",function(n){return e.objects.validate(this.target,n)});i.prototypes.add.object("isValueIn",function(n,t){return e.objects.isValueIn(this.target,n,t)});i.prototypes.add.object("getByPath",function(n){return e.objects.getByPath(this.target,n)});i.prototypes.add.object("findBy",function(n,t,i){return e.objects.findBy(this.target,n,t,i)});i.prototypes.add.object("createInstanceClass",function(){return e.classes.create(this.target)})}}},u={storage:{data:{},get:function(){return u.storage.data=t.localStorage.getJSON(s.hashes.LOCAL_STORAGE_NAME,s.other.STORAGE_PREFIX),(typeof u.storage.data!="object"||u.storage.data===null)&&u.storage.create(),u.storage.data},create:function(){u.storage.data={};u.storage.update()},update:function(){t.localStorage.setJSON(s.hashes.LOCAL_STORAGE_NAME,u.storage.data,s.other.STORAGE_PREFIX)}},get:function(n){var t=u.storage.get();return typeof t[n]=="object"?t[n].hash:null},set:function(n,t){var i=u.storage.get();return typeof t=="string"?(i[n]={url:n,hash:t},u.storage.update(),!0):!1},update:{add:function(n){u.update.queue.add(n)},queue:{queue:{},journal:{},isLock:!1,unlock:function(){u.update.queue.isLock=!1;u.update.proceed()},add:function(n){typeof n=="string"&&u.update.queue.journal[n]===void 0&&(u.update.queue.journal[n]=!0,u.update.queue.queue[n]={url:n,working:!1});u.update.queue.isLock||u.update.proceed()},del:function(n){typeof n=="string"&&(u.update.queue.queue[n]=null,delete u.update.queue.queue[n])},work:function(n){typeof u.update.queue.queue[n]=="object"&&(u.update.queue.queue[n].working=!0)},isWorking:function(n){if(typeof u.update.queue.queue[n]=="object")return u.update.queue.queue[n].working}},proceed:function(){e.objects.forEach(u.update.queue.queue,function(n,t){var i=null;u.update.queue.isWorking(n)===!1&&(u.update.queue.work(n),i=r.create(t.url,r.settings.methods.GET,null,{headers:function(i,r){u.update.processing(n,t.url,r)},fail:function(i,r){u.update.fail(n,t.url,r)}}),i.send())})},processing:function(n,t,i){var r="",f=u.get(t);i.headers!==null&&i.headers._headers!==""&&(u.update.queue.del(n),e.objects.forEach(i.headers.headers,function(n,t){n.toLowerCase()!=="date"&&(r+=t)}),u.get(t)!==r&&(f===null?o.log("[HASHES]:: hash for resource ["+t+"] was generated. Next updating of page, resource will be loaded again.",o.types.KERNEL_LOGS):(o.log("[HASHES]:: resource ["+t+"] have to be updated.",o.types.KERNEL_LOGS),u.resources.update(t)),u.set(t,r)),i.abort())},fail:function(n,t,i){i.headers===null&&(o.log("[HASHES]:: fail to load hash for resource ["+t+"].",o.types.KERNEL_LOGS),u.update.queue.del(n))}},resources:{update:function(n){if(u.resources.css.update(n)===!0)return!0;o.log("[HASHES]:: resource ["+n+"] cannot be updated in current session. It will be done after page be reloaded.",o.types.KERNEL_LOGS)},css:{update:function(n){var i=document.querySelector("style["+t.resources.css.settings.attr.SRC+'$="'+n+'"]');return i!==null?(t.resources.css.connect(n,function(){i.parentNode.removeChild(i);o.log("[HASHES]:: resource ["+n+"] have been updated in current session.",o.types.KERNEL_LOGS)}),!0):!1}}}},c={js:{stringify:function(n){var r=c.js.tools,i=null,t=null;if(typeof n=="function")return(i=n.toString(),t={params:r.getParams(i),body:r.getBody(i)},t.params!==null&&t.body!==null)?t:null},parse:function(n){var t=c.js.parseFunction(n.constr.params,n.constr.body);return typeof t=="function"&&(t.prototype=c.js.parseFunction(n.proto.params,n.proto.body),typeof t.prototype=="function")?t:null},parseFunction:function(n,t){return typeof n=="string"&&typeof t=="string"?n===""?new Function(t):new Function(n,t):null},tools:{regs:{FUNCTION:/^\(?function\s.*?\(.*?\)\s*?\{/gi,ARGUMENTS:/\(.*?\)/gi,ARGUMENTS_BORDERS:/[\(\)]/gi,BODY_END:/\}$/gi,STRICT:/(use strict)/gi},getBody:function(n){return n=n.replace(c.js.tools.regs.FUNCTION,""),n=n.replace(c.js.tools.regs.BODY_END,""),n.search(c.js.tools.regs.STRICT)===-1&&(n='"use strict";'+n),n},getParams:function(n){var t=n.match(c.js.tools.regs.FUNCTION);return t!==null&&t.length===1&&(t=t[0].match(c.js.tools.regs.ARGUMENTS),t.length===1)?t[0].replace(c.js.tools.regs.ARGUMENTS_BORDERS,""):null}}},css:{stringify:function(n){function i(n){function i(n){var t="";return n.cssRules&&(t="@keyframes "+n.name+" {\n\r",Array.prototype.forEach.call(n.cssRules,function(n){t+=n.keyText+" { "+n.style.cssText+" }\n\r"}),t+="}"),t}var t="",r=document;return n.cssRules||n.rules?Array.prototype.forEach.call(n.cssRules||n.rules,function(n){t+=typeof n.cssText=="string"?n.cssText+"\n\r":i(n)+"\n\r"}):typeof n.cssText=="string"&&(t=n.cssText),t}var r=document.styleSheets,t=null;try{Array.prototype.forEach.call(document.styleSheets,function(r){if(r.href&&r.href.indexOf(n)!==-1){t=i(r);throw"found";}})}catch(u){}finally{return t}}}},f={globaly:{storage:{},get:function(n,t,i){var r=f.globaly.storage;return n in r&&t in r[n]?r[n][t]:i?f.globaly.set(n,t,i):null},set:function(n,t,i){var r=f.globaly.storage;return r[n]=n in r?r[n]:{},r[n][t]=i,r[n][t]},remove:function(n,t){var i=f.globaly.storage;return n in i&&t in i[n]?(i[n][t]=null,delete i[n][t],Object.keys(i[n]).length===0&&(i[n]=null,delete i[n]),!0):!1}},objecty:{settings:{COMMON_STORAGE_NAME:"FlexObjectStorage"},set:function(n,t,i,r){var r=typeof r=="boolean"?r:!0,u=f.objecty.settings;return typeof n=="object"&&typeof t=="string"&&i!==void 0?(typeof n[u.COMMON_STORAGE_NAME]!="object"&&(n[u.COMMON_STORAGE_NAME]={}),r===!1?n[u.COMMON_STORAGE_NAME][t]===void 0&&(n[u.COMMON_STORAGE_NAME][t]=i):n[u.COMMON_STORAGE_NAME][t]=i,i):null},get:function(n,t,i,r){var i=typeof i=="boolean"?i:!1,r=r!==void 0?r:null,e=null,u=f.objecty.settings,o=f.objecty.tools;if(typeof n=="object"&&typeof t=="string")if(typeof n[u.COMMON_STORAGE_NAME]=="object"){if(n[u.COMMON_STORAGE_NAME][t]!==void 0)return e=n[u.COMMON_STORAGE_NAME][t],i===!0&&(n[u.COMMON_STORAGE_NAME][t]=null,o.deleteAttribute(n,t),o.clear(n)),e;if(r!==null)return n[u.COMMON_STORAGE_NAME][t]=r,n[u.COMMON_STORAGE_NAME][t]}else if(r!==null)return n[u.COMMON_STORAGE_NAME]={},n[u.COMMON_STORAGE_NAME][t]=r,n[u.COMMON_STORAGE_NAME][t];return null},remove:function(n,t){var r=typeof r=="boolean"?r:!1,i=f.objecty.settings,u=f.objecty.tools;return typeof n=="object"&&typeof t=="string"?typeof n[i.COMMON_STORAGE_NAME]=="object"&&n[i.COMMON_STORAGE_NAME][t]!==void 0?(n[i.COMMON_STORAGE_NAME][t]=null,u.deleteAttribute(n,t),u.clear(n),!0):!1:null},tools:{deleteAttribute:function(n,t){try{delete n[t]}catch(i){n.removeAttribute(t)}},clear:function(n){var t=f.objecty.settings,i=f.objecty.tools;Object.keys(n[t.COMMON_STORAGE_NAME]).length===0&&(n[t.COMMON_STORAGE_NAME]=null,i.deleteAttribute(n,t.COMMON_STORAGE_NAME))}}},register:{settings:{COMMON_STORAGE_NAME:"FlexRegisterStorage"},build:function(n,i){var r=function(n,t){this.name=n;this.onReady=t;this.items={}};return r.prototype={add:function(n){return this.items[n]?!1:(this.items[n]={isDone:!1,key:n},!0)},done:function(n,i){var i=typeof i=="boolean"?i:!1;return(this.items[n]&&(this.items[n].isDone=!0),i===!1&&this.isReady()!==!1)?(this.onReady!==null&&t.handle(this.onReady,null,"Register: "+this.name,this),!0):!1},isReady:function(){for(var n in this.items)if(this.items[n].isDone===!1)return!1;return!0},isIn:function(n){return this.items[n]?!0:!1},isDone:function(n){return this.items[n]?this.items[n].isDone:null}},new r(n,i)},open:function(n,t,i){var n=typeof n=="string"?n:null,t=t instanceof Array?t:t!==void 0?[t]:null,i=typeof i=="function"?i:null,r=null,u=f.globaly.get(s.storage.GROUP,f.register.settings.COMMON_STORAGE_NAME,{});return n!==null&&!u[n]?(r=f.register.build(n,i),t.forEach(function(n){r.add(n)}),u[n]=r,!0):!1},add:function(n,t){var i=f.globaly.get(s.storage.GROUP,f.register.settings.COMMON_STORAGE_NAME,{});return i[n]?i[n].add(t):!1},done:function(n,t,i){var r=f.globaly.get(s.storage.GROUP,f.register.settings.COMMON_STORAGE_NAME,{}),i=typeof i=="boolean"?i:!1;return r[n]&&r[n].done(t,i)!==!1&&(r[n]=null,delete r[n]),!1},isIn:function(n,t){var i=f.globaly.get(s.storage.GROUP,f.register.settings.COMMON_STORAGE_NAME,{});return i[n]?i[n].isIn(t):!1},isDone:function(n,t){var i=f.globaly.get(s.storage.GROUP,f.register.settings.COMMON_STORAGE_NAME,{});return i[n]?i[n].isDone(t):!1},isReady:function(n){var t=f.globaly.get(s.storage.GROUP,f.register.settings.COMMON_STORAGE_NAME,{});return t[n]?t[n].isReady():!0}}},h={DOM:{add:function(){return typeof addEventListener=="function"?function(n,t,i){var r=t instanceof Array?t:[t];Array.prototype.forEach.call(r,function(t){n.addEventListener(t,i,!1)})}:typeof document.attachEvent=="function"?function(n,t,i){var r=t instanceof Array?t:[t];Array.prototype.forEach.call(r,function(t){n.attachEvent("on"+t,i)})}:function(n,t,i){var r=t instanceof Array?t:[t];Array.prototype.forEach.call(r,function(t){n["on"+t]=i})}}(),remove:function(){return typeof removeEventListener=="function"?function(n,t,i){n.removeEventListener(t,i,!1)}:typeof document.detachEvent=="function"?function(n,t,i){n.detachEvent("on"+t,i)}:function(n,t){n["on"+t]=null}}()},core:{storage:{},listen:function(n,t,i,r,u){var n=n||null,t=t||null,i=i||null,r=r||a.id(),u=typeof u!="boolean"?!1:u,f=null,e=h.core;return n!==null&&t!==null&&i!==null?u!==!1&&e.get(n,t)===null?!1:(f=e.register(n,t),r in f,f[r]=i,r):!1},remove:function(n,t,i){var n=n||null,t=t||null,i=i||null,r=null,u=h.core.storage,f=h.core;return n!==null&&t!==null&&i!==null&&(r=f.register(n,t),i in r)?(r[i]=null,delete r[i],Object.keys(r).length===0&&(u[n][t]=null,delete u[n][t],Object.keys(u[n]).length===0&&(u[n]=null,delete u[n])),!0):!1},register:function(n,t){var i=h.core.storage;return n in i||(i[n]={}),t in i[n]||(i[n][t]={}),i[n][t]},get:function(n,t){var i=h.core.storage;return(n in i)?(t in i[n])?i[n][t]:null:null},fire:function(n,t,i){var r=h.core.get(n,t),u;if(r!==null)for(u in r)try{r[u](i)}catch(f){}}}},t={handle:function(n,t,i,r,u){function f(){return t===null?n.call(r):typeof t.length=="number"&&typeof t=="object"?n.apply(r,t):n.call(r,t)}var n=n||null,t=t||null,i=i||null,r=r||null,u=u||!1;if(n!==null)if(u)try{return f()}catch(e){return o.log("Initializer runFunction method catch error: \r\n"+o.parseError(e)+"\r\n Call point: "+i,o.types.WARNING),null}else return f();return null},localStorage:{get:function(n,i,r){var u=null,i=typeof i=="boolean"?i:!1,r=typeof r=="string"?r:"";try{return u=window.localStorage.getItem(r+n),typeof u!="string"&&(u=null),i!==!1&&(u=t.convertor.BASE64.decode(u),u=t.convertor.UTF8.decode(u)),u}catch(f){return null}},set:function(n,i,r,u){var f=i,r=typeof r=="boolean"?r:!1,u=typeof u=="string"?u:"";try{return window.localStorage.removeItem(u+n),r!==!1&&(f=typeof i!="string"?JSON.stringify(i):f,f=t.convertor.UTF8.encode(f),f=t.convertor.BASE64.encode(f)),window.localStorage.setItem(u+n,f),!0}catch(e){return o.log("Error during saving data into localStorage. [key]:["+n+"]",o.types.WARNING),!1}},del:function(n,t){var t=typeof t=="string"?t:"";try{return window.localStorage.removeItem(t+n),!0}catch(i){return o.log("Error during deleting data from localStorage. [key]:["+n+"]",o.types.WARNING),null}},getJSON:function(n,i){var r=t.localStorage.get(n,!0,i);if(r!==null)try{return JSON.parse(r)}catch(u){return null}return null},setJSON:function(n,i,r){return t.localStorage.set(n,JSON.stringify(i),!0,r)},reset:function(n){var n=typeof n=="string"?n:"",i=[],t;try{if(n!==null){for(t in window.localStorage)t.indexOf(n)===0&&i.push(t);i.forEach(function(n){window.localStorage.removeItem(n)})}else window.localStorage.clear();return!0}catch(r){return!1}},isAvailable:function(){var n=a.id(),i=!1;return t.localStorage.set(n,n),i=t.localStorage.get(n)===n?!0:!1,t.localStorage.del(n),i}},resources:{settings:{RESOURCES_MARK_ATTR:{name:"data-flex-connect-mark",value:"dynamically"},CSS_TIMER_PROPERTY:"flex_css_load_event_timer",CSS_TIMER_DURATION:5e3},css:{settings:{URLS:[{reg:/url\('([^\)'].*?)'\)/gi,left:/url\('/gi,right:/'\)/gi,_left:'url("',_right:'")'},{reg:/url\("([^\)"].*?)"\)/gi,left:/url\("/gi,right:/"\)/gi,_left:'url("',_right:'")'},],attr:{SRC:"data-flex-src"}},connect:function(n,i,r){function f(n){var r=t.resources.settings,i=document.createElement("LINK");return i.type="text/css",i.href=n,i.rel="stylesheet",i.setAttribute(r.RESOURCES_MARK_ATTR.name,r.RESOURCES_MARK_ATTR.value),{link:i,append:function(){document.head.appendChild(i)}}}function e(n,i,r){function f(n){clearTimeout(n[u.CSS_TIMER_PROPERTY]);n[u.CSS_TIMER_PROPERTY]=null;delete n[u.CSS_TIMER_PROPERTY]}var u=t.resources.settings;n[u.CSS_TIMER_PROPERTY]=setTimeout(function(){if(n[u.CSS_TIMER_PROPERTY]!==void 0){var e=document.createElement("IMG");f(n,u);h.DOM.add(e,["load","error"],function(){t.handle(r,i,"system.resources.css.connect",this)});e.src=i}},u.CSS_TIMER_DURATION);h.DOM.add(n,"load",function(){n[u.CSS_TIMER_PROPERTY]!==void 0&&(f(n,u),t.handle(r,i,"system.resources.css.connect",this))})}function s(n){var i=document.styleSheets;try{Array.prototype.forEach.call(document.styleSheets,function(t){if(t.href.indexOf(n)!==-1)throw"found";})}catch(t){if(t==="found")return!0}return!1}var u=null,i=i||null,r=r||null,n=n||null;return n!==null&&s(n)===!1?(u=f(n),h.DOM.add(u.link,"error",function(){o.log("During loading CSS resource ["+n+"] was error",o.types.WARNING)}),r!==null&&h.DOM.add(u.link,"error",r),i!==null?e(u.link,n,i):t.handle(i,null,"system.resources.css.connect",this),u.append(),!0):!1},adoption:function(n,i,r){var i=i!==null?typeof i=="object"?i.body!==void 0?i:document:document:document,u=i.createElement("style"),r=typeof r=="string"?r:null;if(typeof n=="string")try{return r!==null&&(n=t.resources.css.correctPaths(n,r),u.setAttribute(t.resources.css.settings.attr.SRC,r)),u.type="text/css",u.styleSheet?u.styleSheet.cssText=n:u.appendChild(i.createTextNode(n)),i.head.appendChild(u),u}catch(f){return o.log("Error during adoption of CSS resource: url = ["+r+"], cssText starts from ["+n.substr(0,50)+" (...)]",o.types.CRITICAL),null}return null},correctPaths:function(n,i){function r(n,i){var r=null;return n.trim().toLowerCase().indexOf("data:")!==0?(r=t.url.parse(n,i),r!==null?r.url:n):n}return l.settings.CHECK_PATHS_IN_CSS!==!1&&typeof i=="string"&&i!==""&&t.resources.css.settings.URLS.forEach(function(t){var u=n.match(t.reg);u instanceof Array&&u.forEach(function(u){var f=u;f=f.replace(t.left,"");f=f.replace(t.right,"");f=r(f,i);f!==null&&(n=n.replace(u,t._left+f+t._right))})}),n}},js:{connect:function(n,i,r){function f(n){var r=t.resources.settings,i=document.createElement("SCRIPT");return i.type="application/javascript",i.src=n,i.setAttribute(r.RESOURCES_MARK_ATTR.name,r.RESOURCES_MARK_ATTR.value),{script:i,append:function(){document.head.appendChild(i)}}}var u=null,i=i||null,r=r||null,n=n||null;return n!==null?(u=f(n),i!==null&&h.DOM.add(u.script,"load",i),r!==null&&h.DOM.add(u.script,"error",r),u.append(),u.script):!1},adoption:function(n,i){var r=document.createElement("SCRIPT"),i=i||null,n=n||null;n!==null&&(r.type="application/javascript",r.appendChild(document.createTextNode(n)),document.body.insertBefore(r,document.body.childNodes[0]),i!==null&&t.handle(i,null,"system.resources.js.adoption",this))},getCurrentSRC:function(){var n=null;try{throw new Error("Script URL detection");}catch(t){return typeof t.stack=="string"&&(n=t.stack.match(s.regs.urls.JS_URL),n instanceof Array&&n.length>0)?n[n.length-1].indexOf(s.files.CORE_URL)===-1?n[n.length-1]:null:null}}}},convertor:{UTF8:{encode:function(n){return unescape(encodeURIComponent(n))},decode:function(n){return decodeURIComponent(escape(n))}},BASE64:{decode:function(n){var c={},t,l=[],i="",a=String.fromCharCode,u,f=[[65,91],[97,123],[48,58],[43,44],[47,48]],e=0,v,r,o=0,s=0,h,y,p;for(u in f)for(t=f[u][0];t<f[u][1];t++)l.push(a(t));for(t=0;t<64;t++)c[l[t]]=t;for(n.length<100&&(p=!0),t=0;t<n.length;t+=72)for(s=n.substring(t,t+72),r=0;r<s.length;r++)for(v=c[s.charAt(r)],e=(e<<6)+v,o+=6;o>=8;)h=a((e>>>(o-=8))%256),y=h.charCodeAt(0),i=y!==0?i+h:i;return i},encode:function(n){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e,o,s,h,c,l,a,r,t,u=0,y=0,f="",v=[];if(!n)return n;do e=n.charCodeAt(u++),o=n.charCodeAt(u++),s=n.charCodeAt(u++),t=e<<16|o<<8|s,h=t>>18&63,c=t>>12&63,l=t>>6&63,a=t&63,v[y++]=i.charAt(h)+i.charAt(c)+i.charAt(l)+i.charAt(a);while(u<n.length);return f=v.join(""),r=n.length%3,(r?f.slice(0,r-3):f)+"===".slice(r||3)}}},url:{settings:{parser:{LAST:/([^\/]*)$/gi,CORRECTION:/[\/\\]$/gi,BAD_SLASH:/\\/gi,PROTOCOL:/:\/\//gi,DOUBLE:/\/{2,}/gi}},getURLInfo:function(n){var i=document.createElement("a"),t=null;return typeof n=="string"&&(i.setAttribute("href",n),t={hostname:i.hostname,host:i.host,port:i.port,protocol:i.protocol,isFull:!1},t.isFull=t.hostname!==""?n.indexOf(t.protocol+"//"+t.hostname)!==0?!1:!0:!1),t},getCurrentDomain:function(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.host},getParams:function(n){var t=null,i=null;return n=n.split("?"),t=n.length===2?n[1]:null,n=n[0],t!==null&&(i=t.split("&"),t={},i.forEach(function(n){var i=n.split("=");i.length===2&&(t[i[0]]=i[1])})),{url:n,params:t}},restoreFullURL:function(n){var i=n;return typeof n=="string"?(i=t.url.getURLInfo(i),i.isFull===!1?i.hostname===""?t.url.getCurrentDomain()+(n.indexOf("/")!==0?"/":"")+n:i.protocol+"//"+i.host+(n.indexOf("/")!==0?"/":"")+n:n):null},parse:function(n,i){function s(n){var i=0,r=!0,t=-1,u="";return n.split("/").forEach(function(n,f){n===".."?(i+=1,t!==-1&&t!==f-1&&(r=!1),t=f):u+="/"+n}),r===!0?{count:i,url:u}:!1}function h(n){return n=n.replace(t.url.settings.parser.CORRECTION,""),n.replace(t.url.settings.parser.BAD_SLASH,"/")}var r=null,u=null,i=typeof i=="string"?i:null,e=0,f=null,o=null;if(typeof n=="string"&&(n=h(n),o=t.url.getParams(n),n=o.url,o=o.params,u=t.url.getURLInfo(n),u!==null&&(e=s(n),e!==!1)))if(e.count>0){if(i!==null&&(f=t.url.parse(i),f!==null&&e.count<f.parts.length-1))return f.parts.splice(f.parts.length-e.count,e.count),f.parts=f.parts.map(function(n){return n==="//"?"":n}),n=f.parts.join("/")+e.url,t.url.parse(n)}else if(u.isFull===!1){if(i=i===null?t.url.getCurrentDomain():i,f=t.url.parse(i),f!==null)return n.indexOf("~/")===0?n=n.replace("~",f.home):(f.parts=f.parts.map(function(n){return n==="//"?"":n}),n=f.parts.join("/")+(n.indexOf("/")!==0?"/":"")+n),t.url.parse(n)}else if(r={target:n.match(t.url.settings.parser.LAST),_path:"",_url:n,_hostname:u.hostname,hostname:u.hostname!==""?u.hostname:window.location.hostname,_host:u.host,host:u.host!==""?u.host:window.location.host,_port:u.port,port:u.port!==""?u.port:window.location.port,_protocol:u.protocol,protocol:u.protocol!==":"?u.protocol:window.location.protocol,home:u.hostname===""?window.location.protocol+"//"+window.location.host:u.protocol+"//"+u.host,_home:u.hostname!==""?u.protocol+"//"+u.host:"",params:o,parts:null},r.target.length>0)return r.target instanceof Array?(r.target=r.target[0],r.target.indexOf(".")===-1&&(r.target="")):r.target="",r._path=n.replace(r.target,""),r._home===""?(r.path=r.home+(r._path.indexOf("/")===0?"":"/")+r._path,r.url=r.home+(r._url.indexOf("/")===0?"":"/")+r._url):(r.path=r._path,r.url=r._url),r.parts=r.url.split("/").map(function(n){return n===""?"//":n}),r.parts.indexOf(r.target)!==-1&&r.parts.splice(r.parts.indexOf(r.target),1),r;return null},sterilize:function(n){var i=a.id();return n.replace(t.url.settings.parser.PROTOCOL,i).replace(t.url.settings.parser.BAD_SLASH,"/").replace(t.url.settings.parser.DOUBLE,"/").replace(i,"://")},getTypeOfResource:function(n){var t=n.replace(s.regs.urls.PARAMS,"");return(t=t.match(s.regs.urls.EXTENSION),t instanceof Array&&t.length===1)?t[0].toLowerCase():null},is:{clear:function(n){return typeof n=="string"?(n=n.split("?"),n=n[0],n.replace(s.regs.urls.NOT_URL_SYMBOLS,"")):null},js:function(n){return(n=t.url.is.clear(n),n!==null)?(s.regs.urls.JS_EXP_IN_URL.lastIndex=0,s.regs.urls.JS_EXP_IN_URL.test(n)):!1},css:function(n){return(n=t.url.is.clear(n),n!==null)?(s.regs.urls.CSS_EXP_IN_URL.lastIndex=0,s.regs.urls.CSS_EXP_IN_URL.test(n)):!1}}}},a={id:function(){var n=0;return function(t){return n+=1,(t||"")+(new Date).valueOf()+"_"+n}}()},o={types:{CRITICAL:"CRITICAL",LOGICAL:"LOGICAL",WARNING:"WARNING",NOTIFICATION:"NOTIFICATION",LOGS:"LOG",KERNEL_LOGS:"KERNEL_LOGS"},rendering:{CRITICAL:"color: #FF0000;font-weight:bold;",LOGICAL:"color: #00FFF7;font-weight:bold;",WARNING:"color: #A69600;font-weight:bold;",NOTIFICATION:"color: #988DFF;font-weight:bold;",LOGS:"color: #6C6C6C;",KERNEL_LOGS:"color: #008B0E;font-weight:bold;"},parseError:function(n){var i=n.name+": "+n.message+"\r\n--------------------------------------------";for(var t in n)t!=="name"&&t!=="message"&&(i=i+"\r\n  "+t+"="+n[t]);return i},log:function(n,t){var t=t||"LOGS";console&&o.types[t]&&console.log!==void 0&&l.settings.SHOWN_LOGS.indexOf(t)!==-1&&console.log("%c ["+t+"]%c"+n,o.rendering[t],o.rendering.LOGS)}},i={callers:{node:function(){var n={};return function(t,r,u){var f=null,r=typeof r=="boolean"?r:!1;if(typeof t=="string"){if(r&&n[t]&&n[t]!==null&&(f=n[t]),f=f!==null?f:(u||document).querySelector(t),r&&!n[t]&&f!==null&&(n[t]=f),f!==null)return new i.constructors.node(f)}else if(t!==void 0&&(typeof t.nodeName=="string"||t==window))return new i.constructors.node(t);return null}}(),nodes:function(){var n={};return function(t,r,u){var f=null,r=typeof r=="boolean"?r:!1;if(typeof t=="string"){if(r&&n[t]&&n[t]!==null&&n[t].length>0&&(f=n[t]),f=f!==null?f:(u||document).querySelectorAll(t),r&&!n[t]&&f!==null&&f.length>0&&(n[t]=f),f!==null)return new i.constructors.nodes(f)}else if(t!==void 0&&typeof t.length=="number"&&t.length>0){if(typeof t[0]=="string")return f=[],Array.prototype.forEach.call(t,function(n){var t=(u||document).querySelector(n);t!==null&&f.push(t)}),new i.constructors.nodes(f);if(typeof t[0].nodeName=="string")return new i.constructors.nodes(t)}return null}}(),array:function(n){return n instanceof Array?new i.constructors.array(n):null},string:function(n){return typeof n=="string"?new i.constructors.string(n):null},boolean:function(n){return typeof n=="boolean"?new i.constructors.boolean(n):null},object:function(n){return typeof n=="object"?new i.constructors.object(n):null}},prototypes:{node:{},nodes:{},array:{},string:{},boolean:{},object:{},update:{update:function(n){function t(n){var r=null,i,u;for(i in n)if(n.hasOwnProperty(i)){if(typeof n[i]=="object"){r=function(){return r.target=this.target,r};for(u in n[i])r[u]=n[i][u];n[i]=r}typeof n[i]=="function"&&t(n[i])}}i.prototypes[n]&&t(i.prototypes[n])},node:function(){i.prototypes.update.update("node")},nodes:function(){i.prototypes.update.update("nodes")},array:function(){i.prototypes.update.update("array")},string:function(){i.prototypes.update.update("string")},boolean:function(){i.prototypes.update.update("boolean")},object:function(){i.prototypes.update.update("object")}},add:{add:function(n,t,r){var f=null,u=null;typeof n=="string"&&typeof t=="string"&&r!==void 0&&i.prototypes[n]&&(f=t.split("."),u=i.prototypes[n],f.forEach(function(n,t){u[n]===void 0?t===f.length-1?u[n]=r:(u[n]={},u=u[n]):typeof u[n]=="object"||typeof u[n]=="function"?u=u[n]:(u[n]={},u=u[n])}),i.prototypes.update[n]())},node:function(n,t){i.prototypes.add.add("node",n,t)},nodes:function(n,t){i.prototypes.add.add("nodes",n,t)},array:function(n,t){i.prototypes.add.add("array",n,t)},string:function(n,t){i.prototypes.add.add("string",n,t)},boolean:function(n,t){i.prototypes.add.add("boolean",n,t)},object:function(n,t){i.prototypes.add.add("object",n,t)}}},constructors:{node:function(n){this.target=n},nodes:function(n){this.target=n},array:function(n){this.target=n},string:function(n){this.target=n},boolean:function(n){this.target=n},object:function(n){this.target=n}},build:function(){for(var n in i.constructors)i.constructors[n].prototype=i.prototypes[n];return!0}},n={init:l.init,oop:{objects:{copy:e.objects.copy,extend:e.objects.extend,forEach:e.objects.forEach,validate:e.objects.validate,isValueIn:e.objects.isValueIn},classes:{of:e.classes.of,create:e.classes.create}},unique:a.id,events:{DOM:{add:h.DOM.add,remove:h.DOM.remove},core:{fire:h.core.fire,listen:h.core.listen,register:h.core.register,remove:h.core.remove}},overhead:{globaly:{set:f.globaly.set,get:f.globaly.get,del:f.globaly.remove},objecty:{set:f.objecty.set,get:f.objecty.get,del:f.objecty.remove},register:{open:f.register.open,add:f.register.add,done:f.register.done}},ajax:{send:r.create,methods:{POST:r.settings.methods.POST,GET:r.settings.methods.GET,PUT:r.settings.methods.PUT,DELETE:r.settings.methods.DELETE,OPTIONS:r.settings.methods.OPTIONS}},logs:{parseError:o.parseError,log:o.log,types:o.types},callers:{node:i.callers.node,nodes:i.callers.nodes,array:i.callers.array,object:i.callers.object,string:i.callers.string,boolean:i.callers.boolean,define:{node:i.prototypes.add.node,nodes:i.prototypes.add.nodes,array:i.prototypes.add.array,object:i.prototypes.add.object,string:i.prototypes.add.string,boolean:i.prototypes.add.boolean}},resources:{parse:{css:{stringify:c.css.stringify}},attach:{css:{connect:t.resources.css.connect,adoption:t.resources.css.adoption},js:{connect:t.resources.js.connect,adoption:t.resources.js.adoption,getCurrentSRC:t.resources.js.getCurrentSRC}}},system:{handle:t.handle,convertor:{UTF8:{encode:t.convertor.UTF8.encode,decode:t.convertor.UTF8.decode},BASE64:{encode:t.convertor.BASE64.encode,decode:t.convertor.BASE64.decode}},url:{parse:t.url.parse,restore:t.url.restoreFullURL}},localStorage:{add:t.localStorage.set,get:t.localStorage.get,del:t.localStorage.del,addJSON:t.localStorage.setJSON,getJSON:t.localStorage.getJSON},hashes:{get:u.get,update:u.update.add},config:{get:l.get,set:l.set}},s.files.detect(),i.build(),e.wrappers.objects(),{init:n.init,oop:{objects:{copy:n.oop.objects.copy,extend:n.oop.objects.extend,forEach:n.oop.objects.forEach,validate:n.oop.objects.validate,isValueIn:n.oop.objects.isValueIn},classes:{of:n.oop.classes.of,create:n.oop.classes.create}},unique:n.unique,events:{DOM:{add:n.events.DOM.add,remove:n.events.DOM.remove},core:{fire:n.events.core.fire,listen:n.events.core.listen,register:n.events.core.register,remove:n.events.core.remove}},overhead:{globaly:{set:n.overhead.globaly.set,get:n.overhead.globaly.get,del:n.overhead.globaly.del},objecty:{set:n.overhead.objecty.set,get:n.overhead.objecty.get,del:n.overhead.objecty.del},register:{open:n.overhead.register.open,add:n.overhead.register.add,done:n.overhead.register.done}},ajax:{send:n.ajax.send,methods:n.ajax.methods},resources:{parse:{css:{stringify:n.resources.parse.css.stringify}},attach:{css:{connect:n.resources.attach.css.connect,adoption:n.resources.attach.css.adoption},js:{connect:n.resources.attach.js.connect,adoption:n.resources.attach.js.adoption,getCurrentSRC:n.resources.attach.js.getCurrentSRC}}},localStorage:{add:n.localStorage.add,get:n.localStorage.get,del:n.localStorage.del,addJSON:n.localStorage.addJSON,getJSON:n.localStorage.getJSON},system:{handle:n.system.handle,convertor:{UTF8:{encode:n.system.convertor.UTF8.encode,decode:n.system.convertor.UTF8.decode},BASE64:{encode:n.system.convertor.BASE64.encode,decode:n.system.convertor.BASE64.decode}},url:{parse:n.system.url.parse,restore:n.system.url.restore}},logs:{parseError:n.logs.parseError,log:n.logs.log,types:n.logs.types},hashes:{get:n.hashes.get,update:n.hashes.update},callers:{node:n.callers.node,nodes:n.callers.nodes,array:n.callers.array,object:n.callers.object,string:n.callers.string,boolean:n.callers.boolean,define:{node:n.callers.define.node,nodes:n.callers.define.nodes,array:n.callers.define.array,object:n.callers.define.object,string:n.callers.define.string,boolean:n.callers.define.boolean}},config:{get:n.config.get,set:n.config.set}}};t.prototype=t.prototype();window.flex=new t;window._node=flex.callers.node;window._nodes=flex.callers.nodes;window._array=flex.callers.array;window._object=flex.callers.object;window._string=flex.callers.string;window._boolean=flex.callers.boolean;flex.registry={};flex.registry.events={ui:{window:{resize:{GROUP:"flex.ui.window.resize",REFRESH:"refresh",FINISH:"finish"},maximize:{GROUP:"flex.ui.window.maximize",MAXIMIZED:"maximized",RESTORED:"restored",CHANGE:"change"}},patterns:{GROUP:"flex.ui.patterns",MOUNTED:"mounted"}}};i.prototype=i.prototype();r.prototype=r.prototype();n.prototype=n.prototype();u.prototype=u.prototype();f.prototype=f.prototype();e.prototype=e.prototype();o.prototype=o.prototype();s.prototype=s.prototype();window.flex.libraries={events:new i,binds:new r,html:new u,ui:{window:{move:new e,resize:new o,maximize:new s,focus:new f},patterns:new n}};window._patterns=flex.libraries.ui.patterns})();